{
  "version": 3,
  "sources": ["../../monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js", "../../monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js", "../../monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js", "../../monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.js", "../../monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js", "../../monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js", "../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js", "../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js", "../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js", "../../monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js", "../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js", "../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/defaultDocumentColorProvider.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js", "../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/contentHover.js", "../../monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/hoverTypes.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/resizableContentWidget.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/marginHover.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js", "../../monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js", "../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js", "../../monaco-editor/esm/vs/platform/severityIcon/browser/severityIcon.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerActions.js", "../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerWidget.js", "../../monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js", "../../monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js", "../../monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js", "../../monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js", "../../monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js", "../../monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/copyPasteContribution.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/copyPasteController.js", "../../monaco-editor/esm/vs/editor/browser/dnd.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/edit.js", "../../monaco-editor/esm/vs/editor/contrib/inlineProgress/browser/inlineProgress.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/postEditWidget.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/defaultProviders.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorContribution.js", "../../monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findController.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findState.js", "../../monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js", "../../monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js", "../../monaco-editor/esm/vs/editor/editor.all.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletions.contribution.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/commands.js", "../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/hoverParticipant.js", "../../monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js", "../../monaco-editor/esm/vs/editor/contrib/indentation/browser/indentUtils.js", "../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js", "../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js", "../../monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js", "../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js", "../../monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js", "../../monaco-editor/esm/vs/editor/contrib/links/browser/links.js", "../../monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js", "../../monaco-editor/esm/vs/editor/contrib/longLinesHelper/browser/longLinesHelper.js", "../../monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js", "../../monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/highlightDecorations.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js", "../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js", "../../monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js", "../../monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js", "../../monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/documentSemanticTokens.js", "../../monaco-editor/esm/vs/editor/contrib/semanticTokens/common/getSemanticTokens.js", "../../monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/viewportSemanticTokens.js", "../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js", "../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollContribution.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollActions.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollWidget.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollModelProvider.js", "../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollElement.js", "../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js", "../../monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js", "../../monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js", "../../monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js", "../../monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js", "../../monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js", "../../monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/wordHighlighter.js", "../../monaco-editor/esm/vs/editor/contrib/wordOperations/browser/wordOperations.js", "../../monaco-editor/esm/vs/editor/contrib/wordPartOperations/browser/wordPartOperations.js", "../../monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js", "../../monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js", "../../monaco-editor/esm/vs/editor/editor.api.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js", "../../monaco-editor/esm/vs/editor/standalone/browser/colorizer.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchLexer.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCommon.js", "../../monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js", "../../monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCompile.js"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(55 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(55 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(54 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { IOutlineModelService } from './outlineModel.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource] = args;\n        assertType(URI.isUri(resource));\n        const outlineService = accessor.get(IOutlineModelService);\n        const modelService = accessor.get(ITextModelService);\n        const reference = yield modelService.createModelReference(resource);\n        try {\n            return (yield outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n    constructor(editRange, originalSelection, text) {\n        this._editRange = editRange;\n        this._originalSelection = originalSelection;\n        this._text = text;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._editRange, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        if (!this._originalSelection.isEmpty()) {\n            // Preserve selection and extends to typed text\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n        }\n        return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar InPlaceReplaceController_1;\nimport { createCancelablePromise, timeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { EditorState } from '../../editorState/browser/editorState.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport * as nls from '../../../../nls.js';\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\nimport './inPlaceReplace.css';\nlet InPlaceReplaceController = InPlaceReplaceController_1 = class InPlaceReplaceController {\n    static get(editor) {\n        return editor.getContribution(InPlaceReplaceController_1.ID);\n    }\n    constructor(editor, editorWorkerService) {\n        this.editor = editor;\n        this.editorWorkerService = editorWorkerService;\n        this.decorations = this.editor.createDecorationsCollection();\n    }\n    dispose() {\n    }\n    run(source, up) {\n        var _a;\n        // cancel any pending request\n        (_a = this.currentRequest) === null || _a === void 0 ? void 0 : _a.cancel();\n        const editorSelection = this.editor.getSelection();\n        const model = this.editor.getModel();\n        if (!model || !editorSelection) {\n            return undefined;\n        }\n        let selection = editorSelection;\n        if (selection.startLineNumber !== selection.endLineNumber) {\n            // Can't accept multiline selection\n            return undefined;\n        }\n        const state = new EditorState(this.editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const modelURI = model.uri;\n        if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\n            return Promise.resolve(undefined);\n        }\n        this.currentRequest = createCancelablePromise(token => this.editorWorkerService.navigateValueSet(modelURI, selection, up));\n        return this.currentRequest.then(result => {\n            var _a;\n            if (!result || !result.range || !result.value) {\n                // No proper result\n                return;\n            }\n            if (!state.validate(this.editor)) {\n                // state has changed\n                return;\n            }\n            // Selection\n            const editRange = Range.lift(result.range);\n            let highlightRange = result.range;\n            const diff = result.value.length - (selection.endColumn - selection.startColumn);\n            // highlight\n            highlightRange = {\n                startLineNumber: highlightRange.startLineNumber,\n                startColumn: highlightRange.startColumn,\n                endLineNumber: highlightRange.endLineNumber,\n                endColumn: highlightRange.startColumn + result.value.length\n            };\n            if (diff > 1) {\n                selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\n            }\n            // Insert new text\n            const command = new InPlaceReplaceCommand(editRange, selection, result.value);\n            this.editor.pushUndoStop();\n            this.editor.executeCommand(source, command);\n            this.editor.pushUndoStop();\n            // add decoration\n            this.decorations.set([{\n                    range: highlightRange,\n                    options: InPlaceReplaceController_1.DECORATION\n                }]);\n            // remove decoration after delay\n            (_a = this.decorationRemover) === null || _a === void 0 ? void 0 : _a.cancel();\n            this.decorationRemover = timeout(350);\n            this.decorationRemover.then(() => this.decorations.clear()).catch(onUnexpectedError);\n        }).catch(onUnexpectedError);\n    }\n};\nInPlaceReplaceController.ID = 'editor.contrib.inPlaceReplaceController';\nInPlaceReplaceController.DECORATION = ModelDecorationOptions.register({\n    description: 'in-place-replace',\n    className: 'valueSetReplacement'\n});\nInPlaceReplaceController = InPlaceReplaceController_1 = __decorate([\n    __param(1, IEditorWorkerService)\n], InPlaceReplaceController);\nclass InPlaceReplaceUp extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.up',\n            label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\n            alias: 'Replace with Previous Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 87 /* KeyCode.Comma */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, false);\n    }\n}\nclass InPlaceReplaceDown extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.down',\n            label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\n            alias: 'Replace with Next Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, true);\n    }\n}\nregisterEditorContribution(InPlaceReplaceController.ID, InPlaceReplaceController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(InPlaceReplaceUp);\nregisterEditorAction(InPlaceReplaceDown);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar SelectionAnchorController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = SelectionAnchorController_1 = class SelectionAnchorController {\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController_1.ID);\n    }\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = SelectionAnchorController_1 = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 93 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass RemoveBracketsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeBrackets',\n            label: nls.localize('smartSelect.removeBrackets', \"Remove Brackets\"),\n            alias: 'Remove Brackets',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.removeBrackets(this.id);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(70 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(70 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(70 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    removeBrackets(editSource) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        this._editor.getSelections().forEach((selection) => {\n            const position = selection.getPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n            }\n            if (brackets) {\n                this._editor.pushUndoStop();\n                this._editor.executeEdits(editSource, [\n                    { range: brackets[0], text: '' },\n                    { range: brackets[1], text: '' }\n                ]);\n                this._editor.pushUndoStop();\n            }\n        });\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterEditorAction(RemoveBracketsAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1, when: ContextKeyExpr.and(ContextKeyExpr.notEquals('resourceScheme', 'output'), EditorContextKeys.editorTextFocus) });\nMenuRegistry.appendMenuItem(MenuId.EditorTitleContext, { submenu: MenuId.EditorTitleContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, { submenu: MenuId.ExplorerContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(36 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(36 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(36 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, RefactorAction, SourceAction } from './codeActionCommands.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CodeActionController.ID, CodeActionController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorContribution(LightBulbWidget.ID, LightBulbWidget, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.codeActionWidget.showHeaders': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('showCodeActionHeaders', \"Enable/disable showing group headers in the Code Action menu.\"),\n            default: true,\n        },\n    } }));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { autoFixCommandId, codeActionCommandId, fixAllCommandId, organizeImportsCommandId, quickFixCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = CodeActionController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply);\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: quickFixCommandId,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, CodeActionTriggerSource.QuickFix);\n    }\n}\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Refactor,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n                : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n            include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n            onlyIncludePreferredActions: args.preferred\n        }, args.apply, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.FixAll);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: autoFixCommandId,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.AutoFix);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(49 /* EditorOption.fontInfo */) || e.hasChanged(18 /* EditorOption.codeLensFontSize */) || e.hasChanged(17 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(16 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(65 /* EditorOption.lineHeight */) / this._editor.getOption(51 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(18 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(51 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(17 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(49 /* EditorOption.fontInfo */);\n        const { style } = this._editor.getContainerDomNode();\n        style.setProperty('--vscode-editorCodeLens-lineHeight', `${codeLensHeight}px`);\n        style.setProperty('--vscode-editorCodeLens-fontSize', `${fontSize}px`);\n        style.setProperty('--vscode-editorCodeLens-fontFeatureSettings', editorFontInfo.fontFeatureSettings);\n        if (fontFamily) {\n            style.setProperty('--vscode-editorCodeLens-fontFamily', fontFamily);\n            style.setProperty('--vscode-editorCodeLens-fontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\n        }\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(16 /* EditorOption.codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            var _a;\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n            // Cancel pending and active resolve requests\n            this._resolveCodeLensesScheduler.cancel();\n            (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._resolveCodeLensesPromise = undefined;\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        if (!groups.length && !this._lenses.length) {\n            // Nothing to change\n            return;\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache, 1 /* InstantiationType.Delayed */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nconst codeLensDecorationOptions = ModelDecorationOptions.register({\n    collapseOnReplaceEdit: true,\n    description: 'codelens'\n});\nexport class CodeLensWidget {\n    constructor(data, editor, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n    getItems() {\n        return this._data;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const colorDecoratorsActivatedOn = this._editor.getOption(145 /* EditorOption.colorDecoratorsActivatedOn */);\n        if (colorDecoratorsActivatedOn !== 'click' && colorDecoratorsActivatedOn !== 'clickAndHover') {\n            return;\n        }\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false, true);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution';\nColorContribution.RECOMPUTE_TIME = 1000; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar ColorDetector_1;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nlet ColorDetector = ColorDetector_1 = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._decoratorLimitReporter = new DecoratorLimitReporter();\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector_1.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isColorDecoratorsEnabled = this.isEnabled();\n            this.updateColors();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.updateColors()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.updateColors()));\n        this._register(_editor.onDidChangeConfiguration((e) => {\n            const prevIsEnabled = this._isColorDecoratorsEnabled;\n            this._isColorDecoratorsEnabled = this.isEnabled();\n            this._isDefaultColorDecoratorsEnabled = this._editor.getOption(144 /* EditorOption.defaultColorDecorators */);\n            const updatedColorDecoratorsSetting = prevIsEnabled !== this._isColorDecoratorsEnabled || e.hasChanged(20 /* EditorOption.colorDecoratorsLimit */);\n            const updatedDefaultColorDecoratorsSetting = e.hasChanged(144 /* EditorOption.defaultColorDecorators */);\n            if (updatedColorDecoratorsSetting || updatedDefaultColorDecoratorsSetting) {\n                if (this._isColorDecoratorsEnabled) {\n                    this.updateColors();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isColorDecoratorsEnabled = this.isEnabled();\n        this._isDefaultColorDecoratorsEnabled = this._editor.getOption(144 /* EditorOption.defaultColorDecorators */);\n        this.updateColors();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(19 /* EditorOption.colorDecorators */);\n    }\n    get limitReporter() {\n        return this._decoratorLimitReporter;\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    updateColors() {\n        this.stop();\n        if (!this._isColorDecoratorsEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const model = this._editor.getModel();\n                if (!model) {\n                    return [];\n                }\n                const sw = new StopWatch(false);\n                const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token, this._isDefaultColorDecoratorsEnabled);\n                this._debounceInformation.update(model, sw.elapsed());\n                return colors;\n            }));\n            try {\n                const colors = yield this._computePromise;\n                this.updateDecorations(colors);\n                this.updateColorDecorators(colors);\n                this._computePromise = null;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n            }\n        });\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        const limit = this._editor.getOption(20 /* EditorOption.colorDecoratorsLimit */);\n        for (let i = 0; i < colorData.length && decorations.length < limit; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        const limited = limit < colorData.length ? limit : false;\n        this._decoratorLimitReporter.update(colorData.length, limited);\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = ColorDetector_1 = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nexport class DecoratorLimitReporter {\n    constructor() {\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._computed = 0;\n        this._limited = false;\n    }\n    get computed() {\n        return this._computed;\n    }\n    get limited() {\n        return this._limited;\n    }\n    update(computed, limited) {\n        if (computed !== this._computed || limited !== this._limited) {\n            this._computed = computed;\n            this._limited = limited;\n            this._onDidChange.fire();\n        }\n    }\n}\nregisterEditorContribution(ColorDetector.ID, ColorDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport function getColors(colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled = true) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _findColorData(new ColorDataCollector(), colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled);\n    });\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nclass ColorDataCollector {\n    constructor() { }\n    compute(provider, model, token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideDocumentColors(model, token);\n            if (Array.isArray(documentColors)) {\n                for (const colorInfo of documentColors) {\n                    colors.push({ colorInfo, provider });\n                }\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nclass ExtColorDataCollector {\n    constructor() { }\n    compute(provider, model, token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideDocumentColors(model, token);\n            if (Array.isArray(documentColors)) {\n                for (const colorInfo of documentColors) {\n                    colors.push({ range: colorInfo.range, color: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha] });\n                }\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nclass ColorPresentationsCollector {\n    constructor(colorInfo) {\n        this.colorInfo = colorInfo;\n    }\n    compute(provider, model, _token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideColorPresentations(model, this.colorInfo, CancellationToken.None);\n            if (Array.isArray(documentColors)) {\n                colors.push(...documentColors);\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nfunction _findColorData(collector, colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let validDocumentColorProviderFound = false;\n        let defaultProvider;\n        const colorData = [];\n        const documentColorProviders = colorProviderRegistry.ordered(model);\n        for (let i = documentColorProviders.length - 1; i >= 0; i--) {\n            const provider = documentColorProviders[i];\n            if (provider instanceof DefaultDocumentColorProvider) {\n                defaultProvider = provider;\n            }\n            else {\n                try {\n                    if (yield collector.compute(provider, model, token, colorData)) {\n                        validDocumentColorProviderFound = true;\n                    }\n                }\n                catch (e) {\n                    onUnexpectedExternalError(e);\n                }\n            }\n        }\n        if (validDocumentColorProviderFound) {\n            return colorData;\n        }\n        if (defaultProvider && isDefaultColorDecoratorsEnabled) {\n            yield collector.compute(defaultProvider, model, token, colorData);\n            return colorData;\n        }\n        return [];\n    });\n}\nfunction _setupColorCommand(accessor, resource) {\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const isDefaultColorDecoratorsEnabled = accessor.get(IConfigurationService).getValue('editor.defaultColorDecorators', { resource });\n    return { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled };\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, resource);\n    return _findColorData(new ExtColorDataCollector(), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, uri);\n    const [red, green, blue, alpha] = color;\n    return _findColorData(new ColorPresentationsCollector({ range: range, color: { red, green, blue, alpha } }), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { EditorWorkerClient } from '../../../browser/services/editorWorkerService.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nexport class DefaultDocumentColorProvider {\n    constructor(modelService, languageConfigurationService) {\n        this._editorWorkerClient = new EditorWorkerClient(modelService, false, 'editorWorkerService', languageConfigurationService);\n    }\n    provideDocumentColors(model, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._editorWorkerClient.computeDefaultDocumentColors(model.uri);\n        });\n    }\n    provideColorPresentations(_model, colorInfo, _token) {\n        const range = colorInfo.range;\n        const colorFromInfo = colorInfo.color;\n        const alpha = colorFromInfo.alpha;\n        const color = new Color(new RGBA(Math.round(255 * colorFromInfo.red), Math.round(255 * colorFromInfo.green), Math.round(255 * colorFromInfo.blue), alpha));\n        const rgb = alpha ? Color.Format.CSS.formatRGB(color) : Color.Format.CSS.formatRGBA(color);\n        const hsl = alpha ? Color.Format.CSS.formatHSL(color) : Color.Format.CSS.formatHSLA(color);\n        const hex = alpha ? Color.Format.CSS.formatHex(color) : Color.Format.CSS.formatHexA(color);\n        const colorPresentations = [];\n        colorPresentations.push({ label: rgb, textEdit: { range: range, text: rgb } });\n        colorPresentations.push({ label: hsl, textEdit: { range: range, text: hsl } });\n        colorPresentations.push({ label: hex, textEdit: { range: range, text: hex } });\n        return colorPresentations;\n    }\n}\nlet DefaultDocumentColorProviderFeature = class DefaultDocumentColorProviderFeature extends Disposable {\n    constructor(_modelService, _languageConfigurationService, _languageFeaturesService) {\n        super();\n        this._register(_languageFeaturesService.colorProvider.register('*', new DefaultDocumentColorProvider(_modelService, _languageConfigurationService)));\n    }\n};\nDefaultDocumentColorProviderFeature = __decorate([\n    __param(0, IModelService),\n    __param(1, ILanguageConfigurationService),\n    __param(2, ILanguageFeaturesService)\n], DefaultDocumentColorProviderFeature);\nregisterEditorFeature(DefaultDocumentColorProviderFeature);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations, getColors } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { Dimension } from '../../../../base/browser/dom.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 2;\n    }\n    computeSync(_anchor, _lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(_anchor, lineDecorations, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield _createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\nexport class StandaloneColorPickerHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n    }\n}\nlet StandaloneColorPickerParticipant = class StandaloneColorPickerParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 2;\n        this._color = null;\n    }\n    createColorHover(defaultColorInfo, defaultColorProvider, colorProviderRegistry) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return null;\n            }\n            const colors = yield getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\n            let foundColorInfo = null;\n            let foundColorProvider = null;\n            for (const colorData of colors) {\n                const colorInfo = colorData.colorInfo;\n                if (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\n                    foundColorInfo = colorInfo;\n                    foundColorProvider = colorData.provider;\n                }\n            }\n            const colorInfo = foundColorInfo !== null && foundColorInfo !== void 0 ? foundColorInfo : defaultColorInfo;\n            const colorProvider = foundColorProvider !== null && foundColorProvider !== void 0 ? foundColorProvider : defaultColorProvider;\n            const foundInEditor = !!foundColorInfo;\n            return { colorHover: yield _createColorHover(this, this._editor.getModel(), colorInfo, colorProvider), foundInEditor: foundInEditor };\n        });\n    }\n    updateEditorModel(colorHoverData) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const colorPickerModel = colorHoverData.model;\n            let range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\n            if (this._color) {\n                yield _updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\n                range = _updateEditorModel(this._editor, range, colorPickerModel);\n            }\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n    set color(color) {\n        this._color = color;\n    }\n    get color() {\n        return this._color;\n    }\n};\nStandaloneColorPickerParticipant = __decorate([\n    __param(1, IThemeService)\n], StandaloneColorPickerParticipant);\nexport { StandaloneColorPickerParticipant };\nfunction _createColorHover(participant, editorModel, colorInfo, provider) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const originalText = editorModel.getValueInRange(colorInfo.range);\n        const { red, green, blue, alpha } = colorInfo.color;\n        const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n        const color = new Color(rgba);\n        const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n        const model = new ColorPickerModel(color, [], 0);\n        model.colorPresentations = colorPresentations || [];\n        model.guessColorPresentation(color, originalText);\n        if (participant instanceof ColorHoverParticipant) {\n            return new ColorHover(participant, Range.lift(colorInfo.range), model, provider);\n        }\n        else {\n            return new StandaloneColorPickerHover(participant, Range.lift(colorInfo.range), model, provider);\n        }\n    });\n}\nfunction renderHoverParts(participant, editor, themeService, hoverParts, context) {\n    if (hoverParts.length === 0 || !editor.hasModel()) {\n        return Disposable.None;\n    }\n    if (context.setMinimumDimensions) {\n        const minimumHeight = editor.getOption(65 /* EditorOption.lineHeight */) + 8;\n        context.setMinimumDimensions(new Dimension(302, minimumHeight));\n    }\n    const disposables = new DisposableStore();\n    const colorHover = hoverParts[0];\n    const editorModel = editor.getModel();\n    const model = colorHover.model;\n    const widget = disposables.add(new ColorPickerWidget(context.fragment, model, editor.getOption(140 /* EditorOption.pixelRatio */), themeService, participant instanceof StandaloneColorPickerParticipant));\n    context.setColorPicker(widget);\n    let editorUpdatedByColorPicker = false;\n    let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n    if (participant instanceof StandaloneColorPickerParticipant) {\n        const color = hoverParts[0].model.color;\n        participant.color = color;\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n        disposables.add(model.onColorFlushed((color) => {\n            participant.color = color;\n        }));\n    }\n    else {\n        disposables.add(model.onColorFlushed((color) => __awaiter(this, void 0, void 0, function* () {\n            yield _updateColorPresentations(editorModel, model, color, range, colorHover);\n            editorUpdatedByColorPicker = true;\n            range = _updateEditorModel(editor, range, model, context);\n        })));\n    }\n    disposables.add(model.onDidChangeColor((color) => {\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n    }));\n    disposables.add(editor.onDidChangeModelContent((e) => {\n        if (editorUpdatedByColorPicker) {\n            editorUpdatedByColorPicker = false;\n        }\n        else {\n            context.hide();\n            editor.focus();\n        }\n    }));\n    return disposables;\n}\nfunction _updateEditorModel(editor, range, model, context) {\n    let textEdits;\n    let newRange;\n    if (model.presentation.textEdit) {\n        textEdits = [model.presentation.textEdit];\n        newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n        const trackedRange = editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n        newRange = editor.getModel()._getTrackedRange(trackedRange) || newRange;\n    }\n    else {\n        textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n        newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n    }\n    if (model.presentation.additionalTextEdits) {\n        textEdits = [...model.presentation.additionalTextEdits];\n        editor.executeEdits('colorpicker', textEdits);\n        if (context) {\n            context.hide();\n        }\n    }\n    editor.pushUndoStop();\n    return newRange;\n}\nfunction _updateColorPresentations(editorModel, colorPickerModel, color, range, colorHover) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const colorPresentations = yield getColorPresentations(editorModel, {\n            range: range,\n            color: {\n                red: color.rgba.r / 255,\n                green: color.rgba.g / 255,\n                blue: color.rgba.b / 255,\n                alpha: color.rgba.a\n            }\n        }, colorHover.provider, CancellationToken.None);\n        colorPickerModel.colorPresentations = colorPresentations || [];\n    });\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        let presentationIndex = -1;\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                presentationIndex = i;\n                break;\n            }\n        }\n        if (presentationIndex === -1) {\n            // check which color presentation text has same prefix as original text's prefix\n            const originalTextPrefix = originalText.split('(')[0].toLowerCase();\n            for (let i = 0; i < this.colorPresentations.length; i++) {\n                if (this.colorPresentations[i].label.toLowerCase().startsWith(originalTextPrefix)) {\n                    presentationIndex = i;\n                    break;\n                }\n            }\n        }\n        if (presentationIndex !== -1 && presentationIndex !== this.presentationIndex) {\n            this.presentationIndex = presentationIndex;\n            this._onDidChangePresentation.fire(this.presentation);\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService, showingStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.showingStandaloneColorPicker = showingStandaloneColorPicker;\n        this._closeButton = null;\n        this._domNode = $('.colorpicker-header');\n        dom.append(container, this._domNode);\n        this._pickedColorNode = dom.append(this._domNode, $('.picked-color'));\n        dom.append(this._pickedColorNode, $('span.codicon.codicon-color-mode'));\n        this._pickedColorPresentation = dom.append(this._pickedColorNode, document.createElement('span'));\n        this._pickedColorPresentation.classList.add('picked-color-presentation');\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this._pickedColorNode.setAttribute('title', tooltip);\n        this._originalColorNode = dom.append(this._domNode, $('.original-color'));\n        this._originalColorNode.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(themeService.onDidColorThemeChange(theme => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this._pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(this._originalColorNode, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this._pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n        // When the color picker widget is a standalone color picker widget, then add a close button\n        if (this.showingStandaloneColorPicker) {\n            this._domNode.classList.add('standalone-colorpicker');\n            this._closeButton = this._register(new CloseButton(this._domNode));\n        }\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    get closeButton() {\n        return this._closeButton;\n    }\n    get pickedColorNode() {\n        return this._pickedColorNode;\n    }\n    get originalColorNode() {\n        return this._originalColorNode;\n    }\n    onDidChangeColor(color) {\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this._pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this._pickedColorPresentation.textContent = this.model.presentation ? this.model.presentation.label : '';\n    }\n}\nclass CloseButton extends Disposable {\n    constructor(container) {\n        super();\n        this._onClicked = this._register(new Emitter());\n        this.onClicked = this._onClicked.event;\n        this._button = document.createElement('div');\n        this._button.classList.add('close-button');\n        dom.append(container, this._button);\n        const innerDiv = document.createElement('div');\n        innerDiv.classList.add('close-button-inner-div');\n        dom.append(this._button, innerDiv);\n        const closeButton = dom.append(innerDiv, $('.button' + ThemeIcon.asCSSSelector(registerIcon('color-picker-close', Codicon.close, localize('closeIcon', 'Icon to close the color picker')))));\n        closeButton.classList.add('close-icon');\n        this._button.onclick = () => {\n            this._onClicked.fire();\n        };\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio, isStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._insertButton = null;\n        this._domNode = $('.colorpicker-body');\n        dom.append(container, this._domNode);\n        this._saturationBox = new SaturationBox(this._domNode, this.model, this.pixelRatio);\n        this._register(this._saturationBox);\n        this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this._saturationBox.onColorFlushed(this.flushColor, this));\n        this._opacityStrip = new OpacityStrip(this._domNode, this.model, isStandaloneColorPicker);\n        this._register(this._opacityStrip);\n        this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this._opacityStrip.onColorFlushed(this.flushColor, this));\n        this._hueStrip = new HueStrip(this._domNode, this.model, isStandaloneColorPicker);\n        this._register(this._hueStrip);\n        this._register(this._hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this._hueStrip.onColorFlushed(this.flushColor, this));\n        if (isStandaloneColorPicker) {\n            this._insertButton = this._register(new InsertButton(this._domNode));\n            this._domNode.classList.add('standalone-colorpicker');\n        }\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    get saturationBox() {\n        return this._saturationBox;\n    }\n    get opacityStrip() {\n        return this._opacityStrip;\n    }\n    get hueStrip() {\n        return this._hueStrip;\n    }\n    get enterButton() {\n        return this._insertButton;\n    }\n    layout() {\n        this._saturationBox.layout();\n        this._opacityStrip.layout();\n        this._hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._domNode = $('.saturation-wrap');\n        dom.append(container, this._domNode);\n        // Create canvas, draw selected color\n        this._canvas = document.createElement('canvas');\n        this._canvas.className = 'saturation-box';\n        dom.append(this._domNode, this._canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this._domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this._domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this._domNode.offsetWidth;\n        this.height = this._domNode.offsetHeight;\n        this._canvas.width = this.width * this.pixelRatio;\n        this._canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this._canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this._canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this._canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this._canvas.width, this._canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor(color) {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n        const hsva = color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        if (showingStandaloneColorPicker) {\n            this.domNode = dom.append(container, $('.standalone-strip'));\n            this.overlay = dom.append(this.domNode, $('.standalone-overlay'));\n        }\n        else {\n            this.domNode = dom.append(container, $('.strip'));\n            this.overlay = dom.append(this.domNode, $('.overlay'));\n        }\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onDidChangeColor(color) {\n        const value = this.getValue(color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super(container, model, showingStandaloneColorPicker);\n        this.domNode.classList.add('opacity-strip');\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        super.onDidChangeColor(color);\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super(container, model, showingStandaloneColorPicker);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class InsertButton extends Disposable {\n    constructor(container) {\n        super();\n        this._onClicked = this._register(new Emitter());\n        this.onClicked = this._onClicked.event;\n        this._button = dom.append(container, document.createElement('button'));\n        this._button.classList.add('insert-button');\n        this._button.textContent = 'Insert';\n        this._button.onclick = e => {\n            this._onClicked.fire();\n        };\n    }\n    get button() {\n        return this._button;\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService, standaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        this.header = this._register(new ColorPickerHeader(element, this.model, themeService, standaloneColorPicker));\n        this.body = this._register(new ColorPickerBody(element, this.model, this.pixelRatio, standaloneColorPicker));\n    }\n    getId() {\n        return ColorPickerWidget.ID;\n    }\n    layout() {\n        this.body.layout();\n    }\n}\nColorPickerWidget.ID = 'editor.contrib.colorPickerWidget';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ModesHoverController_1;\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\nimport { MarginHoverWidget } from './marginHover.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { HoverParticipantRegistry } from './hoverTypes.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\nimport { InlineSuggestionHintsContentWidget } from '../../inlineCompletions/browser/inlineCompletionsHintsWidget.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport * as nls from '../../../../nls.js';\nimport './hover.css';\n// sticky hover widget which doesn't disappear on focus out and such\nconst _sticky = false;\nlet ModesHoverController = ModesHoverController_1 = class ModesHoverController {\n    getWidgetContent() { var _a; return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getWidgetContent(); }\n    static get(editor) {\n        return editor.getContribution(ModesHoverController_1.ID);\n    }\n    constructor(_editor, _instantiationService, _openerService, _languageService, _keybindingService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._openerService = _openerService;\n        this._languageService = _languageService;\n        this._keybindingService = _keybindingService;\n        this._toUnhook = new DisposableStore();\n        this._hoverActivatedByColorDecoratorClick = false;\n        this._isMouseDown = false;\n        this._hoverClicked = false;\n        this._contentWidget = null;\n        this._glyphWidget = null;\n        this._hookEvents();\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(59 /* EditorOption.hover */)) {\n                this._unhookEvents();\n                this._hookEvents();\n            }\n        });\n    }\n    _hookEvents() {\n        const hideWidgetsEventHandler = () => this._hideWidgets();\n        const hoverOpts = this._editor.getOption(59 /* EditorOption.hover */);\n        this._isHoverEnabled = hoverOpts.enabled;\n        this._isHoverSticky = hoverOpts.sticky;\n        if (this._isHoverEnabled) {\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        else {\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        this._toUnhook.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\n    }\n    _unhookEvents() {\n        this._toUnhook.clear();\n    }\n    _onEditorScrollChanged(e) {\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        var _a;\n        this._isMouseDown = true;\n        const target = mouseEvent.target;\n        if (target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            this._hoverClicked = true;\n            // mouse down on top of content hover widget\n            return;\n        }\n        if (target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse down on top of overlay hover widget\n            return;\n        }\n        if (target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            this._hoverClicked = false;\n        }\n        if (!((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.widget.isResizing)) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._isMouseDown = false;\n    }\n    _onEditorMouseLeave(mouseEvent) {\n        var _a, _b;\n        const targetEm = (mouseEvent.event.browserEvent.relatedTarget);\n        if (((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.widget.isResizing) || ((_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.containsNode(targetEm))) {\n            // When the content widget is resizing\n            // when the mouse is inside hover widget\n            return;\n        }\n        if (!_sticky) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        const target = mouseEvent.target;\n        if (((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isFocused) || ((_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.isResizing)) {\n            return;\n        }\n        if (this._isMouseDown && this._hoverClicked) {\n            return;\n        }\n        if (this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            // mouse moved on top of content hover widget\n            return;\n        }\n        if (this._isHoverSticky && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.containsNode((_d = mouseEvent.event.browserEvent.view) === null || _d === void 0 ? void 0 : _d.document.activeElement)) && !((_f = (_e = mouseEvent.event.browserEvent.view) === null || _e === void 0 ? void 0 : _e.getSelection()) === null || _f === void 0 ? void 0 : _f.isCollapsed)) {\n            // selected text within content hover widget\n            return;\n        }\n        if (!this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID\n            && ((_g = this._contentWidget) === null || _g === void 0 ? void 0 : _g.isColorPickerVisible)) {\n            // though the hover is not sticky, the color picker needs to.\n            return;\n        }\n        if (this._isHoverSticky && target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse moved on top of overlay hover widget\n            return;\n        }\n        if (this._isHoverSticky && ((_h = this._contentWidget) === null || _h === void 0 ? void 0 : _h.isVisibleFromKeyboard)) {\n            // Sticky mode is on and the hover has been shown via keyboard\n            // so moving the mouse has no effect\n            return;\n        }\n        const mouseOnDecorator = (_j = target.element) === null || _j === void 0 ? void 0 : _j.classList.contains('colorpicker-color-decoration');\n        const decoratorActivatedOn = this._editor.getOption(145 /* EditorOption.colorDecoratorsActivatedOn */);\n        if ((mouseOnDecorator && ((decoratorActivatedOn === 'click' && !this._hoverActivatedByColorDecoratorClick) ||\n            (decoratorActivatedOn === 'hover' && !this._isHoverEnabled && !_sticky) ||\n            (decoratorActivatedOn === 'clickAndHover' && !this._isHoverEnabled && !this._hoverActivatedByColorDecoratorClick)))\n            || !mouseOnDecorator && !this._isHoverEnabled && !this._hoverActivatedByColorDecoratorClick) {\n            this._hideWidgets();\n            return;\n        }\n        const contentWidget = this._getOrCreateContentWidget();\n        if (contentWidget.maybeShowAt(mouseEvent)) {\n            (_k = this._glyphWidget) === null || _k === void 0 ? void 0 : _k.hide();\n            return;\n        }\n        if (target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ && target.position) {\n            (_l = this._contentWidget) === null || _l === void 0 ? void 0 : _l.hide();\n            if (!this._glyphWidget) {\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\n            }\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\n            return;\n        }\n        if (_sticky) {\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onKeyDown(e) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const resolvedKeyboardEvent = this._keybindingService.softDispatch(e, this._editor.getDomNode());\n        // If the beginning of a multi-chord keybinding is pressed, or the command aims to focus the hover, set the variable to true, otherwise false\n        const mightTriggerFocus = (resolvedKeyboardEvent.kind === 1 /* ResultKind.MoreChordsNeeded */ || (resolvedKeyboardEvent.kind === 2 /* ResultKind.KbFound */ && resolvedKeyboardEvent.commandId === 'editor.action.showHover' && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isVisible)));\n        if (e.keyCode !== 5 /* KeyCode.Ctrl */ && e.keyCode !== 6 /* KeyCode.Alt */ && e.keyCode !== 57 /* KeyCode.Meta */ && e.keyCode !== 4 /* KeyCode.Shift */\n            && !mightTriggerFocus) {\n            // Do not hide hover when a modifier key is pressed\n            this._hideWidgets();\n        }\n    }\n    _hideWidgets() {\n        var _a, _b, _c;\n        if (_sticky) {\n            return;\n        }\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible)) || InlineSuggestionHintsContentWidget.dropDownVisible) {\n            return;\n        }\n        this._hoverActivatedByColorDecoratorClick = false;\n        this._hoverClicked = false;\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n    }\n    _getOrCreateContentWidget() {\n        if (!this._contentWidget) {\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\n        }\n        return this._contentWidget;\n    }\n    showContentHover(range, mode, source, focus, activatedByColorDecoratorClick = false) {\n        this._hoverActivatedByColorDecoratorClick = activatedByColorDecoratorClick;\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, source, focus);\n    }\n    focus() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    scrollUp() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollUp();\n    }\n    scrollDown() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollDown();\n    }\n    scrollLeft() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollLeft();\n    }\n    scrollRight() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.scrollRight();\n    }\n    pageUp() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.pageUp();\n    }\n    pageDown() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.pageDown();\n    }\n    goToTop() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.goToTop();\n    }\n    goToBottom() {\n        var _a;\n        (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.goToBottom();\n    }\n    get isColorPickerVisible() {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible;\n    }\n    get isHoverVisible() {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isVisible;\n    }\n    dispose() {\n        var _a, _b;\n        this._unhookEvents();\n        this._toUnhook.dispose();\n        this._didChangeConfigurationHandler.dispose();\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n    }\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = ModesHoverController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, IKeybindingService)\n], ModesHoverController);\nexport { ModesHoverController };\nclass ShowOrFocusHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showHover',\n            label: nls.localize({\n                key: 'showOrFocusHover',\n                comment: [\n                    'Label for action that will trigger the showing/focusing of a hover in the editor.',\n                    'If the hover is not visible, it will show the hover.',\n                    'This allows for users to show the hover without using the mouse.',\n                    'If the hover is already visible, it will take focus.'\n                ]\n            }, \"Show or Focus Hover\"),\n            description: {\n                description: `Show or Focus Hover`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'focus': {\n                                    description: 'Controls if when triggered with the keyboard, the hover should take focus immediately.',\n                                    type: 'boolean',\n                                    default: false\n                                }\n                            },\n                        }\n                    }]\n            },\n            alias: 'Show or Focus Hover',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const focus = editor.getOption(2 /* EditorOption.accessibilitySupport */) === 2 /* AccessibilitySupport.Enabled */ || !!(args === null || args === void 0 ? void 0 : args.focus);\n        if (controller.isHoverVisible) {\n            controller.focus();\n        }\n        else {\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, focus);\n        }\n    }\n}\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showDefinitionPreviewHover',\n            label: nls.localize({\n                key: 'showDefinitionPreviewHover',\n                comment: [\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\n                    'This allows for users to show the definition preview hover without using the mouse.'\n                ]\n            }, \"Show Definition Preview Hover\"),\n            alias: 'Show Definition Preview Hover',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        if (!position) {\n            return;\n        }\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n        if (!goto) {\n            return;\n        }\n        const promise = goto.startFindDefinitionFromCursor(position);\n        promise.then(() => {\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, 1 /* HoverStartSource.Keyboard */, true);\n        });\n    }\n}\nclass ScrollUpHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.scrollUpHover',\n            label: nls.localize({\n                key: 'scrollUpHover',\n                comment: [\n                    'Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused.'\n                ]\n            }, \"Scroll Up Hover\"),\n            alias: 'Scroll Up Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 16 /* KeyCode.UpArrow */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.scrollUp();\n    }\n}\nclass ScrollDownHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.scrollDownHover',\n            label: nls.localize({\n                key: 'scrollDownHover',\n                comment: [\n                    'Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused.'\n                ]\n            }, \"Scroll Down Hover\"),\n            alias: 'Scroll Down Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 18 /* KeyCode.DownArrow */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.scrollDown();\n    }\n}\nclass ScrollLeftHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.scrollLeftHover',\n            label: nls.localize({\n                key: 'scrollLeftHover',\n                comment: [\n                    'Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused.'\n                ]\n            }, \"Scroll Left Hover\"),\n            alias: 'Scroll Left Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 15 /* KeyCode.LeftArrow */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.scrollLeft();\n    }\n}\nclass ScrollRightHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.scrollRightHover',\n            label: nls.localize({\n                key: 'scrollRightHover',\n                comment: [\n                    'Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused.'\n                ]\n            }, \"Scroll Right Hover\"),\n            alias: 'Scroll Right Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 17 /* KeyCode.RightArrow */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.scrollRight();\n    }\n}\nclass PageUpHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.pageUpHover',\n            label: nls.localize({\n                key: 'pageUpHover',\n                comment: [\n                    'Action that allows to page up in the hover widget with the page up command when the hover widget is focused.'\n                ]\n            }, \"Page Up Hover\"),\n            alias: 'Page Up Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 11 /* KeyCode.PageUp */,\n                secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.pageUp();\n    }\n}\nclass PageDownHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.pageDownHover',\n            label: nls.localize({\n                key: 'pageDownHover',\n                comment: [\n                    'Action that allows to page down in the hover widget with the page down command when the hover widget is focused.'\n                ]\n            }, \"Page Down Hover\"),\n            alias: 'Page Down Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 12 /* KeyCode.PageDown */,\n                secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.pageDown();\n    }\n}\nclass GoToTopHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToTopHover',\n            label: nls.localize({\n                key: 'goToTopHover',\n                comment: [\n                    'Action that allows to go to the top of the hover widget with the home command when the hover widget is focused.'\n                ]\n            }, \"Go To Top Hover\"),\n            alias: 'Go To Bottom Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 14 /* KeyCode.Home */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.goToTop();\n    }\n}\nclass GoToBottomHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToBottomHover',\n            label: nls.localize({\n                key: 'goToBottomHover',\n                comment: [\n                    'Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused.'\n                ]\n            }, \"Go To Bottom Hover\"),\n            alias: 'Go To Bottom Hover',\n            precondition: EditorContextKeys.hoverFocused,\n            kbOpts: {\n                kbExpr: EditorContextKeys.hoverFocused,\n                primary: 13 /* KeyCode.End */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.goToBottom();\n    }\n}\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowOrFocusHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\nregisterEditorAction(ScrollUpHoverAction);\nregisterEditorAction(ScrollDownHoverAction);\nregisterEditorAction(ScrollLeftHoverAction);\nregisterEditorAction(ScrollRightHoverAction);\nregisterEditorAction(PageUpHoverAction);\nregisterEditorAction(PageDownHoverAction);\nregisterEditorAction(GoToTopHoverAction);\nregisterEditorAction(GoToBottomHoverAction);\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\nHoverParticipantRegistry.register(MarkerHoverParticipant);\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent !== null && keyboardEvent !== void 0 ? keyboardEvent : undefined);\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\n                    .catch((error) => {\n                    onUnexpectedError(error);\n                })\n                    .finally(() => {\n                    this.removeLinkDecorations();\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // For issue: https://github.com/microsoft/vscode/issues/46257\n            // equivalent to mouse move with meta/ctrl key\n            // First find the definition and add decorations\n            // to the editor to be shown with the content hover widget\n            yield this.startFindDefinition(position);\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // Dispose listeners for updating decorations when using keyboard to show definition hover\n            this.toUnhookForKeyboard.clear();\n            // Find word at mouse position\n            const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n            if (!word) {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                return;\n            }\n            // Return early if word at position is still the same\n            if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n                return;\n            }\n            this.currentWordAtPosition = word;\n            // Find definition and decorate word if found\n            const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n            if (this.previousPromise) {\n                this.previousPromise.cancel();\n                this.previousPromise = null;\n            }\n            this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n            let results;\n            try {\n                results = yield this.previousPromise;\n            }\n            catch (error) {\n                onUnexpectedError(error);\n                return;\n            }\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            const linkRange = results[0].originSelectionRange\n                ? Range.lift(results[0].originSelectionRange)\n                : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            // Multiple results\n            if (results.length > 1) {\n                let combinedRange = linkRange;\n                for (const { originSelectionRange } of results) {\n                    if (originSelectionRange) {\n                        combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                    }\n                }\n                this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            else {\n                // Single result\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                    ref.dispose();\n                });\n            }\n        });\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        var _a;\n        return this.editor.hasModel()\n            && mouseEvent.isLeftClick\n            && mouseEvent.isNoneOrSingleMouseDown\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(86 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n        this.toUnhookForKeyboard.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ContentHoverController_1, ContentHoverWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { HoverAction, HoverWidget, getHoverAccessibleViewHint } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ResizableContentWidget } from './resizableContentWidget.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nconst $ = dom.$;\nlet ContentHoverController = ContentHoverController_1 = class ContentHoverController extends Disposable {\n    getWidgetContent() {\n        const node = this._widget.getDomNode();\n        if (!node.textContent) {\n            return undefined;\n        }\n        return node.textContent;\n    }\n    constructor(_editor, _instantiationService, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._currentResult = null;\n        this._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\n        // Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\n        this._participants = [];\n        for (const participant of HoverParticipantRegistry.getAll()) {\n            this._participants.push(this._instantiationService.createInstance(participant, this._editor));\n        }\n        this._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\n        this._computer = new ContentHoverComputer(this._editor, this._participants);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            if (!this._computer.anchor) {\n                // invalid state, ignore result\n                return;\n            }\n            const messages = (result.hasLoadingMessage ? this._addLoadingMessage(result.value) : result.value);\n            this._withResult(new HoverResult(this._computer.anchor, messages, result.isComplete));\n        }));\n        this._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                this.hide();\n            }\n        }));\n        this._register(TokenizationRegistry.onDidChange(() => {\n            if (this._widget.position && this._currentResult) {\n                this._setCurrentResult(this._currentResult); // render again\n            }\n        }));\n    }\n    get widget() {\n        return this._widget;\n    }\n    /**\n     * Returns true if the hover shows now or will show.\n     */\n    maybeShowAt(mouseEvent) {\n        if (this._widget.isResizing) {\n            return true;\n        }\n        const anchorCandidates = [];\n        for (const participant of this._participants) {\n            if (participant.suggestHoverAnchor) {\n                const anchor = participant.suggestHoverAnchor(mouseEvent);\n                if (anchor) {\n                    anchorCandidates.push(anchor);\n                }\n            }\n        }\n        const target = mouseEvent.target;\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            const epsilon = this._editor.getOption(49 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth / 2;\n            if (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n                anchorCandidates.push(new HoverRangeAnchor(0, target.range, mouseEvent.event.posx, mouseEvent.event.posy));\n            }\n        }\n        if (anchorCandidates.length === 0) {\n            return this._startShowingOrUpdateHover(null, 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\n        }\n        anchorCandidates.sort((a, b) => b.priority - a.priority);\n        return this._startShowingOrUpdateHover(anchorCandidates[0], 0 /* HoverStartMode.Delayed */, 0 /* HoverStartSource.Mouse */, false, mouseEvent);\n    }\n    startShowingAtRange(range, mode, source, focus) {\n        this._startShowingOrUpdateHover(new HoverRangeAnchor(0, range, undefined, undefined), mode, source, focus, null);\n    }\n    /**\n     * Returns true if the hover shows now or will show.\n     */\n    _startShowingOrUpdateHover(anchor, mode, source, focus, mouseEvent) {\n        if (!this._widget.position || !this._currentResult) {\n            // The hover is not visible\n            if (anchor) {\n                this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n                return true;\n            }\n            return false;\n        }\n        // The hover is currently visible\n        const hoverIsSticky = this._editor.getOption(59 /* EditorOption.hover */).sticky;\n        const isGettingCloser = (hoverIsSticky && mouseEvent && this._widget.isMouseGettingCloser(mouseEvent.event.posx, mouseEvent.event.posy));\n        if (isGettingCloser) {\n            // The mouse is getting closer to the hover, so we will keep the hover untouched\n            // But we will kick off a hover update at the new anchor, insisting on keeping the hover visible.\n            if (anchor) {\n                this._startHoverOperationIfNecessary(anchor, mode, source, focus, true);\n            }\n            return true;\n        }\n        if (!anchor) {\n            this._setCurrentResult(null);\n            return false;\n        }\n        if (anchor && this._currentResult.anchor.equals(anchor)) {\n            // The widget is currently showing results for the exact same anchor, so no update is needed\n            return true;\n        }\n        if (!anchor.canAdoptVisibleHover(this._currentResult.anchor, this._widget.position)) {\n            // The new anchor is not compatible with the previous anchor\n            this._setCurrentResult(null);\n            this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n            return true;\n        }\n        // We aren't getting any closer to the hover, so we will filter existing results\n        // and keep those which also apply to the new anchor.\n        this._setCurrentResult(this._currentResult.filter(anchor));\n        this._startHoverOperationIfNecessary(anchor, mode, source, focus, false);\n        return true;\n    }\n    _startHoverOperationIfNecessary(anchor, mode, source, focus, insistOnKeepingHoverVisible) {\n        if (this._computer.anchor && this._computer.anchor.equals(anchor)) {\n            // We have to start a hover operation at the exact same anchor as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        this._computer.anchor = anchor;\n        this._computer.shouldFocus = focus;\n        this._computer.source = source;\n        this._computer.insistOnKeepingHoverVisible = insistOnKeepingHoverVisible;\n        this._hoverOperation.start(mode);\n    }\n    _setCurrentResult(hoverResult) {\n        if (this._currentResult === hoverResult) {\n            // avoid updating the DOM to avoid resetting the user selection\n            return;\n        }\n        if (hoverResult && hoverResult.messages.length === 0) {\n            hoverResult = null;\n        }\n        this._currentResult = hoverResult;\n        if (this._currentResult) {\n            this._renderMessages(this._currentResult.anchor, this._currentResult.messages);\n        }\n        else {\n            this._widget.hide();\n        }\n    }\n    hide() {\n        this._computer.anchor = null;\n        this._hoverOperation.cancel();\n        this._setCurrentResult(null);\n    }\n    get isColorPickerVisible() {\n        return this._widget.isColorPickerVisible;\n    }\n    get isVisibleFromKeyboard() {\n        return this._widget.isVisibleFromKeyboard;\n    }\n    get isVisible() {\n        return this._widget.isVisible;\n    }\n    get isFocused() {\n        return this._widget.isFocused;\n    }\n    get isResizing() {\n        return this._widget.isResizing;\n    }\n    containsNode(node) {\n        return (node ? this._widget.getDomNode().contains(node) : false);\n    }\n    _addLoadingMessage(result) {\n        if (this._computer.anchor) {\n            for (const participant of this._participants) {\n                if (participant.createLoadingMessage) {\n                    const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\n                    if (loadingMessage) {\n                        return result.slice(0).concat([loadingMessage]);\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    _withResult(hoverResult) {\n        if (this._widget.position && this._currentResult && this._currentResult.isComplete) {\n            // The hover is visible with a previous complete result.\n            if (!hoverResult.isComplete) {\n                // Instead of rendering the new partial result, we wait for the result to be complete.\n                return;\n            }\n            if (this._computer.insistOnKeepingHoverVisible && hoverResult.messages.length === 0) {\n                // The hover would now hide normally, so we'll keep the previous messages\n                return;\n            }\n        }\n        this._setCurrentResult(hoverResult);\n    }\n    _renderMessages(anchor, messages) {\n        const { showAtPosition, showAtSecondaryPosition, highlightRange } = ContentHoverController_1.computeHoverRanges(this._editor, anchor.range, messages);\n        const disposables = new DisposableStore();\n        const statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\n        const fragment = document.createDocumentFragment();\n        let colorPicker = null;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPicker = widget,\n            onContentsChanged: () => this._widget.onContentsChanged(),\n            setMinimumDimensions: (dimensions) => this._widget.setMinimumDimensions(dimensions),\n            hide: () => this.hide()\n        };\n        for (const participant of this._participants) {\n            const hoverParts = messages.filter(msg => msg.owner === participant);\n            if (hoverParts.length > 0) {\n                disposables.add(participant.renderHoverParts(context, hoverParts));\n            }\n        }\n        const isBeforeContent = messages.some(m => m.isBeforeContent);\n        if (statusBar.hasContent) {\n            fragment.appendChild(statusBar.hoverElement);\n        }\n        if (fragment.hasChildNodes()) {\n            if (highlightRange) {\n                const highlightDecoration = this._editor.createDecorationsCollection();\n                highlightDecoration.set([{\n                        range: highlightRange,\n                        options: ContentHoverController_1._DECORATION_OPTIONS\n                    }]);\n                disposables.add(toDisposable(() => {\n                    highlightDecoration.clear();\n                }));\n            }\n            this._widget.showAt(fragment, new ContentHoverVisibleData(colorPicker, showAtPosition, showAtSecondaryPosition, this._editor.getOption(59 /* EditorOption.hover */).above, this._computer.shouldFocus, this._computer.source, isBeforeContent, anchor.initialMousePosX, anchor.initialMousePosY, disposables));\n        }\n        else {\n            disposables.dispose();\n        }\n    }\n    static computeHoverRanges(editor, anchorRange, messages) {\n        let startColumnBoundary = 1;\n        if (editor.hasModel()) {\n            // Ensure the range is on the current view line\n            const viewModel = editor._getViewModel();\n            const coordinatesConverter = viewModel.coordinatesConverter;\n            const anchorViewRange = coordinatesConverter.convertModelRangeToViewRange(anchorRange);\n            const anchorViewRangeStart = new Position(anchorViewRange.startLineNumber, viewModel.getLineMinColumn(anchorViewRange.startLineNumber));\n            startColumnBoundary = coordinatesConverter.convertViewPositionToModelPosition(anchorViewRangeStart).column;\n        }\n        // The anchor range is always on a single line\n        const anchorLineNumber = anchorRange.startLineNumber;\n        let renderStartColumn = anchorRange.startColumn;\n        let highlightRange = messages[0].range;\n        let forceShowAtRange = null;\n        for (const msg of messages) {\n            highlightRange = Range.plusRange(highlightRange, msg.range);\n            if (msg.range.startLineNumber === anchorLineNumber && msg.range.endLineNumber === anchorLineNumber) {\n                // this message has a range that is completely sitting on the line of the anchor\n                renderStartColumn = Math.max(Math.min(renderStartColumn, msg.range.startColumn), startColumnBoundary);\n            }\n            if (msg.forceShowAtRange) {\n                forceShowAtRange = msg.range;\n            }\n        }\n        return {\n            showAtPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, anchorRange.startColumn),\n            showAtSecondaryPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorLineNumber, renderStartColumn),\n            highlightRange\n        };\n    }\n    focus() {\n        this._widget.focus();\n    }\n    scrollUp() {\n        this._widget.scrollUp();\n    }\n    scrollDown() {\n        this._widget.scrollDown();\n    }\n    scrollLeft() {\n        this._widget.scrollLeft();\n    }\n    scrollRight() {\n        this._widget.scrollRight();\n    }\n    pageUp() {\n        this._widget.pageUp();\n    }\n    pageDown() {\n        this._widget.pageDown();\n    }\n    goToTop() {\n        this._widget.goToTop();\n    }\n    goToBottom() {\n        this._widget.goToBottom();\n    }\n};\nContentHoverController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'content-hover-highlight',\n    className: 'hoverHighlight'\n});\nContentHoverController = ContentHoverController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService)\n], ContentHoverController);\nexport { ContentHoverController };\nclass HoverResult {\n    constructor(anchor, messages, isComplete) {\n        this.anchor = anchor;\n        this.messages = messages;\n        this.isComplete = isComplete;\n    }\n    filter(anchor) {\n        const filteredMessages = this.messages.filter((m) => m.isValidForHoverAnchor(anchor));\n        if (filteredMessages.length === this.messages.length) {\n            return this;\n        }\n        return new FilteredHoverResult(this, this.anchor, filteredMessages, this.isComplete);\n    }\n}\nclass FilteredHoverResult extends HoverResult {\n    constructor(original, anchor, messages, isComplete) {\n        super(anchor, messages, isComplete);\n        this.original = original;\n    }\n    filter(anchor) {\n        return this.original.filter(anchor);\n    }\n}\nclass ContentHoverVisibleData {\n    constructor(colorPicker, showAtPosition, showAtSecondaryPosition, preferAbove, stoleFocus, source, isBeforeContent, initialMousePosX, initialMousePosY, disposables) {\n        this.colorPicker = colorPicker;\n        this.showAtPosition = showAtPosition;\n        this.showAtSecondaryPosition = showAtSecondaryPosition;\n        this.preferAbove = preferAbove;\n        this.stoleFocus = stoleFocus;\n        this.source = source;\n        this.isBeforeContent = isBeforeContent;\n        this.initialMousePosX = initialMousePosX;\n        this.initialMousePosY = initialMousePosY;\n        this.disposables = disposables;\n        this.closestMouseDistance = undefined;\n    }\n}\nconst HORIZONTAL_SCROLLING_BY = 30;\nconst SCROLLBAR_WIDTH = 10;\nconst CONTAINER_HEIGHT_PADDING = 6;\nlet ContentHoverWidget = ContentHoverWidget_1 = class ContentHoverWidget extends ResizableContentWidget {\n    get isColorPickerVisible() {\n        var _a;\n        return Boolean((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker);\n    }\n    get isVisibleFromKeyboard() {\n        var _a;\n        return (((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.source) === 1 /* HoverStartSource.Keyboard */);\n    }\n    get isVisible() {\n        var _a;\n        return (_a = this._hoverVisibleKey.get()) !== null && _a !== void 0 ? _a : false;\n    }\n    get isFocused() {\n        var _a;\n        return (_a = this._hoverFocusedKey.get()) !== null && _a !== void 0 ? _a : false;\n    }\n    constructor(editor, contextKeyService, _configurationService, _accessibilityService, _keybindingService) {\n        const minimumHeight = editor.getOption(65 /* EditorOption.lineHeight */) + 8;\n        const minimumWidth = 150;\n        const minimumSize = new dom.Dimension(minimumWidth, minimumHeight);\n        super(editor, minimumSize);\n        this._configurationService = _configurationService;\n        this._accessibilityService = _accessibilityService;\n        this._keybindingService = _keybindingService;\n        this._hover = this._register(new HoverWidget());\n        this._minimumSize = minimumSize;\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(contextKeyService);\n        this._hoverFocusedKey = EditorContextKeys.hoverFocused.bindTo(contextKeyService);\n        dom.append(this._resizableNode.domNode, this._hover.containerDomNode);\n        this._resizableNode.domNode.style.zIndex = '50';\n        this._register(this._editor.onDidLayoutChange(() => this._layout()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(49 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        const focusTracker = this._register(dom.trackFocus(this._resizableNode.domNode));\n        this._register(focusTracker.onDidFocus(() => {\n            this._hoverFocusedKey.set(true);\n        }));\n        this._register(focusTracker.onDidBlur(() => {\n            this._hoverFocusedKey.set(false);\n        }));\n        this._setHoverData(undefined);\n        this._layout();\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        var _a;\n        super.dispose();\n        (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return ContentHoverWidget_1.ID;\n    }\n    static _applyDimensions(container, width, height) {\n        const transformedWidth = typeof width === 'number' ? `${width}px` : width;\n        const transformedHeight = typeof height === 'number' ? `${height}px` : height;\n        container.style.width = transformedWidth;\n        container.style.height = transformedHeight;\n    }\n    _setContentsDomNodeDimensions(width, height) {\n        const contentsDomNode = this._hover.contentsDomNode;\n        return ContentHoverWidget_1._applyDimensions(contentsDomNode, width, height);\n    }\n    _setContainerDomNodeDimensions(width, height) {\n        const containerDomNode = this._hover.containerDomNode;\n        return ContentHoverWidget_1._applyDimensions(containerDomNode, width, height);\n    }\n    _setHoverWidgetDimensions(width, height) {\n        this._setContentsDomNodeDimensions(width, height);\n        this._setContainerDomNodeDimensions(width, height);\n        this._layoutContentWidget();\n    }\n    static _applyMaxDimensions(container, width, height) {\n        const transformedWidth = typeof width === 'number' ? `${width}px` : width;\n        const transformedHeight = typeof height === 'number' ? `${height}px` : height;\n        container.style.maxWidth = transformedWidth;\n        container.style.maxHeight = transformedHeight;\n    }\n    _setHoverWidgetMaxDimensions(width, height) {\n        ContentHoverWidget_1._applyMaxDimensions(this._hover.contentsDomNode, width, height);\n        ContentHoverWidget_1._applyMaxDimensions(this._hover.containerDomNode, width, height);\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-maxWidth', typeof width === 'number' ? `${width}px` : width);\n        this._layoutContentWidget();\n    }\n    _hasHorizontalScrollbar() {\n        const scrollDimensions = this._hover.scrollbar.getScrollDimensions();\n        const hasHorizontalScrollbar = scrollDimensions.scrollWidth > scrollDimensions.width;\n        return hasHorizontalScrollbar;\n    }\n    _adjustContentsBottomPadding() {\n        const contentsDomNode = this._hover.contentsDomNode;\n        const extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\n        if (contentsDomNode.style.paddingBottom !== extraBottomPadding) {\n            contentsDomNode.style.paddingBottom = extraBottomPadding;\n        }\n    }\n    _setAdjustedHoverWidgetDimensions(size) {\n        this._setHoverWidgetMaxDimensions('none', 'none');\n        const width = size.width;\n        const height = size.height;\n        this._setHoverWidgetDimensions(width, height);\n        // measure if widget has horizontal scrollbar after setting the dimensions\n        if (this._hasHorizontalScrollbar()) {\n            this._adjustContentsBottomPadding();\n            this._setContentsDomNodeDimensions(width, height - SCROLLBAR_WIDTH);\n        }\n    }\n    _updateResizableNodeMaxDimensions() {\n        var _a, _b;\n        const maxRenderingWidth = (_a = this._findMaximumRenderingWidth()) !== null && _a !== void 0 ? _a : Infinity;\n        const maxRenderingHeight = (_b = this._findMaximumRenderingHeight()) !== null && _b !== void 0 ? _b : Infinity;\n        this._resizableNode.maxSize = new dom.Dimension(maxRenderingWidth, maxRenderingHeight);\n        this._setHoverWidgetMaxDimensions(maxRenderingWidth, maxRenderingHeight);\n    }\n    _resize(size) {\n        var _a, _b;\n        ContentHoverWidget_1._lastDimensions = new dom.Dimension(size.width, size.height);\n        this._setAdjustedHoverWidgetDimensions(size);\n        this._resizableNode.layout(size.height, size.width);\n        this._updateResizableNodeMaxDimensions();\n        this._hover.scrollbar.scanDomNode();\n        this._editor.layoutContentWidget(this);\n        (_b = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker) === null || _b === void 0 ? void 0 : _b.layout();\n    }\n    _findAvailableSpaceVertically() {\n        var _a;\n        const position = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition;\n        if (!position) {\n            return;\n        }\n        return this._positionPreference === 1 /* ContentWidgetPositionPreference.ABOVE */ ? this._availableVerticalSpaceAbove(position) : this._availableVerticalSpaceBelow(position);\n    }\n    _findMaximumRenderingHeight() {\n        const availableSpace = this._findAvailableSpaceVertically();\n        if (!availableSpace) {\n            return;\n        }\n        // Padding needed in order to stop the resizing down to a smaller height\n        let maximumHeight = CONTAINER_HEIGHT_PADDING;\n        Array.from(this._hover.contentsDomNode.children).forEach((hoverPart) => {\n            maximumHeight += hoverPart.clientHeight;\n        });\n        if (this._hasHorizontalScrollbar()) {\n            maximumHeight += SCROLLBAR_WIDTH;\n        }\n        return Math.min(availableSpace, maximumHeight);\n    }\n    _isHoverTextOverflowing() {\n        // To find out if the text is overflowing, we will disable wrapping, check the widths, and then re-enable wrapping\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-whiteSpace', 'nowrap');\n        this._hover.containerDomNode.style.setProperty('--vscode-hover-sourceWhiteSpace', 'nowrap');\n        const overflowing = Array.from(this._hover.contentsDomNode.children).some((hoverElement) => {\n            return hoverElement.scrollWidth > hoverElement.clientWidth;\n        });\n        this._hover.containerDomNode.style.removeProperty('--vscode-hover-whiteSpace');\n        this._hover.containerDomNode.style.removeProperty('--vscode-hover-sourceWhiteSpace');\n        return overflowing;\n    }\n    _findMaximumRenderingWidth() {\n        if (!this._editor || !this._editor.hasModel()) {\n            return;\n        }\n        const overflowing = this._isHoverTextOverflowing();\n        const initialWidth = (typeof this._contentWidth === 'undefined'\n            ? 0\n            : this._contentWidth - 2 // - 2 for the borders\n        );\n        if (overflowing || this._hover.containerDomNode.clientWidth < initialWidth) {\n            const bodyBoxWidth = dom.getClientArea(document.body).width;\n            const horizontalPadding = 14;\n            return bodyBoxWidth - horizontalPadding;\n        }\n        else {\n            return this._hover.containerDomNode.clientWidth + 2;\n        }\n    }\n    isMouseGettingCloser(posx, posy) {\n        if (!this._visibleData) {\n            return false;\n        }\n        if (typeof this._visibleData.initialMousePosX === 'undefined' || typeof this._visibleData.initialMousePosY === 'undefined') {\n            this._visibleData.initialMousePosX = posx;\n            this._visibleData.initialMousePosY = posy;\n            return false;\n        }\n        const widgetRect = dom.getDomNodePagePosition(this.getDomNode());\n        if (typeof this._visibleData.closestMouseDistance === 'undefined') {\n            this._visibleData.closestMouseDistance = computeDistanceFromPointToRectangle(this._visibleData.initialMousePosX, this._visibleData.initialMousePosY, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\n        }\n        const distance = computeDistanceFromPointToRectangle(posx, posy, widgetRect.left, widgetRect.top, widgetRect.width, widgetRect.height);\n        if (distance > this._visibleData.closestMouseDistance + 4 /* tolerance of 4 pixels */) {\n            // The mouse is getting farther away\n            return false;\n        }\n        this._visibleData.closestMouseDistance = Math.min(this._visibleData.closestMouseDistance, distance);\n        return true;\n    }\n    _setHoverData(hoverData) {\n        var _a;\n        (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.disposables.dispose();\n        this._visibleData = hoverData;\n        this._hoverVisibleKey.set(!!hoverData);\n        this._hover.containerDomNode.classList.toggle('hidden', !hoverData);\n    }\n    _layout() {\n        const { fontSize, lineHeight } = this._editor.getOption(49 /* EditorOption.fontInfo */);\n        const contentsDomNode = this._hover.contentsDomNode;\n        contentsDomNode.style.fontSize = `${fontSize}px`;\n        contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this._updateMaxDimensions();\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    _updateContent(node) {\n        const contentsDomNode = this._hover.contentsDomNode;\n        contentsDomNode.style.paddingBottom = '';\n        contentsDomNode.textContent = '';\n        contentsDomNode.appendChild(node);\n    }\n    _layoutContentWidget() {\n        this._editor.layoutContentWidget(this);\n        this._hover.onContentsChanged();\n    }\n    _updateMaxDimensions() {\n        const height = Math.max(this._editor.getLayoutInfo().height / 4, 250, ContentHoverWidget_1._lastDimensions.height);\n        const width = Math.max(this._editor.getLayoutInfo().width * 0.66, 500, ContentHoverWidget_1._lastDimensions.width);\n        this._setHoverWidgetMaxDimensions(width, height);\n    }\n    _render(node, hoverData) {\n        this._setHoverData(hoverData);\n        this._updateFont();\n        this._updateContent(node);\n        this._updateMaxDimensions();\n        this.onContentsChanged();\n        // Simply force a synchronous render on the editor\n        // such that the widget does not really render with left = '0px'\n        this._editor.render();\n    }\n    getPosition() {\n        var _a;\n        if (!this._visibleData) {\n            return null;\n        }\n        return {\n            position: this._visibleData.showAtPosition,\n            secondaryPosition: this._visibleData.showAtSecondaryPosition,\n            positionAffinity: this._visibleData.isBeforeContent ? 3 /* PositionAffinity.LeftOfInjectedText */ : undefined,\n            preference: [(_a = this._positionPreference) !== null && _a !== void 0 ? _a : 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    showAt(node, hoverData) {\n        var _a, _b, _c, _d;\n        if (!this._editor || !this._editor.hasModel()) {\n            return;\n        }\n        this._render(node, hoverData);\n        const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\n        const widgetPosition = hoverData.showAtPosition;\n        this._positionPreference = (_a = this._findPositionPreference(widgetHeight, widgetPosition)) !== null && _a !== void 0 ? _a : 1 /* ContentWidgetPositionPreference.ABOVE */;\n        // See https://github.com/microsoft/vscode/issues/140339\n        // TODO: Doing a second layout of the hover after force rendering the editor\n        this.onContentsChanged();\n        if (hoverData.stoleFocus) {\n            this._hover.containerDomNode.focus();\n        }\n        (_b = hoverData.colorPicker) === null || _b === void 0 ? void 0 : _b.layout();\n        // The aria label overrides the label, so if we add to it, add the contents of the hover\n        const accessibleViewHint = getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), (_d = (_c = this._keybindingService.lookupKeybinding('editor.action.accessibleView')) === null || _c === void 0 ? void 0 : _c.getAriaLabel()) !== null && _d !== void 0 ? _d : '');\n        if (accessibleViewHint) {\n            this._hover.contentsDomNode.ariaLabel = this._hover.contentsDomNode.textContent + ', ' + accessibleViewHint;\n        }\n    }\n    hide() {\n        if (!this._visibleData) {\n            return;\n        }\n        const stoleFocus = this._visibleData.stoleFocus || this._hoverFocusedKey.get();\n        this._setHoverData(undefined);\n        this._resizableNode.maxSize = new dom.Dimension(Infinity, Infinity);\n        this._resizableNode.clearSashHoverState();\n        this._hoverFocusedKey.set(false);\n        this._editor.layoutContentWidget(this);\n        if (stoleFocus) {\n            this._editor.focus();\n        }\n    }\n    _removeConstraintsRenderNormally() {\n        // Added because otherwise the initial size of the hover content is smaller than should be\n        const layoutInfo = this._editor.getLayoutInfo();\n        this._resizableNode.layout(layoutInfo.height, layoutInfo.width);\n        this._setHoverWidgetDimensions('auto', 'auto');\n    }\n    _adjustHoverHeightForScrollbar(height) {\n        var _a;\n        const containerDomNode = this._hover.containerDomNode;\n        const contentsDomNode = this._hover.contentsDomNode;\n        const maxRenderingHeight = (_a = this._findMaximumRenderingHeight()) !== null && _a !== void 0 ? _a : Infinity;\n        this._setContainerDomNodeDimensions(dom.getTotalWidth(containerDomNode), Math.min(maxRenderingHeight, height));\n        this._setContentsDomNodeDimensions(dom.getTotalWidth(contentsDomNode), Math.min(maxRenderingHeight, height - SCROLLBAR_WIDTH));\n    }\n    setMinimumDimensions(dimensions) {\n        // We combine the new minimum dimensions with the previous ones\n        this._minimumSize = new dom.Dimension(Math.max(this._minimumSize.width, dimensions.width), Math.max(this._minimumSize.height, dimensions.height));\n        this._updateMinimumWidth();\n    }\n    _updateMinimumWidth() {\n        const width = (typeof this._contentWidth === 'undefined'\n            ? this._minimumSize.width\n            : Math.min(this._contentWidth, this._minimumSize.width));\n        // We want to avoid that the hover is artificially large, so we use the content width as minimum width\n        this._resizableNode.minSize = new dom.Dimension(width, this._minimumSize.height);\n    }\n    onContentsChanged() {\n        var _a;\n        this._removeConstraintsRenderNormally();\n        const containerDomNode = this._hover.containerDomNode;\n        let height = dom.getTotalHeight(containerDomNode);\n        let width = dom.getTotalWidth(containerDomNode);\n        this._resizableNode.layout(height, width);\n        this._setHoverWidgetDimensions(width, height);\n        height = dom.getTotalHeight(containerDomNode);\n        width = dom.getTotalWidth(containerDomNode);\n        this._contentWidth = width;\n        this._updateMinimumWidth();\n        this._resizableNode.layout(height, width);\n        if (this._hasHorizontalScrollbar()) {\n            this._adjustContentsBottomPadding();\n            this._adjustHoverHeightForScrollbar(height);\n        }\n        if ((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition) {\n            const widgetHeight = dom.getTotalHeight(this._hover.containerDomNode);\n            this._positionPreference = this._findPositionPreference(widgetHeight, this._visibleData.showAtPosition);\n        }\n        this._layoutContentWidget();\n    }\n    focus() {\n        this._hover.containerDomNode.focus();\n    }\n    scrollUp() {\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n        const fontInfo = this._editor.getOption(49 /* EditorOption.fontInfo */);\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - fontInfo.lineHeight });\n    }\n    scrollDown() {\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n        const fontInfo = this._editor.getOption(49 /* EditorOption.fontInfo */);\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + fontInfo.lineHeight });\n    }\n    scrollLeft() {\n        const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\n        this._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft - HORIZONTAL_SCROLLING_BY });\n    }\n    scrollRight() {\n        const scrollLeft = this._hover.scrollbar.getScrollPosition().scrollLeft;\n        this._hover.scrollbar.setScrollPosition({ scrollLeft: scrollLeft + HORIZONTAL_SCROLLING_BY });\n    }\n    pageUp() {\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n        const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop - scrollHeight });\n    }\n    pageDown() {\n        const scrollTop = this._hover.scrollbar.getScrollPosition().scrollTop;\n        const scrollHeight = this._hover.scrollbar.getScrollDimensions().height;\n        this._hover.scrollbar.setScrollPosition({ scrollTop: scrollTop + scrollHeight });\n    }\n    goToTop() {\n        this._hover.scrollbar.setScrollPosition({ scrollTop: 0 });\n    }\n    goToBottom() {\n        this._hover.scrollbar.setScrollPosition({ scrollTop: this._hover.scrollbar.getScrollDimensions().scrollHeight });\n    }\n};\nContentHoverWidget.ID = 'editor.contrib.resizableContentHoverWidget';\nContentHoverWidget._lastDimensions = new dom.Dimension(0, 0);\nContentHoverWidget = ContentHoverWidget_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IConfigurationService),\n    __param(3, IAccessibilityService),\n    __param(4, IKeybindingService)\n], ContentHoverWidget);\nexport { ContentHoverWidget };\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\n    get hasContent() {\n        return this._hasContent;\n    }\n    constructor(_keybindingService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._hasContent = false;\n        this.hoverElement = $('div.hover-row.status-bar');\n        this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\n    }\n    addAction(actionOptions) {\n        const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n        this._hasContent = true;\n        return this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\n    }\n    append(element) {\n        const result = dom.append(this.actionsElement, element);\n        this._hasContent = true;\n        return result;\n    }\n};\nEditorHoverStatusBar = __decorate([\n    __param(0, IKeybindingService)\n], EditorHoverStatusBar);\nexport { EditorHoverStatusBar };\nclass ContentHoverComputer {\n    get anchor() { return this._anchor; }\n    set anchor(value) { this._anchor = value; }\n    get shouldFocus() { return this._shouldFocus; }\n    set shouldFocus(value) { this._shouldFocus = value; }\n    get source() { return this._source; }\n    set source(value) { this._source = value; }\n    get insistOnKeepingHoverVisible() { return this._insistOnKeepingHoverVisible; }\n    set insistOnKeepingHoverVisible(value) { this._insistOnKeepingHoverVisible = value; }\n    constructor(_editor, _participants) {\n        this._editor = _editor;\n        this._participants = _participants;\n        this._anchor = null;\n        this._shouldFocus = false;\n        this._source = 0 /* HoverStartSource.Mouse */;\n        this._insistOnKeepingHoverVisible = false;\n    }\n    static _getLineDecorations(editor, anchor) {\n        if (anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\n            return [];\n        }\n        const model = editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        if (lineNumber > model.getLineCount()) {\n            // invalid line\n            return [];\n        }\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        return editor.getLineDecorations(lineNumber).filter((d) => {\n            if (d.options.isWholeLine) {\n                return true;\n            }\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            if (d.options.showIfCollapsed) {\n                // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n                if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n                    return false;\n                }\n            }\n            else {\n                if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n    computeAsync(token) {\n        const anchor = this._anchor;\n        if (!this._editor.hasModel() || !anchor) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n        return AsyncIterableObject.merge(this._participants.map((participant) => {\n            if (!participant.computeAsync) {\n                return AsyncIterableObject.EMPTY;\n            }\n            return participant.computeAsync(anchor, lineDecorations, token);\n        }));\n    }\n    computeSync() {\n        if (!this._editor.hasModel() || !this._anchor) {\n            return [];\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\n        let result = [];\n        for (const participant of this._participants) {\n            result = result.concat(participant.computeSync(this._anchor, lineDecorations));\n        }\n        return coalesce(result);\n    }\n}\nfunction computeDistanceFromPointToRectangle(pointX, pointY, left, top, width, height) {\n    const x = (left + width / 2); // x center of rectangle\n    const y = (top + height / 2); // y center of rectangle\n    const dx = Math.max(Math.abs(pointX - x) - width / 2, 0);\n    const dy = Math.max(Math.abs(pointY - y) - height / 2, 0);\n    return Math.sqrt(dx * dx + dy * dy);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hover.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            actionOptions.run(this.actionContainer);\n        }));\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                e.stopPropagation();\n                e.preventDefault();\n                actionOptions.run(this.actionContainer);\n            }\n        }));\n        this.setEnabled(true);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\nexport function getHoverAccessibleViewHint(shouldHaveHint, keybinding) {\n    return shouldHaveHint && keybinding ? localize('acessibleViewHint', \"Inspect this in the accessible view with {0}.\", keybinding) : shouldHaveHint ? localize('acessibleViewHintNoKbOpen', \"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.\") : '';\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class HoverResult {\n    constructor(value, isComplete, hasLoadingMessage) {\n        this.value = value;\n        this.isComplete = isComplete;\n        this.hasLoadingMessage = hasLoadingMessage;\n    }\n}\n/**\n * Computing the hover is very fine tuned.\n *\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\n *   - if async results already come in, they are not rendered yet.\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\n *   - if there are sync or async results, they are rendered.\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\n */\nexport class HoverOperation extends Disposable {\n    constructor(_editor, _computer) {\n        super();\n        this._editor = _editor;\n        this._computer = _computer;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\n        this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\n        this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\n        this._state = 0 /* HoverOperationState.Idle */;\n        this._asyncIterable = null;\n        this._asyncIterableDone = false;\n        this._result = [];\n    }\n    dispose() {\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        super.dispose();\n    }\n    get _hoverTime() {\n        return this._editor.getOption(59 /* EditorOption.hover */).delay;\n    }\n    get _firstWaitTime() {\n        return this._hoverTime / 2;\n    }\n    get _secondWaitTime() {\n        return this._hoverTime - this._firstWaitTime;\n    }\n    get _loadingMessageTime() {\n        return 3 * this._hoverTime;\n    }\n    _setState(state, fireResult = true) {\n        this._state = state;\n        if (fireResult) {\n            this._fireResult();\n        }\n    }\n    _triggerAsyncComputation() {\n        this._setState(2 /* HoverOperationState.SecondWait */);\n        this._secondWaitScheduler.schedule(this._secondWaitTime);\n        if (this._computer.computeAsync) {\n            this._asyncIterableDone = false;\n            this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\n            (() => __awaiter(this, void 0, void 0, function* () {\n                var _a, e_1, _b, _c;\n                try {\n                    try {\n                        for (var _d = true, _e = __asyncValues(this._asyncIterable), _f; _f = yield _e.next(), _a = _f.done, !_a; _d = true) {\n                            _c = _f.value;\n                            _d = false;\n                            const item = _c;\n                            if (item) {\n                                this._result.push(item);\n                                this._fireResult();\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (!_d && !_a && (_b = _e.return)) yield _b.call(_e);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    this._asyncIterableDone = true;\n                    if (this._state === 3 /* HoverOperationState.WaitingForAsync */ || this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */) {\n                        this._setState(0 /* HoverOperationState.Idle */);\n                    }\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                }\n            }))();\n        }\n        else {\n            this._asyncIterableDone = true;\n        }\n    }\n    _triggerSyncComputation() {\n        if (this._computer.computeSync) {\n            this._result = this._result.concat(this._computer.computeSync());\n        }\n        this._setState(this._asyncIterableDone ? 0 /* HoverOperationState.Idle */ : 3 /* HoverOperationState.WaitingForAsync */);\n    }\n    _triggerLoadingMessage() {\n        if (this._state === 3 /* HoverOperationState.WaitingForAsync */) {\n            this._setState(4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        }\n    }\n    _fireResult() {\n        if (this._state === 1 /* HoverOperationState.FirstWait */ || this._state === 2 /* HoverOperationState.SecondWait */) {\n            // Do not send out results before the hover time\n            return;\n        }\n        const isComplete = (this._state === 0 /* HoverOperationState.Idle */);\n        const hasLoadingMessage = (this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\n    }\n    start(mode) {\n        if (mode === 0 /* HoverStartMode.Delayed */) {\n            if (this._state === 0 /* HoverOperationState.Idle */) {\n                this._setState(1 /* HoverOperationState.FirstWait */);\n                this._firstWaitScheduler.schedule(this._firstWaitTime);\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime);\n            }\n        }\n        else {\n            switch (this._state) {\n                case 0 /* HoverOperationState.Idle */:\n                    this._triggerAsyncComputation();\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n                case 2 /* HoverOperationState.SecondWait */:\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n            }\n        }\n    }\n    cancel() {\n        this._firstWaitScheduler.cancel();\n        this._secondWaitScheduler.cancel();\n        this._loadingMessageScheduler.cancel();\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        this._result = [];\n        this._setState(0 /* HoverOperationState.Idle */, false);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HoverRangeAnchor {\n    constructor(priority, range, initialMousePosX, initialMousePosY) {\n        this.priority = priority;\n        this.range = range;\n        this.initialMousePosX = initialMousePosX;\n        this.initialMousePosY = initialMousePosY;\n        this.type = 1 /* HoverAnchorType.Range */;\n    }\n    equals(other) {\n        return (other.type === 1 /* HoverAnchorType.Range */ && this.range.equalsRange(other.range));\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 1 /* HoverAnchorType.Range */ && showAtPosition.lineNumber === this.range.startLineNumber);\n    }\n}\nexport class HoverForeignElementAnchor {\n    constructor(priority, owner, range, initialMousePosX, initialMousePosY, supportsMarkerHover) {\n        this.priority = priority;\n        this.owner = owner;\n        this.range = range;\n        this.initialMousePosX = initialMousePosX;\n        this.initialMousePosY = initialMousePosY;\n        this.supportsMarkerHover = supportsMarkerHover;\n        this.type = 2 /* HoverAnchorType.ForeignElement */;\n    }\n    equals(other) {\n        return (other.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === other.owner);\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === lastAnchor.owner);\n    }\n}\nexport const HoverParticipantRegistry = (new class HoverParticipantRegistry {\n    constructor() {\n        this._participants = [];\n    }\n    register(ctor) {\n        this._participants.push(ctor);\n    }\n    getAll() {\n        return this._participants;\n    }\n}());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as dom from '../../../../base/browser/dom.js';\nconst TOP_HEIGHT = 30;\nconst BOTTOM_HEIGHT = 24;\nexport class ResizableContentWidget extends Disposable {\n    constructor(_editor, minimumSize = new dom.Dimension(10, 10)) {\n        super();\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._resizableNode = this._register(new ResizableHTMLElement());\n        this._contentPosition = null;\n        this._isResizing = false;\n        this._resizableNode.domNode.style.position = 'absolute';\n        this._resizableNode.minSize = dom.Dimension.lift(minimumSize);\n        this._resizableNode.layout(minimumSize.height, minimumSize.width);\n        this._resizableNode.enableSashes(true, true, true, true);\n        this._register(this._resizableNode.onDidResize(e => {\n            this._resize(new dom.Dimension(e.dimension.width, e.dimension.height));\n            if (e.done) {\n                this._isResizing = false;\n            }\n        }));\n        this._register(this._resizableNode.onDidWillResize(() => {\n            this._isResizing = true;\n        }));\n    }\n    get isResizing() {\n        return this._isResizing;\n    }\n    getDomNode() {\n        return this._resizableNode.domNode;\n    }\n    getPosition() {\n        return this._contentPosition;\n    }\n    get position() {\n        var _a;\n        return ((_a = this._contentPosition) === null || _a === void 0 ? void 0 : _a.position) ? Position.lift(this._contentPosition.position) : undefined;\n    }\n    _availableVerticalSpaceAbove(position) {\n        const editorDomNode = this._editor.getDomNode();\n        const mouseBox = this._editor.getScrolledVisiblePosition(position);\n        if (!editorDomNode || !mouseBox) {\n            return;\n        }\n        const editorBox = dom.getDomNodePagePosition(editorDomNode);\n        return editorBox.top + mouseBox.top - TOP_HEIGHT;\n    }\n    _availableVerticalSpaceBelow(position) {\n        const editorDomNode = this._editor.getDomNode();\n        const mouseBox = this._editor.getScrolledVisiblePosition(position);\n        if (!editorDomNode || !mouseBox) {\n            return;\n        }\n        const editorBox = dom.getDomNodePagePosition(editorDomNode);\n        const bodyBox = dom.getClientArea(document.body);\n        const mouseBottom = editorBox.top + mouseBox.top + mouseBox.height;\n        return bodyBox.height - mouseBottom - BOTTOM_HEIGHT;\n    }\n    _findPositionPreference(widgetHeight, showAtPosition) {\n        var _a, _b;\n        const maxHeightBelow = Math.min((_a = this._availableVerticalSpaceBelow(showAtPosition)) !== null && _a !== void 0 ? _a : Infinity, widgetHeight);\n        const maxHeightAbove = Math.min((_b = this._availableVerticalSpaceAbove(showAtPosition)) !== null && _b !== void 0 ? _b : Infinity, widgetHeight);\n        const maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow), widgetHeight);\n        const height = Math.min(widgetHeight, maxHeight);\n        let renderingAbove;\n        if (this._editor.getOption(59 /* EditorOption.hover */).above) {\n            renderingAbove = height <= maxHeightAbove ? 1 /* ContentWidgetPositionPreference.ABOVE */ : 2 /* ContentWidgetPositionPreference.BELOW */;\n        }\n        else {\n            renderingAbove = height <= maxHeightBelow ? 2 /* ContentWidgetPositionPreference.BELOW */ : 1 /* ContentWidgetPositionPreference.ABOVE */;\n        }\n        if (renderingAbove === 1 /* ContentWidgetPositionPreference.ABOVE */) {\n            this._resizableNode.enableSashes(true, true, false, false);\n        }\n        else {\n            this._resizableNode.enableSashes(false, true, true, false);\n        }\n        return renderingAbove;\n    }\n    _resize(dimension) {\n        this._resizableNode.layout(dimension.height, dimension.width);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nconst $ = dom.$;\nexport class MarginHoverWidget extends Disposable {\n    constructor(editor, languageService, openerService) {\n        super();\n        this._renderDisposeables = this._register(new DisposableStore());\n        this._editor = editor;\n        this._isVisible = false;\n        this._messages = [];\n        this._hover = this._register(new HoverWidget());\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        this._markdownRenderer = this._register(new MarkdownRenderer({ editor: this._editor }, languageService, openerService));\n        this._computer = new MarginHoverComputer(this._editor);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(49 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return MarginHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        return null;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    _onModelDecorationsChanged() {\n        if (this._isVisible) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n        }\n    }\n    startShowingAt(lineNumber) {\n        if (this._computer.lineNumber === lineNumber) {\n            // We have to show the widget at the exact same line number as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        this.hide();\n        this._computer.lineNumber = lineNumber;\n        this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n    }\n    hide() {\n        this._computer.lineNumber = -1;\n        this._hoverOperation.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n    }\n    _withResult(result) {\n        this._messages = result;\n        if (this._messages.length > 0) {\n            this._renderMessages(this._computer.lineNumber, this._messages);\n        }\n        else {\n            this.hide();\n        }\n    }\n    _renderMessages(lineNumber, messages) {\n        this._renderDisposeables.clear();\n        const fragment = document.createDocumentFragment();\n        for (const msg of messages) {\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\n            hoverContentsElement.appendChild(renderedContents.element);\n            fragment.appendChild(markdownHoverElement);\n        }\n        this._updateContents(fragment);\n        this._showAt(lineNumber);\n    }\n    _updateContents(node) {\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._updateFont();\n    }\n    _showAt(lineNumber) {\n        if (!this._isVisible) {\n            this._isVisible = true;\n            this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        }\n        const editorLayout = this._editor.getLayoutInfo();\n        const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\n        const editorScrollTop = this._editor.getScrollTop();\n        const lineHeight = this._editor.getOption(65 /* EditorOption.lineHeight */);\n        const nodeHeight = this._hover.containerDomNode.clientHeight;\n        const top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\n        this._hover.containerDomNode.style.left = `${editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth}px`;\n        this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\n    }\n}\nMarginHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\nclass MarginHoverComputer {\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    set lineNumber(value) {\n        this._lineNumber = value;\n    }\n    constructor(_editor) {\n        this._editor = _editor;\n        this._lineNumber = -1;\n    }\n    computeSync() {\n        const toHoverMessage = (contents) => {\n            return {\n                value: contents\n            };\n        };\n        const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n        const result = [];\n        if (!lineDecorations) {\n            return result;\n        }\n        for (const d of lineDecorations) {\n            if (!d.options.glyphMarginClassName) {\n                continue;\n            }\n            const hoverMessage = d.options.glyphMarginHoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            result.push(...asArray(hoverMessage).map(toHoverMessage));\n        }\n        return result;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { getHover } from './getHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkdownHover {\n    constructor(owner, range, contents, isBeforeContent, ordinal) {\n        this.owner = owner;\n        this.range = range;\n        this.contents = contents;\n        this.isBeforeContent = isBeforeContent;\n        this.ordinal = ordinal;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n    constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 3;\n    }\n    createLoadingMessage(anchor) {\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], false, 2000);\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        let index = 1000;\n        const lineLength = model.getLineLength(lineNumber);\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n        const stopRenderingLineAfter = this._editor.getOption(115 /* EditorOption.stopRenderingLineAfter */);\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: languageId\n        });\n        let stopRenderingMessage = false;\n        if (stopRenderingLineAfter >= 0 && lineLength > stopRenderingLineAfter && anchor.range.startColumn >= stopRenderingLineAfter) {\n            stopRenderingMessage = true;\n            result.push(new MarkdownHover(this, anchor.range, [{\n                    value: nls.localize('stopped rendering', \"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.\")\n                }], false, index++));\n        }\n        if (!stopRenderingMessage && typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n            result.push(new MarkdownHover(this, anchor.range, [{\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n                }], false, index++));\n        }\n        let isBeforeContent = false;\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const hoverMessage = d.options.hoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            if (d.options.beforeContentClassName) {\n                isBeforeContent = true;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage), isBeforeContent, index++));\n        }\n        return result;\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const model = this._editor.getModel();\n        if (!this._languageFeaturesService.hoverProvider.has(model)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const position = new Position(anchor.range.startLineNumber, anchor.range.startColumn);\n        return getHover(this._languageFeaturesService.hoverProvider, model, position, token)\n            .filter(item => !isEmptyMarkdownString(item.hover.contents))\n            .map(item => {\n            const rng = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\n            return new MarkdownHover(this, rng, item.hover.contents, false, item.ordinal);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nMarkdownHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };\nexport function renderMarkdownHovers(context, hoverParts, editor, languageService, openerService) {\n    // Sort hover parts to keep them stable since they might come in async, out-of-order\n    hoverParts.sort((a, b) => a.ordinal - b.ordinal);\n    const disposables = new DisposableStore();\n    for (const hoverPart of hoverParts) {\n        for (const contents of hoverPart.contents) {\n            if (isEmptyMarkdownString(contents)) {\n                continue;\n            }\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderer = disposables.add(new MarkdownRenderer({ editor }, languageService, openerService));\n            disposables.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const renderedContents = disposables.add(renderer.render(contents));\n            hoverContentsElement.appendChild(renderedContents.element);\n            context.fragment.appendChild(markdownHoverElement);\n        }\n    }\n    return disposables;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class HoverProviderResult {\n    constructor(provider, hover, ordinal) {\n        this.provider = provider;\n        this.hover = hover;\n        this.ordinal = ordinal;\n    }\n}\nfunction executeProvider(provider, ordinal, model, position, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const result = yield Promise.resolve(provider.provideHover(model, position, token));\n            if (result && isValid(result)) {\n                return new HoverProviderResult(provider, result, ordinal);\n            }\n        }\n        catch (err) {\n            onUnexpectedExternalError(err);\n        }\n        return undefined;\n    });\n}\nexport function getHover(registry, model, position, token) {\n    const providers = registry.ordered(model);\n    const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\n    return AsyncIterableObject.fromPromises(promises).coalesce();\n}\nexport function getHoverPromise(registry, model, position, token) {\n    return getHover(registry, model, position, token).map(item => item.hover).toPromise();\n}\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getHoverPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\n});\nfunction isValid(result) {\n    const hasRange = (typeof result.range !== 'undefined');\n    const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\n    return hasRange && hasHtmlContent;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions, quickFixCommandId } from '../../codeAction/browser/codeAction.js';\nimport { CodeActionController } from '../../codeAction/browser/codeActionController.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../../codeAction/common/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nconst $ = dom.$;\nexport class MarkerHover {\n    constructor(owner, range, marker) {\n        this.owner = owner;\n        this.range = range;\n        this.marker = marker;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nconst markerCodeActionTrigger = {\n    type: 1 /* CodeActionTriggerType.Invoke */,\n    filter: { include: CodeActionKind.QuickFix },\n    triggerAction: CodeActionTriggerSource.QuickFixHover\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n    constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._openerService = _openerService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 1;\n        this.recentMarkerCodeActionsInfo = undefined;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */ && !anchor.supportsMarkerHover) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\n            if (!marker) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkerHover(this, range, marker));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        if (!hoverParts.length) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n        return disposables;\n    }\n    renderMarkerHover(markerHover, disposables) {\n        const hoverElement = $('div.hover-row');\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n        const { source, message, code, relatedInformation } = markerHover.marker;\n        this._editor.applyFontInfo(markerElement);\n        const messageElement = dom.append(markerElement, $('span'));\n        messageElement.style.whiteSpace = 'pre-wrap';\n        messageElement.innerText = message;\n        if (source || code) {\n            // Code has link\n            if (code && typeof code !== 'string') {\n                const sourceAndCodeElement = $('span');\n                if (source) {\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n                    sourceElement.innerText = source;\n                }\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n                codeLink.setAttribute('href', code.target.toString());\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n                    this._openerService.open(code.target, { allowCommands: true });\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                const codeElement = dom.append(codeLink, $('span'));\n                codeElement.innerText = code.value;\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n            }\n            else {\n                const detailsElement = dom.append(markerElement, $('span'));\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n            }\n        }\n        if (isNonEmptyArray(relatedInformation)) {\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\n                relatedInfoContainer.style.marginTop = '8px';\n                const a = dom.append(relatedInfoContainer, $('a'));\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n                a.style.cursor = 'pointer';\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (this._openerService) {\n                        this._openerService.open(resource, {\n                            fromUserGesture: true,\n                            editorOptions: { selection: { startLineNumber, startColumn } }\n                        }).catch(onUnexpectedError);\n                    }\n                }));\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\n                messageElement.innerText = message;\n                this._editor.applyFontInfo(messageElement);\n            }\n        }\n        return hoverElement;\n    }\n    renderMarkerStatusbar(context, markerHover, disposables) {\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n            context.statusBar.addAction({\n                label: nls.localize('view problem', \"View Problem\"),\n                commandId: NextMarkerAction.ID,\n                run: () => {\n                    var _a;\n                    context.hide();\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\n                    this._editor.focus();\n                }\n            });\n        }\n        if (!this._editor.getOption(89 /* EditorOption.readOnly */)) {\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\n            if (this.recentMarkerCodeActionsInfo) {\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    }\n                }\n                else {\n                    this.recentMarkerCodeActionsInfo = undefined;\n                }\n            }\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n            if (!quickfixPlaceholderElement.textContent) {\n                // Have some content in here to avoid flickering\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n            }\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n            codeActionsPromise.then(actions => {\n                updatePlaceholderDisposable.dispose();\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                    actions.dispose();\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    return;\n                }\n                quickfixPlaceholderElement.style.display = 'none';\n                let showing = false;\n                disposables.add(toDisposable(() => {\n                    if (!showing) {\n                        actions.dispose();\n                    }\n                }));\n                context.statusBar.addAction({\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\n                    commandId: quickFixCommandId,\n                    run: (target) => {\n                        showing = true;\n                        const controller = CodeActionController.get(this._editor);\n                        const elementPosition = dom.getDomNodePagePosition(target);\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\n                        // context menu as well when using keyboard navigation\n                        context.hide();\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\n                            x: elementPosition.left,\n                            y: elementPosition.top,\n                            width: elementPosition.width,\n                            height: elementPosition.height\n                        });\n                    }\n                });\n            }, onUnexpectedError);\n        }\n    }\n    getCodeActions(marker) {\n        return createCancelablePromise(cancellationToken => {\n            return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n        });\n    }\n};\nMarkerHoverParticipant = __decorate([\n    __param(1, IMarkerDecorationsService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageFeaturesService)\n], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar MarkerController_1;\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = MarkerController_1 = class MarkerController {\n    static get(editor) {\n        return editor.getContribution(MarkerController_1.ID);\n    }\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController_1.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController_1.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = MarkerController_1 = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    registerProvider(provider) {\n        const remove = this._provider.unshift(provider);\n        return toDisposable(() => remove());\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MarkerNavigationWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(65 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(49 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = MarkerNavigationWidget_1 = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    focus() {\n        this._parentContainer.focus();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget_1.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = MarkerNavigationWidget_1 = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './media/severityIcon.css';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport Severity from '../../../base/common/severity.js';\nexport var SeverityIcon;\n(function (SeverityIcon) {\n    function className(severity) {\n        switch (severity) {\n            case Severity.Ignore:\n                return 'severity-ignore ' + ThemeIcon.asClassName(Codicon.info);\n            case Severity.Info:\n                return ThemeIcon.asClassName(Codicon.info);\n            case Severity.Warning:\n                return ThemeIcon.asClassName(Codicon.warning);\n            case Severity.Error:\n                return ThemeIcon.asClassName(Codicon.error);\n            default:\n                return '';\n        }\n    }\n    SeverityIcon.className = className;\n})(SeverityIcon || (SeverityIcon = {}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorAction2, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { localize } from '../../../../nls.js';\nimport { StandaloneColorPickerController } from './standaloneColorPickerWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport './colorPicker.css';\nexport class ShowOrFocusStandaloneColorPicker extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.showOrFocusStandaloneColorPicker',\n            title: {\n                value: localize('showOrFocusStandaloneColorPicker', \"Show or Focus Standalone Color Picker\"),\n                mnemonicTitle: localize({ key: 'mishowOrFocusStandaloneColorPicker', comment: ['&& denotes a mnemonic'] }, \"&&Show or Focus Standalone Color Picker\"),\n                original: 'Show or Focus Standalone Color Picker',\n            },\n            precondition: undefined,\n            menu: [\n                { id: MenuId.CommandPalette },\n            ]\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.showOrFocus();\n    }\n}\nclass HideStandaloneColorPicker extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.hideColorPicker',\n            label: localize({\n                key: 'hideColorPicker',\n                comment: [\n                    'Action that hides the color picker'\n                ]\n            }, \"Hide the Color Picker\"),\n            alias: 'Hide the Color Picker',\n            precondition: EditorContextKeys.standaloneColorPickerVisible.isEqualTo(true),\n            kbOpts: {\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n}\nclass InsertColorWithStandaloneColorPicker extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertColorWithStandaloneColorPicker',\n            label: localize({\n                key: 'insertColorWithStandaloneColorPicker',\n                comment: [\n                    'Action that inserts color with standalone color picker'\n                ]\n            }, \"Insert Color with Standalone Color Picker\"),\n            alias: 'Insert Color with Standalone Color Picker',\n            precondition: EditorContextKeys.standaloneColorPickerFocused.isEqualTo(true),\n            kbOpts: {\n                primary: 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.insertColor();\n    }\n}\nregisterEditorAction(HideStandaloneColorPicker);\nregisterEditorAction(InsertColorWithStandaloneColorPicker);\nregisterAction2(ShowOrFocusStandaloneColorPicker);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar StandaloneColorPickerController_1, StandaloneColorPickerWidget_1;\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { StandaloneColorPickerParticipant } from './colorHoverParticipant.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { EditorHoverStatusBar } from '../../hover/browser/contentHover.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport './colorPicker.css';\nlet StandaloneColorPickerController = StandaloneColorPickerController_1 = class StandaloneColorPickerController extends Disposable {\n    constructor(_editor, _contextKeyService, _modelService, _keybindingService, _instantiationService, _languageFeatureService, _languageConfigurationService) {\n        super();\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._keybindingService = _keybindingService;\n        this._instantiationService = _instantiationService;\n        this._languageFeatureService = _languageFeatureService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._standaloneColorPickerWidget = null;\n        this._standaloneColorPickerVisible = EditorContextKeys.standaloneColorPickerVisible.bindTo(_contextKeyService);\n        this._standaloneColorPickerFocused = EditorContextKeys.standaloneColorPickerFocused.bindTo(_contextKeyService);\n    }\n    showOrFocus() {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._standaloneColorPickerVisible.get()) {\n            this._standaloneColorPickerWidget = new StandaloneColorPickerWidget(this._editor, this._standaloneColorPickerVisible, this._standaloneColorPickerFocused, this._instantiationService, this._modelService, this._keybindingService, this._languageFeatureService, this._languageConfigurationService);\n        }\n        else if (!this._standaloneColorPickerFocused.get()) {\n            (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    }\n    hide() {\n        var _a;\n        this._standaloneColorPickerFocused.set(false);\n        this._standaloneColorPickerVisible.set(false);\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.hide();\n        this._editor.focus();\n    }\n    insertColor() {\n        var _a;\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.updateEditor();\n        this.hide();\n    }\n    static get(editor) {\n        return editor.getContribution(StandaloneColorPickerController_1.ID);\n    }\n};\nStandaloneColorPickerController.ID = 'editor.contrib.standaloneColorPickerController';\nStandaloneColorPickerController = StandaloneColorPickerController_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IModelService),\n    __param(3, IKeybindingService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService),\n    __param(6, ILanguageConfigurationService)\n], StandaloneColorPickerController);\nexport { StandaloneColorPickerController };\nregisterEditorContribution(StandaloneColorPickerController.ID, StandaloneColorPickerController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nconst PADDING = 8;\nconst CLOSE_BUTTON_WIDTH = 22;\nlet StandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = class StandaloneColorPickerWidget extends Disposable {\n    constructor(_editor, _standaloneColorPickerVisible, _standaloneColorPickerFocused, _instantiationService, _modelService, _keybindingService, _languageFeaturesService, _languageConfigurationService) {\n        var _a;\n        super();\n        this._editor = _editor;\n        this._standaloneColorPickerVisible = _standaloneColorPickerVisible;\n        this._standaloneColorPickerFocused = _standaloneColorPickerFocused;\n        this._modelService = _modelService;\n        this._keybindingService = _keybindingService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.allowEditorOverflow = true;\n        this._position = undefined;\n        this._body = document.createElement('div');\n        this._colorHover = null;\n        this._selectionSetInEditor = false;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._standaloneColorPickerVisible.set(true);\n        this._standaloneColorPickerParticipant = _instantiationService.createInstance(StandaloneColorPickerParticipant, this._editor);\n        this._position = (_a = this._editor._getViewModel()) === null || _a === void 0 ? void 0 : _a.getPrimaryCursorState().modelState.position;\n        const editorSelection = this._editor.getSelection();\n        const selection = editorSelection ?\n            {\n                startLineNumber: editorSelection.startLineNumber,\n                startColumn: editorSelection.startColumn,\n                endLineNumber: editorSelection.endLineNumber,\n                endColumn: editorSelection.endColumn\n            } : { startLineNumber: 0, endLineNumber: 0, endColumn: 0, startColumn: 0 };\n        const focusTracker = this._register(dom.trackFocus(this._body));\n        this._register(focusTracker.onDidBlur(_ => {\n            this.hide();\n        }));\n        this._register(focusTracker.onDidFocus(_ => {\n            this.focus();\n        }));\n        // When the cursor position changes, hide the color picker\n        this._register(this._editor.onDidChangeCursorPosition(() => {\n            // Do not hide the color picker when the cursor changes position due to the keybindings\n            if (!this._selectionSetInEditor) {\n                this.hide();\n            }\n            else {\n                this._selectionSetInEditor = false;\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => {\n            var _a;\n            const classList = (_a = e.target.element) === null || _a === void 0 ? void 0 : _a.classList;\n            if (classList && classList.contains('colorpicker-color-decoration')) {\n                this.hide();\n            }\n        }));\n        this._register(this.onResult((result) => {\n            this._render(result.value, result.foundInEditor);\n        }));\n        this._start(selection);\n        this._body.style.zIndex = '50';\n        this._editor.addContentWidget(this);\n    }\n    updateEditor() {\n        if (this._colorHover) {\n            this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover);\n        }\n    }\n    getId() {\n        return StandaloneColorPickerWidget_1.ID;\n    }\n    getDomNode() {\n        return this._body;\n    }\n    getPosition() {\n        if (!this._position) {\n            return null;\n        }\n        const positionPreference = this._editor.getOption(59 /* EditorOption.hover */).above;\n        return {\n            position: this._position,\n            secondaryPosition: this._position,\n            preference: positionPreference ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */] : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */],\n            positionAffinity: 2 /* PositionAffinity.None */\n        };\n    }\n    hide() {\n        this.dispose();\n        this._standaloneColorPickerVisible.set(false);\n        this._standaloneColorPickerFocused.set(false);\n        this._editor.removeContentWidget(this);\n        this._editor.focus();\n    }\n    focus() {\n        this._standaloneColorPickerFocused.set(true);\n        this._body.focus();\n    }\n    _start(selection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const computeAsyncResult = yield this._computeAsync(selection);\n            if (!computeAsyncResult) {\n                return;\n            }\n            this._onResult.fire(new StandaloneColorPickerResult(computeAsyncResult.result, computeAsyncResult.foundInEditor));\n        });\n    }\n    _computeAsync(range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            const colorInfo = {\n                range: range,\n                color: { red: 0, green: 0, blue: 0, alpha: 1 }\n            };\n            const colorHoverResult = yield this._standaloneColorPickerParticipant.createColorHover(colorInfo, new DefaultDocumentColorProvider(this._modelService, this._languageConfigurationService), this._languageFeaturesService.colorProvider);\n            if (!colorHoverResult) {\n                return null;\n            }\n            return { result: colorHoverResult.colorHover, foundInEditor: colorHoverResult.foundInEditor };\n        });\n    }\n    _render(colorHover, foundInEditor) {\n        const fragment = document.createDocumentFragment();\n        const statusBar = this._register(new EditorHoverStatusBar(this._keybindingService));\n        let colorPickerWidget;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPickerWidget = widget,\n            onContentsChanged: () => { },\n            hide: () => this.hide()\n        };\n        this._colorHover = colorHover;\n        this._register(this._standaloneColorPickerParticipant.renderHoverParts(context, [colorHover]));\n        if (colorPickerWidget === undefined) {\n            return;\n        }\n        this._body.classList.add('standalone-colorpicker-body');\n        this._body.style.maxHeight = Math.max(this._editor.getLayoutInfo().height / 4, 250) + 'px';\n        this._body.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + 'px';\n        this._body.tabIndex = 0;\n        this._body.appendChild(fragment);\n        colorPickerWidget.layout();\n        const colorPickerBody = colorPickerWidget.body;\n        const saturationBoxWidth = colorPickerBody.saturationBox.domNode.clientWidth;\n        const widthOfOriginalColorBox = colorPickerBody.domNode.clientWidth - saturationBoxWidth - CLOSE_BUTTON_WIDTH - PADDING;\n        const enterButton = colorPickerWidget.body.enterButton;\n        enterButton === null || enterButton === void 0 ? void 0 : enterButton.onClicked(() => {\n            this.updateEditor();\n            this.hide();\n        });\n        const colorPickerHeader = colorPickerWidget.header;\n        const pickedColorNode = colorPickerHeader.pickedColorNode;\n        pickedColorNode.style.width = saturationBoxWidth + PADDING + 'px';\n        const originalColorNode = colorPickerHeader.originalColorNode;\n        originalColorNode.style.width = widthOfOriginalColorBox + 'px';\n        const closeButton = colorPickerWidget.header.closeButton;\n        closeButton === null || closeButton === void 0 ? void 0 : closeButton.onClicked(() => {\n            this.hide();\n        });\n        // When found in the editor, highlight the selection in the editor\n        if (foundInEditor) {\n            if (enterButton) {\n                enterButton.button.textContent = 'Replace';\n            }\n            this._selectionSetInEditor = true;\n            this._editor.setSelection(colorHover.range);\n        }\n        this._editor.layoutContentWidget(this);\n    }\n};\nStandaloneColorPickerWidget.ID = 'editor.contrib.standaloneColorPickerWidget';\nStandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, IModelService),\n    __param(5, IKeybindingService),\n    __param(6, ILanguageFeaturesService),\n    __param(7, ILanguageConfigurationService)\n], StandaloneColorPickerWidget);\nexport { StandaloneColorPickerWidget };\nclass StandaloneColorPickerResult {\n    // The color picker result consists of: an array of color results and a boolean indicating if the color was found in the editor\n    constructor(value, foundInEditor) {\n        this.value = value;\n        this.foundInEditor = foundInEditor;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(22 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(22 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to listen to record cursor state ASAP\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport './dnd.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nfunction hasTriggerModifier(e) {\n    if (isMacintosh) {\n        return e.altKey;\n    }\n    else {\n        return e.ctrlKey;\n    }\n}\nexport class DragAndDropController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(DragAndDropController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._dndDecorationIds = this._editor.createDecorationsCollection();\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n        this._register(this._editor.onMouseDrag((e) => this._onEditorMouseDrag(e)));\n        this._register(this._editor.onMouseDrop((e) => this._onEditorMouseDrop(e)));\n        this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\n        this._register(this._editor.onKeyDown((e) => this.onEditorKeyDown(e)));\n        this._register(this._editor.onKeyUp((e) => this.onEditorKeyUp(e)));\n        this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\n        this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        this._dragSelection = null;\n    }\n    onEditorBlur() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n    }\n    onEditorKeyDown(e) {\n        if (!this._editor.getOption(34 /* EditorOption.dragAndDrop */) || this._editor.getOption(21 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = true;\n        }\n        if (this._mouseDown && hasTriggerModifier(e)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n    }\n    onEditorKeyUp(e) {\n        if (!this._editor.getOption(34 /* EditorOption.dragAndDrop */) || this._editor.getOption(21 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = false;\n        }\n        if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._mouseDown = true;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._mouseDown = false;\n        // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n    }\n    _onEditorMouseDrag(mouseEvent) {\n        const target = mouseEvent.target;\n        if (this._dragSelection === null) {\n            const selections = this._editor.getSelections() || [];\n            const possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\n            if (possibleSelections.length === 1) {\n                this._dragSelection = possibleSelections[0];\n            }\n            else {\n                return;\n            }\n        }\n        if (hasTriggerModifier(mouseEvent.event)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n        else {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n        if (target.position) {\n            if (this._dragSelection.containsPosition(target.position)) {\n                this._removeDecoration();\n            }\n            else {\n                this.showAt(target.position);\n            }\n        }\n    }\n    _onEditorMouseDropCanceled() {\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    _onEditorMouseDrop(mouseEvent) {\n        if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n            const newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n            if (this._dragSelection === null) {\n                let newSelections = null;\n                if (mouseEvent.event.shiftKey) {\n                    const primarySelection = this._editor.getSelection();\n                    if (primarySelection) {\n                        const { selectionStartLineNumber, selectionStartColumn } = primarySelection;\n                        newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\n                    }\n                }\n                else {\n                    newSelections = (this._editor.getSelections() || []).map(selection => {\n                        if (selection.containsPosition(newCursorPosition)) {\n                            return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n                        }\n                        else {\n                            return selection;\n                        }\n                    });\n                }\n                // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\n                this._editor.setSelections(newSelections || [], 'mouse', 3 /* CursorChangeReason.Explicit */);\n            }\n            else if (!this._dragSelection.containsPosition(newCursorPosition) ||\n                ((hasTriggerModifier(mouseEvent.event) ||\n                    this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\n                )) {\n                this._editor.pushUndoStop();\n                this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n                this._editor.pushUndoStop();\n            }\n        }\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    showAt(position) {\n        this._dndDecorationIds.set([{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: DragAndDropController._DECORATION_OPTIONS\n            }]);\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n    }\n    _removeDecoration() {\n        this._dndDecorationIds.clear();\n    }\n    _hitContent(target) {\n        return target.type === 6 /* MouseTargetType.CONTENT_TEXT */ ||\n            target.type === 7 /* MouseTargetType.CONTENT_EMPTY */;\n    }\n    _hitMargin(target) {\n        return target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ ||\n            target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ ||\n            target.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */;\n    }\n    dispose() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        super.dispose();\n    }\n}\nDragAndDropController.ID = 'editor.contrib.dragAndDrop';\nDragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* KeyCode.Alt */ : 5 /* KeyCode.Ctrl */;\nDragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'dnd-target',\n    className: 'dnd-target'\n});\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class DragAndDropCommand {\n    constructor(selection, targetPosition, copy) {\n        this.selection = selection;\n        this.targetPosition = targetPosition;\n        this.copy = copy;\n        this.targetSelection = null;\n    }\n    getEditOperations(model, builder) {\n        const text = model.getValueInRange(this.selection);\n        if (!this.copy) {\n            builder.addEditOperation(this.selection, null);\n        }\n        builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n        if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n        )) {\n            this.targetSelection = this.selection;\n            return;\n        }\n        if (this.copy) {\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n            // Drag the selection downwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n            // Drag the selection upwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        // The target position is at the same line as the selection's end position.\n        if (this.selection.endColumn <= this.targetPosition.column) {\n            // The target position is after the selection's end position\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn :\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column :\n                this.selection.endColumn);\n        }\n        else {\n            // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n        }\n    }\n    computeCursorState(model, helper) {\n        return this.targetSelection;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { CopyPasteController, changePasteTypeCommandId, pasteWidgetVisibleCtx } from './copyPasteController.js';\nimport { DefaultPasteProvidersFeature } from './defaultProviders.js';\nimport * as nls from '../../../../nls.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController, 0 /* EditorContributionInstantiation.Eager */); // eager because it listens to events on the container dom node of the editor\nregisterEditorFeature(DefaultPasteProvidersFeature);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: changePasteTypeCommandId,\n            precondition: pasteWidgetVisibleCtx,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, _args) {\n        var _a;\n        return (_a = CopyPasteController.get(editor)) === null || _a === void 0 ? void 0 : _a.changePasteType();\n    }\n});\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.pasteAs',\n            label: nls.localize('pasteAs', \"Paste As...\"),\n            alias: 'Paste As...',\n            precondition: undefined,\n            description: {\n                description: 'Paste as',\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'id': {\n                                    type: 'string',\n                                    description: nls.localize('pasteAs.id', \"The id of the paste edit to try applying. If not provided, the editor will show a picker.\"),\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        var _a;\n        const id = typeof (args === null || args === void 0 ? void 0 : args.id) === 'string' ? args.id : undefined;\n        return (_a = CopyPasteController.get(editor)) === null || _a === void 0 ? void 0 : _a.pasteAs(id);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar CopyPasteController_1;\nimport { addDisposableListener } from '../../../../base/browser/dom.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { UriList, createStringDataTransferItem, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ClipboardEventUtils } from '../../../browser/controller/textAreaInput.js';\nimport { toExternalVSDataTransfer, toVSDataTransfer } from '../../../browser/dnd.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { createCombinedWorkspaceEdit, sortEditsByYieldTo } from './edit.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { localize } from '../../../../nls.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nexport const changePasteTypeCommandId = 'editor.changePasteType';\nexport const pasteWidgetVisibleCtx = new RawContextKey('pasteWidgetVisible', false, localize('pasteWidgetVisible', \"Whether the paste widget is showing\"));\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = CopyPasteController_1 = class CopyPasteController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CopyPasteController_1.ID);\n    }\n    constructor(editor, instantiationService, _bulkEditService, _clipboardService, _languageFeaturesService, _quickInputService, _progressService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._clipboardService = _clipboardService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._quickInputService = _quickInputService;\n        this._progressService = _progressService;\n        this._editor = editor;\n        const container = editor.getContainerDomNode();\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n        this._pasteProgressManager = this._register(new InlineProgressManager('pasteIntoEditor', editor, instantiationService));\n        this._postPasteWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'pasteIntoEditor', editor, pasteWidgetVisibleCtx, { id: changePasteTypeCommandId, label: localize('postPasteWidgetTitle', \"Show paste options...\") }));\n    }\n    changePasteType() {\n        this._postPasteWidgetManager.tryShowSelector();\n    }\n    pasteAs(preferredId) {\n        this._editor.focus();\n        try {\n            this._pasteAsActionContext = { preferredId };\n            document.execCommand('paste');\n        }\n        finally {\n            this._pasteAsActionContext = undefined;\n        }\n    }\n    clearWidgets() {\n        this._postPasteWidgetManager.clear();\n    }\n    isPasteAsEnabled() {\n        return this._editor.getOption(83 /* EditorOption.pasteAs */).enabled\n            && !this._editor.getOption(89 /* EditorOption.readOnly */);\n    }\n    handleCopy(e) {\n        var _a, _b;\n        if (!this._editor.hasTextFocus()) {\n            return;\n        }\n        if (platform.isWeb) {\n            // Explicitly clear the web resources clipboard.\n            // This is needed because on web, the browser clipboard is faked out using an in-memory store.\n            // This means the resources clipboard is not properly updated when copying from the editor.\n            this._clipboardService.writeResources([]);\n        }\n        if (!e.clipboardData || !this.isPasteAsEnabled()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const selections = this._editor.getSelections();\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\n            return;\n        }\n        const enableEmptySelectionClipboard = this._editor.getOption(36 /* EditorOption.emptySelectionClipboard */);\n        let ranges = selections;\n        const wasFromEmptySelection = selections.length === 1 && selections[0].isEmpty();\n        if (wasFromEmptySelection) {\n            if (!enableEmptySelectionClipboard) {\n                return;\n            }\n            ranges = [new Range(ranges[0].startLineNumber, 1, ranges[0].startLineNumber, 1 + model.getLineLength(ranges[0].startLineNumber))];\n        }\n        const toCopy = (_a = this._editor._getViewModel()) === null || _a === void 0 ? void 0 : _a.getPlainTextToCopy(selections, enableEmptySelectionClipboard, platform.isWindows);\n        const multicursorText = Array.isArray(toCopy) ? toCopy : null;\n        const defaultPastePayload = {\n            multicursorText,\n            pasteOnNewLine: wasFromEmptySelection,\n            mode: null\n        };\n        const providers = this._languageFeaturesService.documentPasteEditProvider\n            .ordered(model)\n            .filter(x => !!x.prepareDocumentPaste);\n        if (!providers.length) {\n            this.setCopyMetadata(e.clipboardData, { defaultPastePayload });\n            return;\n        }\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\n        const providerCopyMimeTypes = providers.flatMap(x => { var _a; return (_a = x.copyMimeTypes) !== null && _a !== void 0 ? _a : []; });\n        // Save off a handle pointing to data that VS Code maintains.\n        const handle = generateUuid();\n        this.setCopyMetadata(e.clipboardData, {\n            id: handle,\n            providerCopyMimeTypes,\n            defaultPastePayload\n        });\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const results = coalesce(yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    return yield provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n                }\n                catch (err) {\n                    console.error(err);\n                    return undefined;\n                }\n            }))));\n            // Values from higher priority providers should overwrite values from lower priority ones.\n            // Reverse the array to so that the calls to `replace` below will do this\n            results.reverse();\n            for (const result of results) {\n                for (const [mime, value] of result) {\n                    dataTransfer.replace(mime, value);\n                }\n            }\n            return dataTransfer;\n        }));\n        (_b = this._currentCopyOperation) === null || _b === void 0 ? void 0 : _b.dataTransferPromise.cancel();\n        this._currentCopyOperation = { handle: handle, dataTransferPromise: promise };\n    }\n    handlePaste(e) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\n                return;\n            }\n            (_a = this._currentPasteOperation) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentPasteOperation = undefined;\n            const model = this._editor.getModel();\n            const selections = this._editor.getSelections();\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !model) {\n                return;\n            }\n            if (!this.isPasteAsEnabled()) {\n                return;\n            }\n            const metadata = this.fetchCopyMetadata(e);\n            const dataTransfer = toExternalVSDataTransfer(e.clipboardData);\n            dataTransfer.delete(vscodeClipboardMime);\n            const allPotentialMimeTypes = [\n                ...e.clipboardData.types,\n                ...(_b = metadata === null || metadata === void 0 ? void 0 : metadata.providerCopyMimeTypes) !== null && _b !== void 0 ? _b : [],\n                // TODO: always adds `uri-list` because this get set if there are resources in the system clipboard.\n                // However we can only check the system clipboard async. For this early check, just add it in.\n                // We filter providers again once we have the final dataTransfer we will use.\n                Mimes.uriList,\n            ];\n            const allProviders = this._languageFeaturesService.documentPasteEditProvider\n                .ordered(model)\n                .filter(provider => { var _a; return (_a = provider.pasteMimeTypes) === null || _a === void 0 ? void 0 : _a.some(type => matchesMimeType(type, allPotentialMimeTypes)); });\n            if (!allProviders.length) {\n                return;\n            }\n            // Prevent the editor's default paste handler from running.\n            // Note that after this point, we are fully responsible for handling paste.\n            // If we can't provider a paste for any reason, we need to explicitly delegate pasting back to the editor.\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            if (this._pasteAsActionContext) {\n                this.showPasteAsPick(this._pasteAsActionContext.preferredId, allProviders, selections, dataTransfer, metadata);\n            }\n            else {\n                this.doPasteInline(allProviders, selections, dataTransfer, metadata);\n            }\n        });\n    }\n    doPasteInline(allProviders, selections, dataTransfer, metadata) {\n        const p = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const editor = this._editor;\n            if (!editor.hasModel()) {\n                return;\n            }\n            const model = editor.getModel();\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */, undefined, token);\n            try {\n                yield this.mergeInDataFromCopy(dataTransfer, metadata, tokenSource.token);\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                // Filter out any providers the don't match the full data transfer we will send them.\n                const supportedProviders = allProviders.filter(provider => isSupportedPasteProvider(provider, dataTransfer));\n                if (!supportedProviders.length\n                    || (supportedProviders.length === 1 && supportedProviders[0].id === 'text') // Only our default text provider is active\n                ) {\n                    yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\n                    return;\n                }\n                const providerEdits = yield this.getPasteEdits(supportedProviders, dataTransfer, model, selections, tokenSource.token);\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                // If the only edit returned is a text edit, use the default paste handler\n                if (providerEdits.length === 1 && providerEdits[0].providerId === 'text') {\n                    yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\n                    return;\n                }\n                if (providerEdits.length) {\n                    const canShowWidget = editor.getOption(83 /* EditorOption.pasteAs */).showPasteSelector === 'afterPaste';\n                    return this._postPasteWidgetManager.applyEditAndShowIfNeeded(selections, { activeEditIndex: 0, allEdits: providerEdits }, canShowWidget, tokenSource.token);\n                }\n                yield this.applyDefaultPasteHandler(dataTransfer, metadata, tokenSource.token);\n            }\n            finally {\n                tokenSource.dispose();\n                if (this._currentPasteOperation === p) {\n                    this._currentPasteOperation = undefined;\n                }\n            }\n        }));\n        this._pasteProgressManager.showWhile(selections[0].getEndPosition(), localize('pasteIntoEditorProgress', \"Running paste handlers. Click to cancel\"), p);\n        this._currentPasteOperation = p;\n    }\n    showPasteAsPick(preferredId, allProviders, selections, dataTransfer, metadata) {\n        const p = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const editor = this._editor;\n            if (!editor.hasModel()) {\n                return;\n            }\n            const model = editor.getModel();\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */, undefined, token);\n            try {\n                yield this.mergeInDataFromCopy(dataTransfer, metadata, tokenSource.token);\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                // Filter out any providers the don't match the full data transfer we will send them.\n                let supportedProviders = allProviders.filter(provider => isSupportedPasteProvider(provider, dataTransfer));\n                if (preferredId) {\n                    // We are looking for a specific edit\n                    supportedProviders = supportedProviders.filter(edit => edit.id === preferredId);\n                }\n                const providerEdits = yield this.getPasteEdits(supportedProviders, dataTransfer, model, selections, tokenSource.token);\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                if (!providerEdits.length) {\n                    return;\n                }\n                let pickedEdit;\n                if (preferredId) {\n                    pickedEdit = providerEdits.at(0);\n                }\n                else {\n                    const selected = yield this._quickInputService.pick(providerEdits.map((edit) => ({\n                        label: edit.label,\n                        description: edit.providerId,\n                        detail: edit.detail,\n                        edit,\n                    })), {\n                        placeHolder: localize('pasteAsPickerPlaceholder', \"Select Paste Action\"),\n                    });\n                    pickedEdit = selected === null || selected === void 0 ? void 0 : selected.edit;\n                }\n                if (!pickedEdit) {\n                    return;\n                }\n                const combinedWorkspaceEdit = createCombinedWorkspaceEdit(model.uri, selections, pickedEdit);\n                yield this._bulkEditService.apply(combinedWorkspaceEdit, { editor: this._editor });\n            }\n            finally {\n                tokenSource.dispose();\n                if (this._currentPasteOperation === p) {\n                    this._currentPasteOperation = undefined;\n                }\n            }\n        }));\n        this._progressService.withProgress({\n            location: 10 /* ProgressLocation.Window */,\n            title: localize('pasteAsProgress', \"Running paste handlers\"),\n        }, () => p);\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    fetchCopyMetadata(e) {\n        var _a;\n        if (!e.clipboardData) {\n            return;\n        }\n        // Prefer using the clipboard data we saved off\n        const rawMetadata = e.clipboardData.getData(vscodeClipboardMime);\n        if (rawMetadata) {\n            try {\n                return JSON.parse(rawMetadata);\n            }\n            catch (_b) {\n                return undefined;\n            }\n        }\n        // Otherwise try to extract the generic text editor metadata\n        const [_, metadata] = ClipboardEventUtils.getTextData(e.clipboardData);\n        if (metadata) {\n            return {\n                defaultPastePayload: {\n                    mode: metadata.mode,\n                    multicursorText: (_a = metadata.multicursorText) !== null && _a !== void 0 ? _a : null,\n                    pasteOnNewLine: !!metadata.isFromEmptySelection,\n                },\n            };\n        }\n        return undefined;\n    }\n    mergeInDataFromCopy(dataTransfer, metadata, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_a = this._currentCopyOperation) === null || _a === void 0 ? void 0 : _a.handle) === metadata.id) {\n                const toMergeDataTransfer = yield this._currentCopyOperation.dataTransferPromise;\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                for (const [key, value] of toMergeDataTransfer) {\n                    dataTransfer.replace(key, value);\n                }\n            }\n            if (!dataTransfer.has(Mimes.uriList)) {\n                const resources = yield this._clipboardService.readResources();\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (resources.length) {\n                    dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n                }\n            }\n        });\n    }\n    getPasteEdits(providers, dataTransfer, model, selections, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const results = yield raceCancellation(Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                try {\n                    const edit = yield ((_a = provider.provideDocumentPasteEdits) === null || _a === void 0 ? void 0 : _a.call(provider, model, selections, dataTransfer, token));\n                    if (edit) {\n                        return Object.assign(Object.assign({}, edit), { providerId: provider.id });\n                    }\n                }\n                catch (err) {\n                    console.error(err);\n                }\n                return undefined;\n            }))), token);\n            const edits = coalesce(results !== null && results !== void 0 ? results : []);\n            sortEditsByYieldTo(edits);\n            return edits;\n        });\n    }\n    applyDefaultPasteHandler(dataTransfer, metadata, token) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            const textDataTransfer = (_a = dataTransfer.get(Mimes.text)) !== null && _a !== void 0 ? _a : dataTransfer.get('text');\n            if (!textDataTransfer) {\n                return;\n            }\n            const text = yield textDataTransfer.asString();\n            if (token.isCancellationRequested) {\n                return;\n            }\n            const payload = {\n                text,\n                pasteOnNewLine: (_b = metadata === null || metadata === void 0 ? void 0 : metadata.defaultPastePayload.pasteOnNewLine) !== null && _b !== void 0 ? _b : false,\n                multicursorText: (_c = metadata === null || metadata === void 0 ? void 0 : metadata.defaultPastePayload.multicursorText) !== null && _c !== void 0 ? _c : null,\n                mode: null,\n            };\n            this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, payload);\n        });\n    }\n};\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\nCopyPasteController = CopyPasteController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IBulkEditService),\n    __param(3, IClipboardService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, IQuickInputService),\n    __param(6, IProgressService)\n], CopyPasteController);\nexport { CopyPasteController };\nfunction isSupportedPasteProvider(provider, dataTransfer) {\n    var _a;\n    return Boolean((_a = provider.pasteMimeTypes) === null || _a === void 0 ? void 0 : _a.some(type => dataTransfer.matches(type)));\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nfunction createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n    DataTransfers.INTERNAL_URI_LIST,\n]);\nexport function toExternalVSDataTransfer(sourceDataTransfer, overwriteUriList = false) {\n    const vsDataTransfer = toVSDataTransfer(sourceDataTransfer);\n    // Try to expose the internal uri-list type as the standard type\n    const uriList = vsDataTransfer.get(DataTransfers.INTERNAL_URI_LIST);\n    if (uriList) {\n        vsDataTransfer.replace(Mimes.uriList, uriList);\n    }\n    else {\n        if (overwriteUriList || !vsDataTransfer.has(Mimes.uriList)) {\n            // Otherwise, fallback to adding dragged resources to the uri list\n            const editorData = [];\n            for (const item of sourceDataTransfer.items) {\n                const file = item.getAsFile();\n                if (file) {\n                    const path = file.path;\n                    try {\n                        if (path) {\n                            editorData.push(URI.file(path).toString());\n                        }\n                        else {\n                            editorData.push(URI.parse(file.name, true).toString());\n                        }\n                    }\n                    catch (_a) {\n                        // Parsing failed. Leave out from list\n                    }\n                }\n            }\n            if (editorData.length) {\n                vsDataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n            }\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        vsDataTransfer.delete(internal);\n    }\n    return vsDataTransfer;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\nexport function createCombinedWorkspaceEdit(uri, ranges, edit) {\n    var _a, _b;\n    return {\n        edits: [\n            ...ranges.map(range => new ResourceTextEdit(uri, typeof edit.insertText === 'string'\n                ? { range, text: edit.insertText, insertAsSnippet: false }\n                : { range, text: edit.insertText.snippet, insertAsSnippet: true })),\n            ...((_b = (_a = edit.additionalEdit) === null || _a === void 0 ? void 0 : _a.edits) !== null && _b !== void 0 ? _b : [])\n        ]\n    };\n}\nexport function sortEditsByYieldTo(edits) {\n    var _a;\n    function yieldsTo(yTo, other) {\n        return ('providerId' in yTo && yTo.providerId === other.providerId)\n            || ('mimeType' in yTo && yTo.mimeType === other.handledMimeType);\n    }\n    // Build list of nodes each node yields to\n    const yieldsToMap = new Map();\n    for (const edit of edits) {\n        for (const yTo of (_a = edit.yieldTo) !== null && _a !== void 0 ? _a : []) {\n            for (const other of edits) {\n                if (other === edit) {\n                    continue;\n                }\n                if (yieldsTo(yTo, other)) {\n                    let arr = yieldsToMap.get(edit);\n                    if (!arr) {\n                        arr = [];\n                        yieldsToMap.set(edit, arr);\n                    }\n                    arr.push(other);\n                }\n            }\n        }\n    }\n    if (!yieldsToMap.size) {\n        return Array.from(edits);\n    }\n    // Topological sort\n    const visited = new Set();\n    const tempStack = [];\n    function visit(nodes) {\n        if (!nodes.length) {\n            return [];\n        }\n        const node = nodes[0];\n        if (tempStack.includes(node)) {\n            console.warn(`Yield to cycle detected for ${node.providerId}`);\n            return nodes;\n        }\n        if (visited.has(node)) {\n            return visit(nodes.slice(1));\n        }\n        let pre = [];\n        const yTo = yieldsToMap.get(node);\n        if (yTo) {\n            tempStack.push(node);\n            pre = visit(yTo);\n            tempStack.pop();\n        }\n        visited.add(node);\n        return [...pre, node, ...visit(nodes.slice(1))];\n    }\n    return visit(Array.from(edits));\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { disposableTimeout } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './inlineProgressWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nconst inlineProgressDecoration = ModelDecorationOptions.register({\n    description: 'inline-progress-widget',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    showIfCollapsed: true,\n    after: {\n        content: noBreakWhitespace,\n        inlineClassName: 'inline-editor-progress-decoration',\n        inlineClassNameAffectsLetterSpacing: true,\n    }\n});\nclass InlineProgressWidget extends Disposable {\n    constructor(typeId, editor, range, title, delegate) {\n        super();\n        this.typeId = typeId;\n        this.editor = editor;\n        this.range = range;\n        this.delegate = delegate;\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this.create(title);\n        this.editor.addContentWidget(this);\n        this.editor.layoutContentWidget(this);\n    }\n    create(title) {\n        this.domNode = dom.$('.inline-progress-widget');\n        this.domNode.role = 'button';\n        this.domNode.title = title;\n        const iconElement = dom.$('span.icon');\n        this.domNode.append(iconElement);\n        iconElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.loading), 'codicon-modifier-spin');\n        const updateSize = () => {\n            const lineHeight = this.editor.getOption(65 /* EditorOption.lineHeight */);\n            this.domNode.style.height = `${lineHeight}px`;\n            this.domNode.style.width = `${Math.ceil(0.8 * lineHeight)}px`;\n        };\n        updateSize();\n        this._register(this.editor.onDidChangeConfiguration(c => {\n            if (c.hasChanged(51 /* EditorOption.fontSize */) || c.hasChanged(65 /* EditorOption.lineHeight */)) {\n                updateSize();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.CLICK, e => {\n            this.delegate.cancel();\n        }));\n    }\n    getId() {\n        return InlineProgressWidget.baseId + '.' + this.typeId;\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return {\n            position: { lineNumber: this.range.startLineNumber, column: this.range.startColumn },\n            preference: [0 /* ContentWidgetPositionPreference.EXACT */]\n        };\n    }\n    dispose() {\n        super.dispose();\n        this.editor.removeContentWidget(this);\n    }\n}\nInlineProgressWidget.baseId = 'editor.widget.inlineProgressWidget';\nlet InlineProgressManager = class InlineProgressManager extends Disposable {\n    constructor(id, _editor, _instantiationService) {\n        super();\n        this.id = id;\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        /** Delay before showing the progress widget */\n        this._showDelay = 500; // ms\n        this._showPromise = this._register(new MutableDisposable());\n        this._currentWidget = new MutableDisposable();\n        this._operationIdPool = 0;\n        this._currentDecorations = _editor.createDecorationsCollection();\n    }\n    showWhile(position, title, promise) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const operationId = this._operationIdPool++;\n            this._currentOperation = operationId;\n            this.clear();\n            this._showPromise.value = disposableTimeout(() => {\n                const range = Range.fromPositions(position);\n                const decorationIds = this._currentDecorations.set([{\n                        range: range,\n                        options: inlineProgressDecoration,\n                    }]);\n                if (decorationIds.length > 0) {\n                    this._currentWidget.value = this._instantiationService.createInstance(InlineProgressWidget, this.id, this._editor, range, title, promise);\n                }\n            }, this._showDelay);\n            try {\n                return yield promise;\n            }\n            finally {\n                if (this._currentOperation === operationId) {\n                    this.clear();\n                    this._currentOperation = undefined;\n                }\n            }\n        });\n    }\n    clear() {\n        this._showPromise.clear();\n        this._currentDecorations.clear();\n        this._currentWidget.clear();\n    }\n};\nInlineProgressManager = __decorate([\n    __param(2, IInstantiationService)\n], InlineProgressManager);\nexport { InlineProgressManager };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar PostEditWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { toAction } from '../../../../base/common/actions.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport './postEditWidget.css';\nimport { IBulkEditService, ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet PostEditWidget = PostEditWidget_1 = class PostEditWidget extends Disposable {\n    constructor(typeId, editor, visibleContext, showCommand, range, edits, onSelectNewEdit, _contextMenuService, contextKeyService, _keybindingService) {\n        super();\n        this.typeId = typeId;\n        this.editor = editor;\n        this.showCommand = showCommand;\n        this.range = range;\n        this.edits = edits;\n        this.onSelectNewEdit = onSelectNewEdit;\n        this._contextMenuService = _contextMenuService;\n        this._keybindingService = _keybindingService;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = true;\n        this.create();\n        this.visibleContext = visibleContext.bindTo(contextKeyService);\n        this.visibleContext.set(true);\n        this._register(toDisposable(() => this.visibleContext.reset()));\n        this.editor.addContentWidget(this);\n        this.editor.layoutContentWidget(this);\n        this._register(toDisposable((() => this.editor.removeContentWidget(this))));\n        this._register(this.editor.onDidChangeCursorPosition(e => {\n            if (!range.containsPosition(e.position)) {\n                this.dispose();\n            }\n        }));\n        this._register(Event.runAndSubscribe(_keybindingService.onDidUpdateKeybindings, () => {\n            this._updateButtonTitle();\n        }));\n    }\n    _updateButtonTitle() {\n        var _a;\n        const binding = (_a = this._keybindingService.lookupKeybinding(this.showCommand.id)) === null || _a === void 0 ? void 0 : _a.getLabel();\n        this.button.element.title = this.showCommand.label + (binding ? ` (${binding})` : '');\n    }\n    create() {\n        this.domNode = dom.$('.post-edit-widget');\n        this.button = this._register(new Button(this.domNode, {\n            supportIcons: true,\n        }));\n        this.button.label = '$(insert)';\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.CLICK, () => this.showSelector()));\n    }\n    getId() {\n        return PostEditWidget_1.baseId + '.' + this.typeId;\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return {\n            position: this.range.getEndPosition(),\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */]\n        };\n    }\n    showSelector() {\n        this._contextMenuService.showContextMenu({\n            getAnchor: () => {\n                const pos = dom.getDomNodePagePosition(this.button.element);\n                return { x: pos.left + pos.width, y: pos.top + pos.height };\n            },\n            getActions: () => {\n                return this.edits.allEdits.map((edit, i) => toAction({\n                    id: '',\n                    label: edit.label,\n                    checked: i === this.edits.activeEditIndex,\n                    run: () => {\n                        if (i !== this.edits.activeEditIndex) {\n                            return this.onSelectNewEdit(i);\n                        }\n                    },\n                }));\n            }\n        });\n    }\n};\nPostEditWidget.baseId = 'editor.widget.postEditWidget';\nPostEditWidget = PostEditWidget_1 = __decorate([\n    __param(7, IContextMenuService),\n    __param(8, IContextKeyService),\n    __param(9, IKeybindingService)\n], PostEditWidget);\nlet PostEditWidgetManager = class PostEditWidgetManager extends Disposable {\n    constructor(_id, _editor, _visibleContext, _showCommand, _instantiationService, _bulkEditService) {\n        super();\n        this._id = _id;\n        this._editor = _editor;\n        this._visibleContext = _visibleContext;\n        this._showCommand = _showCommand;\n        this._instantiationService = _instantiationService;\n        this._bulkEditService = _bulkEditService;\n        this._currentWidget = this._register(new MutableDisposable());\n        this._register(Event.any(_editor.onDidChangeModel, _editor.onDidChangeModelContent)(() => this.clear()));\n    }\n    applyEditAndShowIfNeeded(ranges, edits, canShowWidget, token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model || !ranges.length) {\n                return;\n            }\n            const edit = edits.allEdits[edits.activeEditIndex];\n            if (!edit) {\n                return;\n            }\n            let insertTextEdit = [];\n            if (typeof edit.insertText === 'string' ? edit.insertText === '' : edit.insertText.snippet === '') {\n                insertTextEdit = [];\n            }\n            else {\n                insertTextEdit = ranges.map(range => new ResourceTextEdit(model.uri, typeof edit.insertText === 'string'\n                    ? { range, text: edit.insertText, insertAsSnippet: false }\n                    : { range, text: edit.insertText.snippet, insertAsSnippet: true }));\n            }\n            const allEdits = [\n                ...insertTextEdit,\n                ...((_b = (_a = edit.additionalEdit) === null || _a === void 0 ? void 0 : _a.edits) !== null && _b !== void 0 ? _b : [])\n            ];\n            const combinedWorkspaceEdit = {\n                edits: allEdits\n            };\n            // Use a decoration to track edits around the trigger range\n            const primaryRange = ranges[0];\n            const editTrackingDecoration = model.deltaDecorations([], [{\n                    range: primaryRange,\n                    options: { description: 'paste-line-suffix', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */ }\n                }]);\n            let editResult;\n            let editRange;\n            try {\n                editResult = yield this._bulkEditService.apply(combinedWorkspaceEdit, { editor: this._editor, token });\n                editRange = model.getDecorationRange(editTrackingDecoration[0]);\n            }\n            finally {\n                model.deltaDecorations(editTrackingDecoration, []);\n            }\n            if (canShowWidget && editResult.isApplied && edits.allEdits.length > 1) {\n                this.show(editRange !== null && editRange !== void 0 ? editRange : primaryRange, edits, (newEditIndex) => __awaiter(this, void 0, void 0, function* () {\n                    const model = this._editor.getModel();\n                    if (!model) {\n                        return;\n                    }\n                    yield model.undo();\n                    this.applyEditAndShowIfNeeded(ranges, { activeEditIndex: newEditIndex, allEdits: edits.allEdits }, canShowWidget, token);\n                }));\n            }\n        });\n    }\n    show(range, edits, onDidSelectEdit) {\n        this.clear();\n        if (this._editor.hasModel()) {\n            this._currentWidget.value = this._instantiationService.createInstance(PostEditWidget, this._id, this._editor, this._visibleContext, this._showCommand, range, edits, onDidSelectEdit);\n        }\n    }\n    clear() {\n        this._currentWidget.clear();\n    }\n    tryShowSelector() {\n        var _a;\n        (_a = this._currentWidget.value) === null || _a === void 0 ? void 0 : _a.showSelector();\n    }\n};\nPostEditWidgetManager = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, IBulkEditService)\n], PostEditWidgetManager);\nexport { PostEditWidgetManager };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { UriList } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nconst builtInLabel = localize('builtIn', 'Built-in');\nclass SimplePasteAndDropProvider {\n    provideDocumentPasteEdits(_model, _ranges, dataTransfer, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const edit = yield this.getEdit(dataTransfer, token);\n            return edit ? { insertText: edit.insertText, label: edit.label, detail: edit.detail, handledMimeType: edit.handledMimeType, yieldTo: edit.yieldTo } : undefined;\n        });\n    }\n    provideDocumentOnDropEdits(_model, _position, dataTransfer, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const edit = yield this.getEdit(dataTransfer, token);\n            return edit ? { insertText: edit.insertText, label: edit.label, handledMimeType: edit.handledMimeType, yieldTo: edit.yieldTo } : undefined;\n        });\n    }\n}\nclass DefaultTextProvider extends SimplePasteAndDropProvider {\n    constructor() {\n        super(...arguments);\n        this.id = 'text';\n        this.dropMimeTypes = [Mimes.text];\n        this.pasteMimeTypes = [Mimes.text];\n    }\n    getEdit(dataTransfer, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const textEntry = dataTransfer.get(Mimes.text);\n            if (!textEntry) {\n                return;\n            }\n            // Suppress if there's also a uriList entry.\n            // Typically the uri-list contains the same text as the text entry so showing both is confusing.\n            if (dataTransfer.has(Mimes.uriList)) {\n                return;\n            }\n            const insertText = yield textEntry.asString();\n            return {\n                handledMimeType: Mimes.text,\n                label: localize('text.label', \"Insert Plain Text\"),\n                detail: builtInLabel,\n                insertText\n            };\n        });\n    }\n}\nclass PathProvider extends SimplePasteAndDropProvider {\n    constructor() {\n        super(...arguments);\n        this.id = 'uri';\n        this.dropMimeTypes = [Mimes.uriList];\n        this.pasteMimeTypes = [Mimes.uriList];\n    }\n    getEdit(dataTransfer, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const entries = yield extractUriList(dataTransfer);\n            if (!entries.length || token.isCancellationRequested) {\n                return;\n            }\n            let uriCount = 0;\n            const insertText = entries\n                .map(({ uri, originalText }) => {\n                if (uri.scheme === Schemas.file) {\n                    return uri.fsPath;\n                }\n                else {\n                    uriCount++;\n                    return originalText;\n                }\n            })\n                .join(' ');\n            let label;\n            if (uriCount > 0) {\n                // Dropping at least one generic uri (such as https) so use most generic label\n                label = entries.length > 1\n                    ? localize('defaultDropProvider.uriList.uris', \"Insert Uris\")\n                    : localize('defaultDropProvider.uriList.uri', \"Insert Uri\");\n            }\n            else {\n                // All the paths are file paths\n                label = entries.length > 1\n                    ? localize('defaultDropProvider.uriList.paths', \"Insert Paths\")\n                    : localize('defaultDropProvider.uriList.path', \"Insert Path\");\n            }\n            return {\n                handledMimeType: Mimes.uriList,\n                insertText,\n                label,\n                detail: builtInLabel,\n            };\n        });\n    }\n}\nlet RelativePathProvider = class RelativePathProvider extends SimplePasteAndDropProvider {\n    constructor(_workspaceContextService) {\n        super();\n        this._workspaceContextService = _workspaceContextService;\n        this.id = 'relativePath';\n        this.dropMimeTypes = [Mimes.uriList];\n        this.pasteMimeTypes = [Mimes.uriList];\n    }\n    getEdit(dataTransfer, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const entries = yield extractUriList(dataTransfer);\n            if (!entries.length || token.isCancellationRequested) {\n                return;\n            }\n            const relativeUris = coalesce(entries.map(({ uri }) => {\n                const root = this._workspaceContextService.getWorkspaceFolder(uri);\n                return root ? relativePath(root.uri, uri) : undefined;\n            }));\n            if (!relativeUris.length) {\n                return;\n            }\n            return {\n                handledMimeType: Mimes.uriList,\n                insertText: relativeUris.join(' '),\n                label: entries.length > 1\n                    ? localize('defaultDropProvider.uriList.relativePaths', \"Insert Relative Paths\")\n                    : localize('defaultDropProvider.uriList.relativePath', \"Insert Relative Path\"),\n                detail: builtInLabel,\n            };\n        });\n    }\n};\nRelativePathProvider = __decorate([\n    __param(0, IWorkspaceContextService)\n], RelativePathProvider);\nfunction extractUriList(dataTransfer) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const urlListEntry = dataTransfer.get(Mimes.uriList);\n        if (!urlListEntry) {\n            return [];\n        }\n        const strUriList = yield urlListEntry.asString();\n        const entries = [];\n        for (const entry of UriList.parse(strUriList)) {\n            try {\n                entries.push({ uri: URI.parse(entry), originalText: entry });\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        return entries;\n    });\n}\nlet DefaultDropProvidersFeature = class DefaultDropProvidersFeature extends Disposable {\n    constructor(languageFeaturesService, workspaceContextService) {\n        super();\n        this._register(languageFeaturesService.documentOnDropEditProvider.register('*', new DefaultTextProvider()));\n        this._register(languageFeaturesService.documentOnDropEditProvider.register('*', new PathProvider()));\n        this._register(languageFeaturesService.documentOnDropEditProvider.register('*', new RelativePathProvider(workspaceContextService)));\n    }\n};\nDefaultDropProvidersFeature = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IWorkspaceContextService)\n], DefaultDropProvidersFeature);\nexport { DefaultDropProvidersFeature };\nlet DefaultPasteProvidersFeature = class DefaultPasteProvidersFeature extends Disposable {\n    constructor(languageFeaturesService, workspaceContextService) {\n        super();\n        this._register(languageFeaturesService.documentPasteEditProvider.register('*', new DefaultTextProvider()));\n        this._register(languageFeaturesService.documentPasteEditProvider.register('*', new PathProvider()));\n        this._register(languageFeaturesService.documentPasteEditProvider.register('*', new RelativePathProvider(workspaceContextService)));\n    }\n};\nDefaultPasteProvidersFeature = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IWorkspaceContextService)\n], DefaultPasteProvidersFeature);\nexport { DefaultPasteProvidersFeature };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { DefaultDropProvidersFeature } from './defaultProviders.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions as ConfigurationExtensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { DropIntoEditorController, changeDropTypeCommandId, defaultProviderConfig, dropWidgetVisibleCtx } from './dropIntoEditorController.js';\nregisterEditorContribution(DropIntoEditorController.ID, DropIntoEditorController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: changeDropTypeCommandId,\n            precondition: dropWidgetVisibleCtx,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, _args) {\n        var _a;\n        (_a = DropIntoEditorController.get(editor)) === null || _a === void 0 ? void 0 : _a.changeDropType();\n    }\n});\nregisterEditorFeature(DefaultDropProvidersFeature);\nRegistry.as(ConfigurationExtensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        [defaultProviderConfig]: {\n            type: 'object',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('defaultProviderDescription', \"Configures the default drop provider to use for content of a given mime type.\"),\n            default: {},\n            additionalProperties: {\n                type: 'string',\n            },\n        },\n    } }));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar DropIntoEditorController_1;\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { toExternalVSDataTransfer } from '../../../browser/dnd.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DraggedTreeItemsIdentifier } from '../../../common/services/treeViewsDnd.js';\nimport { ITreeViewsDnDService } from '../../../common/services/treeViewsDndService.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { sortEditsByYieldTo } from './edit.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nexport const defaultProviderConfig = 'editor.experimental.dropIntoEditor.defaultProvider';\nexport const changeDropTypeCommandId = 'editor.changeDropType';\nexport const dropWidgetVisibleCtx = new RawContextKey('dropWidgetVisible', false, localize('dropWidgetVisible', \"Whether the drop widget is showing\"));\nlet DropIntoEditorController = DropIntoEditorController_1 = class DropIntoEditorController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(DropIntoEditorController_1.ID);\n    }\n    constructor(editor, instantiationService, _configService, _languageFeaturesService, _treeViewsDragAndDropService) {\n        super();\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._treeViewsDragAndDropService = _treeViewsDragAndDropService;\n        this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n        this._dropProgressManager = this._register(instantiationService.createInstance(InlineProgressManager, 'dropIntoEditor', editor));\n        this._postDropWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'dropIntoEditor', editor, dropWidgetVisibleCtx, { id: changeDropTypeCommandId, label: localize('postDropWidgetTitle', \"Show drop options...\") }));\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n    }\n    clearWidgets() {\n        this._postDropWidgetManager.clear();\n    }\n    changeDropType() {\n        this._postDropWidgetManager.tryShowSelector();\n    }\n    onDropIntoEditor(editor, position, dragEvent) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer || !editor.hasModel()) {\n                return;\n            }\n            (_a = this._currentOperation) === null || _a === void 0 ? void 0 : _a.cancel();\n            editor.focus();\n            editor.setPosition(position);\n            const p = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */, undefined, token);\n                try {\n                    const ourDataTransfer = yield this.extractDataTransferData(dragEvent);\n                    if (ourDataTransfer.size === 0 || tokenSource.token.isCancellationRequested) {\n                        return;\n                    }\n                    const model = editor.getModel();\n                    if (!model) {\n                        return;\n                    }\n                    const providers = this._languageFeaturesService.documentOnDropEditProvider\n                        .ordered(model)\n                        .filter(provider => {\n                        if (!provider.dropMimeTypes) {\n                            // Keep all providers that don't specify mime types\n                            return true;\n                        }\n                        return provider.dropMimeTypes.some(mime => ourDataTransfer.matches(mime));\n                    });\n                    const edits = yield this.getDropEdits(providers, model, position, ourDataTransfer, tokenSource);\n                    if (tokenSource.token.isCancellationRequested) {\n                        return;\n                    }\n                    if (edits.length) {\n                        const activeEditIndex = this.getInitialActiveEditIndex(model, edits);\n                        const canShowWidget = editor.getOption(35 /* EditorOption.dropIntoEditor */).showDropSelector === 'afterDrop';\n                        // Pass in the parent token here as it tracks cancelling the entire drop operation\n                        yield this._postDropWidgetManager.applyEditAndShowIfNeeded([Range.fromPositions(position)], { activeEditIndex, allEdits: edits }, canShowWidget, token);\n                    }\n                }\n                finally {\n                    tokenSource.dispose();\n                    if (this._currentOperation === p) {\n                        this._currentOperation = undefined;\n                    }\n                }\n            }));\n            this._dropProgressManager.showWhile(position, localize('dropIntoEditorProgress', \"Running drop handlers. Click to cancel\"), p);\n            this._currentOperation = p;\n        });\n    }\n    getDropEdits(providers, model, position, dataTransfer, tokenSource) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const results = yield raceCancellation(Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const edit = yield provider.provideDocumentOnDropEdits(model, position, dataTransfer, tokenSource.token);\n                    if (edit) {\n                        return Object.assign(Object.assign({}, edit), { providerId: provider.id });\n                    }\n                }\n                catch (err) {\n                    console.error(err);\n                }\n                return undefined;\n            }))), tokenSource.token);\n            const edits = coalesce(results !== null && results !== void 0 ? results : []);\n            return sortEditsByYieldTo(edits);\n        });\n    }\n    getInitialActiveEditIndex(model, edits) {\n        const preferredProviders = this._configService.getValue(defaultProviderConfig, { resource: model.uri });\n        for (const [configMime, desiredId] of Object.entries(preferredProviders)) {\n            const editIndex = edits.findIndex(edit => desiredId === edit.providerId\n                && edit.handledMimeType && matchesMimeType(configMime, [edit.handledMimeType]));\n            if (editIndex >= 0) {\n                return editIndex;\n            }\n        }\n        return 0;\n    }\n    extractDataTransferData(dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer) {\n                return new VSDataTransfer();\n            }\n            const dataTransfer = toExternalVSDataTransfer(dragEvent.dataTransfer);\n            if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n                const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n                if (Array.isArray(data)) {\n                    for (const id of data) {\n                        const treeDataTransfer = yield this._treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n                        if (treeDataTransfer) {\n                            for (const [type, value] of treeDataTransfer) {\n                                dataTransfer.replace(type, value);\n                            }\n                        }\n                    }\n                }\n            }\n            return dataTransfer;\n        });\n    }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = DropIntoEditorController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IConfigurationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ITreeViewsDnDService)\n], DropIntoEditorController);\nexport { DropIntoEditorController };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar CommonFindController_1;\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\n    if (!editor.hasModel()) {\n        return null;\n    }\n    const selection = editor.getSelection();\n    // if selection spans multiple lines, default search string to empty\n    if ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\n        || seedSearchStringFromSelection === 'multiple') {\n        if (selection.isEmpty()) {\n            const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n            if (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\n                return wordAtPosition.word;\n            }\n        }\n        else {\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n                return editor.getModel().getValueInRange(selection);\n            }\n        }\n    }\n    return null;\n}\nlet CommonFindController = CommonFindController_1 = class CommonFindController extends Disposable {\n    get editor() {\n        return this._editor;\n    }\n    static get(editor) {\n        return editor.getContribution(CommonFindController_1.ID);\n    }\n    constructor(editor, contextKeyService, storageService, clipboardService) {\n        super();\n        this._editor = editor;\n        this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._clipboardService = clipboardService;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._state = this._register(new FindReplaceState());\n        this.loadQueryState();\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._model = null;\n        this._register(this._editor.onDidChangeModel(() => {\n            const shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n            this.disposeModel();\n            this._state.change({\n                searchScope: null,\n                matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, false),\n                wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, false),\n                isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, false),\n                preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, false)\n            }, false);\n            if (shouldRestartFind) {\n                this._start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: false,\n                    updateSearchScope: false,\n                    loop: this._editor.getOption(40 /* EditorOption.find */).loop\n                });\n            }\n        }));\n    }\n    dispose() {\n        this.disposeModel();\n        super.dispose();\n    }\n    disposeModel() {\n        if (this._model) {\n            this._model.dispose();\n            this._model = null;\n        }\n    }\n    _onStateChanged(e) {\n        this.saveQueryState(e);\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._findWidgetVisible.set(true);\n            }\n            else {\n                this._findWidgetVisible.reset();\n                this.disposeModel();\n            }\n        }\n        if (e.searchString) {\n            this.setGlobalBufferTerm(this._state.searchString);\n        }\n    }\n    saveQueryState(e) {\n        if (e.isRegex) {\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n        }\n        if (e.wholeWord) {\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n        }\n        if (e.matchCase) {\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n        }\n        if (e.preserveCase) {\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n    loadQueryState() {\n        this._state.change({\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, this._state.matchCase),\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, this._state.wholeWord),\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, this._state.isRegex),\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, this._state.preserveCase)\n        }, false);\n    }\n    isFindInputFocused() {\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n    }\n    getState() {\n        return this._state;\n    }\n    closeFindWidget() {\n        this._state.change({\n            isRevealed: false,\n            searchScope: null\n        }, false);\n        this._editor.focus();\n    }\n    toggleCaseSensitive() {\n        this._state.change({ matchCase: !this._state.matchCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleWholeWords() {\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleRegex() {\n        this._state.change({ isRegex: !this._state.isRegex }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    togglePreserveCase() {\n        this._state.change({ preserveCase: !this._state.preserveCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleSearchScope() {\n        if (this._state.searchScope) {\n            this._state.change({ searchScope: null }, true);\n        }\n        else {\n            if (this._editor.hasModel()) {\n                const selections = this._editor.getSelections();\n                selections.map(selection => {\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                    }\n                    if (!selection.isEmpty()) {\n                        return selection;\n                    }\n                    return null;\n                }).filter(element => !!element);\n                if (selections.length) {\n                    this._state.change({ searchScope: selections }, true);\n                }\n            }\n        }\n    }\n    setSearchString(searchString) {\n        if (this._state.isRegex) {\n            searchString = strings.escapeRegExpCharacters(searchString);\n        }\n        this._state.change({ searchString: searchString }, false);\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        // overwritten in subclass\n    }\n    _start(opts, newState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.disposeModel();\n            if (!this._editor.hasModel()) {\n                // cannot do anything with an editor that doesn't have a model...\n                return;\n            }\n            const stateChanges = Object.assign(Object.assign({}, newState), { isRevealed: true });\n            if (opts.seedSearchStringFromSelection === 'single') {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n                if (selectionSearchString) {\n                    if (this._state.isRegex) {\n                        stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n                    }\n                    else {\n                        stateChanges.searchString = selectionSearchString;\n                    }\n                }\n            }\n            else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n                const selectionSearchString = yield this.getGlobalBufferTerm();\n                if (!this._editor.hasModel()) {\n                    // the editor has lost its model in the meantime\n                    return;\n                }\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            // Overwrite isReplaceRevealed\n            if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n                stateChanges.isReplaceRevealed = true;\n            }\n            else if (!this._findWidgetVisible.get()) {\n                stateChanges.isReplaceRevealed = false;\n            }\n            if (opts.updateSearchScope) {\n                const currentSelections = this._editor.getSelections();\n                if (currentSelections.some(selection => !selection.isEmpty())) {\n                    stateChanges.searchScope = currentSelections;\n                }\n            }\n            stateChanges.loop = opts.loop;\n            this._state.change(stateChanges, false);\n            if (!this._model) {\n                this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n            }\n        });\n    }\n    start(opts, newState) {\n        return this._start(opts, newState);\n    }\n    moveToNextMatch() {\n        if (this._model) {\n            this._model.moveToNextMatch();\n            return true;\n        }\n        return false;\n    }\n    moveToPrevMatch() {\n        if (this._model) {\n            this._model.moveToPrevMatch();\n            return true;\n        }\n        return false;\n    }\n    goToMatch(index) {\n        if (this._model) {\n            this._model.moveToMatch(index);\n            return true;\n        }\n        return false;\n    }\n    replace() {\n        if (this._model) {\n            this._model.replace();\n            return true;\n        }\n        return false;\n    }\n    replaceAll() {\n        if (this._model) {\n            this._model.replaceAll();\n            return true;\n        }\n        return false;\n    }\n    selectAllMatches() {\n        if (this._model) {\n            this._model.selectAllMatches();\n            this._editor.focus();\n            return true;\n        }\n        return false;\n    }\n    getGlobalBufferTerm() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.getOption(40 /* EditorOption.find */).globalFindClipboard\n                && this._editor.hasModel()\n                && !this._editor.getModel().isTooLargeForSyncing()) {\n                return this._clipboardService.readFindText();\n            }\n            return '';\n        });\n    }\n    setGlobalBufferTerm(text) {\n        if (this._editor.getOption(40 /* EditorOption.find */).globalFindClipboard\n            && this._editor.hasModel()\n            && !this._editor.getModel().isTooLargeForSyncing()) {\n            // intentionally not awaited\n            this._clipboardService.writeFindText(text);\n        }\n    }\n};\nCommonFindController.ID = 'editor.contrib.findController';\nCommonFindController = CommonFindController_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IStorageService),\n    __param(3, IClipboardService)\n], CommonFindController);\nexport { CommonFindController };\nlet FindController = class FindController extends CommonFindController {\n    constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\n        super(editor, _contextKeyService, _storageService, clipboardService);\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._themeService = _themeService;\n        this._notificationService = _notificationService;\n        this._widget = null;\n        this._findOptionsWidget = null;\n    }\n    _start(opts, newState) {\n        const _super = Object.create(null, {\n            _start: { get: () => super._start }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._widget) {\n                this._createFindWidget();\n            }\n            const selection = this._editor.getSelection();\n            let updateSearchScope = false;\n            switch (this._editor.getOption(40 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    updateSearchScope = true;\n                    break;\n                case 'never':\n                    updateSearchScope = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    updateSearchScope = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n            yield _super._start.call(this, opts, newState);\n            if (this._widget) {\n                if (opts.shouldFocus === 2 /* FindStartFocusAction.FocusReplaceInput */) {\n                    this._widget.focusReplaceInput();\n                }\n                else if (opts.shouldFocus === 1 /* FindStartFocusAction.FocusFindInput */) {\n                    this._widget.focusFindInput();\n                }\n            }\n        });\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        if (!this._widget) {\n            this._createFindWidget();\n        }\n        if (this._state.isRevealed && !ignoreWhenVisible) {\n            this._widget.highlightFindOptions();\n        }\n        else {\n            this._findOptionsWidget.highlightFindOptions();\n        }\n    }\n    _createFindWidget() {\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService));\n    }\n    saveViewState() {\n        var _a;\n        return (_a = this._widget) === null || _a === void 0 ? void 0 : _a.getViewState();\n    }\n    restoreViewState(state) {\n        var _a;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.setViewState(state);\n    }\n};\nFindController = __decorate([\n    __param(1, IContextViewService),\n    __param(2, IContextKeyService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService),\n    __param(5, INotificationService),\n    __param(6, IStorageService),\n    __param(7, IClipboardService)\n], FindController);\nexport { FindController };\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindAction,\n    label: nls.localize('startFindAction', \"Find\"),\n    alias: 'Find',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\n        order: 1\n    }\n}));\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    return controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(40 /* EditorOption.find */).globalFindClipboard,\n        shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(40 /* EditorOption.find */).loop\n    });\n});\nconst findArgDescription = {\n    description: 'Open a new In-Editor Find Widget.',\n    args: [{\n            name: 'Open a new In-Editor Find Widget args',\n            schema: {\n                properties: {\n                    searchString: { type: 'string' },\n                    replaceString: { type: 'string' },\n                    regex: { type: 'boolean' },\n                    regexOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    wholeWord: { type: 'boolean' },\n                    wholeWordOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    matchCase: { type: 'boolean' },\n                    matchCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    preserveCase: { type: 'boolean' },\n                    preserveCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    findInSelection: { type: 'boolean' },\n                }\n            }\n        }]\n};\nexport class StartFindWithArgsAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithArgs,\n            label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n            alias: 'Find With Arguments',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: findArgDescription\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                const newState = args ? {\n                    searchString: args.searchString,\n                    replaceString: args.replaceString,\n                    isReplaceRevealed: args.replaceString !== undefined,\n                    isRegex: args.isRegex,\n                    // isRegexOverride: args.regexOverride,\n                    wholeWord: args.matchWholeWord,\n                    // wholeWordOverride: args.wholeWordOverride,\n                    matchCase: args.isCaseSensitive,\n                    // matchCaseOverride: args.matchCaseOverride,\n                    preserveCase: args.preserveCase,\n                    // preserveCaseOverride: args.preserveCaseOverride,\n                } : {};\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n                    shouldAnimate: true,\n                    updateSearchScope: (args === null || args === void 0 ? void 0 : args.findInSelection) || false,\n                    loop: editor.getOption(40 /* EditorOption.find */).loop\n                }, newState);\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class StartFindWithSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithSelection,\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n            alias: 'Find With Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */,\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'multiple',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(40 /* EditorOption.find */).loop\n                });\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class MatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller && !this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(40 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextMatchFindAction,\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\n            alias: 'Find Next',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */, secondary: [61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }]\n        });\n    }\n    _run(controller) {\n        const result = controller.moveToNextMatch();\n        if (result) {\n            controller.editor.pushUndoStop();\n            return true;\n        }\n        return false;\n    }\n}\nexport class PreviousMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousMatchFindAction,\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n            alias: 'Find Previous',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 37 /* KeyCode.KeyG */, secondary: [1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            ]\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport class MoveToMatchFindAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.GoToMatchFindAction,\n            label: nls.localize('findMatchAction.goToMatch', \"Go to Match...\"),\n            alias: 'Go to Match...',\n            precondition: CONTEXT_FIND_WIDGET_VISIBLE\n        });\n        this._highlightDecorations = [];\n    }\n    run(accessor, editor, args) {\n        const controller = CommonFindController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const matchesCount = controller.getState().matchesCount;\n        if (matchesCount < 1) {\n            const notificationService = accessor.get(INotificationService);\n            notificationService.notify({\n                severity: Severity.Warning,\n                message: nls.localize('findMatchAction.noResults', \"No matches. Try searching for something else.\")\n            });\n            return;\n        }\n        const quickInputService = accessor.get(IQuickInputService);\n        const inputBox = quickInputService.createInputBox();\n        inputBox.placeholder = nls.localize('findMatchAction.inputPlaceHolder', \"Type a number to go to a specific match (between 1 and {0})\", matchesCount);\n        const toFindMatchIndex = (value) => {\n            const index = parseInt(value);\n            if (isNaN(index)) {\n                return undefined;\n            }\n            const matchCount = controller.getState().matchesCount;\n            if (index > 0 && index <= matchCount) {\n                return index - 1; // zero based\n            }\n            else if (index < 0 && index >= -matchCount) {\n                return matchCount + index;\n            }\n            return undefined;\n        };\n        const updatePickerAndEditor = (value) => {\n            const index = toFindMatchIndex(value);\n            if (typeof index === 'number') {\n                // valid\n                inputBox.validationMessage = undefined;\n                controller.goToMatch(index);\n                const currentMatch = controller.getState().currentMatch;\n                if (currentMatch) {\n                    this.addDecorations(editor, currentMatch);\n                }\n            }\n            else {\n                inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n                this.clearDecorations(editor);\n            }\n        };\n        inputBox.onDidChangeValue(value => {\n            updatePickerAndEditor(value);\n        });\n        inputBox.onDidAccept(() => {\n            const index = toFindMatchIndex(inputBox.value);\n            if (typeof index === 'number') {\n                controller.goToMatch(index);\n                inputBox.hide();\n            }\n            else {\n                inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n            }\n        });\n        inputBox.onDidHide(() => {\n            this.clearDecorations(editor);\n            inputBox.dispose();\n        });\n        inputBox.show();\n    }\n    clearDecorations(editor) {\n        editor.changeDecorations(changeAccessor => {\n            this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, []);\n        });\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, [\n                {\n                    range,\n                    options: {\n                        description: 'find-match-quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                {\n                    range,\n                    options: {\n                        description: 'find-match-quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ]);\n        });\n    }\n}\nexport class SelectionMatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (!controller) {\n                return;\n            }\n            const selectionSearchString = getSelectionSearchString(editor, 'single', false);\n            if (selectionSearchString) {\n                controller.setSearchString(selectionSearchString);\n            }\n            if (!this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(40 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextSelectionMatchFindAction,\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n            alias: 'Find Next Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToNextMatch();\n    }\n}\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n            alias: 'Find Previous Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindReplaceAction,\n    label: nls.localize('startReplace', \"Replace\"),\n    alias: 'Replace',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */,\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */ },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n        order: 2\n    }\n}));\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\n    if (!editor.hasModel() || editor.getOption(89 /* EditorOption.readOnly */)) {\n        return false;\n    }\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    const currentSelection = editor.getSelection();\n    const findInputFocused = controller.isFindInputFocused();\n    // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n    const seedSearchStringFromSelection = !currentSelection.isEmpty()\n        && currentSelection.startLineNumber === currentSelection.endLineNumber\n        && (editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection !== 'never')\n        && !findInputFocused;\n    /*\n    * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n\n    * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n    * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n    * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n    */\n    const shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\n        2 /* FindStartFocusAction.FocusReplaceInput */ : 1 /* FindStartFocusAction.FocusFindInput */;\n    return controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection !== 'never',\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(40 /* EditorOption.find */).loop\n    });\n});\nregisterEditorContribution(CommonFindController.ID, FindController, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(MoveToMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.CloseFindWidgetCommand,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.closeFindWidget(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\n    precondition: undefined,\n    handler: x => x.toggleCaseSensitive(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleCaseSensitiveKeybinding.primary,\n        mac: ToggleCaseSensitiveKeybinding.mac,\n        win: ToggleCaseSensitiveKeybinding.win,\n        linux: ToggleCaseSensitiveKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleWholeWordCommand,\n    precondition: undefined,\n    handler: x => x.toggleWholeWords(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleWholeWordKeybinding.primary,\n        mac: ToggleWholeWordKeybinding.mac,\n        win: ToggleWholeWordKeybinding.win,\n        linux: ToggleWholeWordKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleRegexCommand,\n    precondition: undefined,\n    handler: x => x.toggleRegex(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleRegexKeybinding.primary,\n        mac: ToggleRegexKeybinding.mac,\n        win: ToggleRegexKeybinding.win,\n        linux: ToggleRegexKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleSearchScopeCommand,\n    precondition: undefined,\n    handler: x => x.toggleSearchScope(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleSearchScopeKeybinding.primary,\n        mac: ToggleSearchScopeKeybinding.mac,\n        win: ToggleSearchScopeKeybinding.win,\n        linux: ToggleSearchScopeKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.TogglePreserveCaseCommand,\n    precondition: undefined,\n    handler: x => x.togglePreserveCase(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: TogglePreserveCaseKeybinding.primary,\n        mac: TogglePreserveCaseKeybinding.mac,\n        win: TogglePreserveCaseKeybinding.win,\n        linux: TogglePreserveCaseKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 22 /* KeyCode.Digit1 */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: undefined,\n        mac: {\n            primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n        }\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.SelectAllMatchesAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.selectAllMatches(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport const ToggleCaseSensitiveKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */ }\n};\nexport const ToggleWholeWordKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */ }\n};\nexport const ToggleRegexKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */ }\n};\nexport const ToggleSearchScopeKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */ }\n};\nexport const TogglePreserveCaseKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */ }\n};\nexport const FIND_IDS = {\n    StartFindAction: 'actions.find',\n    StartFindWithSelection: 'actions.findWithSelection',\n    StartFindWithArgs: 'editor.actions.findWithArgs',\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n    GoToMatchFindAction: 'editor.action.goToMatchFindAction',\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n    CloseFindWidgetCommand: 'closeFindWidget',\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\n    ToggleRegexCommand: 'toggleFindRegex',\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\n    TogglePreserveCaseCommand: 'togglePreserveCase',\n    ReplaceOneAction: 'editor.action.replaceOne',\n    ReplaceAllAction: 'editor.action.replaceAll',\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport const MATCHES_LIMIT = 19999;\nconst RESEARCH_DELAY = 240;\nexport class FindModelBoundToEditorModel {\n    constructor(editor, state) {\n        this._toDispose = new DisposableStore();\n        this._editor = editor;\n        this._state = state;\n        this._isDisposed = false;\n        this._startSearchingTimer = new TimeoutTimer();\n        this._decorations = new FindDecorations(editor);\n        this._toDispose.add(this._decorations);\n        this._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\n        this._toDispose.add(this._updateDecorationsScheduler);\n        this._toDispose.add(this._editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */\n                || e.reason === 5 /* CursorChangeReason.Undo */\n                || e.reason === 6 /* CursorChangeReason.Redo */) {\n                this._decorations.setStartPosition(this._editor.getPosition());\n            }\n        }));\n        this._ignoreModelContentChanged = false;\n        this._toDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (this._ignoreModelContentChanged) {\n                return;\n            }\n            if (e.isFlush) {\n                // a model.setValue() was called\n                this._decorations.reset();\n            }\n            this._decorations.setStartPosition(this._editor.getPosition());\n            this._updateDecorationsScheduler.schedule();\n        }));\n        this._toDispose.add(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this.research(false, this._state.searchScope);\n    }\n    dispose() {\n        this._isDisposed = true;\n        dispose(this._startSearchingTimer);\n        this._toDispose.dispose();\n    }\n    _onStateChanged(e) {\n        if (this._isDisposed) {\n            // The find model is disposed during a find state changed event\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            // The find model will be disposed momentarily\n            return;\n        }\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n            const model = this._editor.getModel();\n            if (model.isTooLargeForSyncing()) {\n                this._startSearchingTimer.cancel();\n                this._startSearchingTimer.setIfNotSet(() => {\n                    if (e.searchScope) {\n                        this.research(e.moveCursor, this._state.searchScope);\n                    }\n                    else {\n                        this.research(e.moveCursor);\n                    }\n                }, RESEARCH_DELAY);\n            }\n            else {\n                if (e.searchScope) {\n                    this.research(e.moveCursor, this._state.searchScope);\n                }\n                else {\n                    this.research(e.moveCursor);\n                }\n            }\n        }\n    }\n    static _getSearchRange(model, findScope) {\n        // If we have set now or before a find scope, use it for computing the search range\n        if (findScope) {\n            return findScope;\n        }\n        return model.getFullModelRange();\n    }\n    research(moveCursor, newFindScope) {\n        let findScopes = null;\n        if (typeof newFindScope !== 'undefined') {\n            if (newFindScope !== null) {\n                if (!Array.isArray(newFindScope)) {\n                    findScopes = [newFindScope];\n                }\n                else {\n                    findScopes = newFindScope;\n                }\n            }\n        }\n        else {\n            findScopes = this._decorations.getFindScopes();\n        }\n        if (findScopes !== null) {\n            findScopes = findScopes.map(findScope => {\n                if (findScope.startLineNumber !== findScope.endLineNumber) {\n                    let endLineNumber = findScope.endLineNumber;\n                    if (findScope.endColumn === 1) {\n                        endLineNumber = endLineNumber - 1;\n                    }\n                    return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\n                }\n                return findScope;\n            });\n        }\n        const findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\n        this._decorations.set(findMatches, findScopes);\n        const editorSelection = this._editor.getSelection();\n        let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\n        if (currentMatchesPosition === 0 && findMatches.length > 0) {\n            // current selection is not on top of a match\n            // try to find its nearest result from the top of the document\n            const matchAfterSelection = findFirstInSorted(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\n            currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\n        }\n        this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\n        if (moveCursor && this._editor.getOption(40 /* EditorOption.find */).cursorMoveOnType) {\n            this._moveToNextMatch(this._decorations.getStartPosition());\n        }\n    }\n    _hasMatches() {\n        return (this._state.matchesCount > 0);\n    }\n    _cannotFind() {\n        if (!this._hasMatches()) {\n            const findScope = this._decorations.getFindScope();\n            if (findScope) {\n                // Reveal the selection so user is reminded that 'selection find' is on.\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* ScrollType.Smooth */);\n            }\n            return true;\n        }\n        return false;\n    }\n    _setCurrentFindMatch(match) {\n        const matchesPosition = this._decorations.setCurrentFindMatch(match);\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n        this._editor.setSelection(match);\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* ScrollType.Smooth */);\n    }\n    _prevSearchPosition(before) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === 1) {\n            if (lineNumber === 1) {\n                lineNumber = model.getLineCount();\n            }\n            else {\n                lineNumber--;\n            }\n            column = model.getLineMaxColumn(lineNumber);\n        }\n        else {\n            column--;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToPrevMatch(before, isRecursed = false) {\n        if (!this._state.canNavigateBack()) {\n            // we are beyond the first matched find result\n            // instead of doing nothing, we should refocus the first item\n            const nextMatchRange = this._decorations.matchAfterPosition(before);\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let prevMatchRange = this._decorations.matchBeforePosition(before);\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n                before = this._prevSearchPosition(before);\n                prevMatchRange = this._decorations.matchBeforePosition(before);\n            }\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._cannotFind()) {\n            return;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(before)) {\n            before = searchRange.getEndPosition();\n        }\n        // ...|...(----)...\n        if (before.isBefore(searchRange.getStartPosition())) {\n            before = searchRange.getEndPosition();\n        }\n        const { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false);\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._prevSearchPosition(position);\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false);\n        }\n        if (!prevMatch) {\n            // there is precisely one match and selection is on top of it\n            return;\n        }\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n        }\n        this._setCurrentFindMatch(prevMatch.range);\n    }\n    moveToPrevMatch() {\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n    }\n    _nextSearchPosition(after) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n            if (lineNumber === model.getLineCount()) {\n                lineNumber = 1;\n            }\n            else {\n                lineNumber++;\n            }\n            column = 1;\n        }\n        else {\n            column++;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToNextMatch(after) {\n        if (!this._state.canNavigateForward()) {\n            // we are beyond the last matched find result\n            // instead of doing nothing, we should refocus the last item\n            const prevMatchRange = this._decorations.matchBeforePosition(after);\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let nextMatchRange = this._decorations.matchAfterPosition(after);\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n                // Looks like we're stuck at this position, unacceptable!\n                after = this._nextSearchPosition(after);\n                nextMatchRange = this._decorations.matchAfterPosition(after);\n            }\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        const nextMatch = this._getNextMatch(after, false, true);\n        if (nextMatch) {\n            this._setCurrentFindMatch(nextMatch.range);\n        }\n    }\n    _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\n        if (this._cannotFind()) {\n            return null;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(after)) {\n            after = searchRange.getStartPosition();\n        }\n        // ...|...(----)...\n        if (after.isBefore(searchRange.getStartPosition())) {\n            after = searchRange.getStartPosition();\n        }\n        const { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, captureMatches);\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._nextSearchPosition(position);\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, captureMatches);\n        }\n        if (!nextMatch) {\n            // there is precisely one match and selection is on top of it\n            return null;\n        }\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n        }\n        return nextMatch;\n    }\n    moveToNextMatch() {\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n    }\n    _moveToMatch(index) {\n        const decorationRange = this._decorations.getDecorationRangeAt(index);\n        if (decorationRange) {\n            this._setCurrentFindMatch(decorationRange);\n        }\n    }\n    moveToMatch(index) {\n        this._moveToMatch(index);\n    }\n    _getReplacePattern() {\n        if (this._state.isRegex) {\n            return parseReplaceString(this._state.replaceString);\n        }\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\n    }\n    replace() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const replacePattern = this._getReplacePattern();\n        const selection = this._editor.getSelection();\n        const nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n        if (nextMatch) {\n            if (selection.equalsRange(nextMatch.range)) {\n                // selection sits on a find match => replace it!\n                const replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n                const command = new ReplaceCommand(selection, replaceString);\n                this._executeEditorCommand('replace', command);\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n                this.research(true);\n            }\n            else {\n                this._decorations.setStartPosition(this._editor.getPosition());\n                this._setCurrentFindMatch(nextMatch.range);\n            }\n        }\n    }\n    _findMatches(findScopes, captureMatches, limitResultCount) {\n        const searchRanges = (findScopes || [null]).map((scope) => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\n        return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, captureMatches, limitResultCount);\n    }\n    replaceAll() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n            this._largeReplaceAll();\n        }\n        else {\n            this._regularReplaceAll(findScopes);\n        }\n        this.research(false);\n    }\n    _largeReplaceAll() {\n        const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null);\n        const searchData = searchParams.parseSearchRequest();\n        if (!searchData) {\n            return;\n        }\n        let searchRegex = searchData.regex;\n        if (!searchRegex.multiline) {\n            let mod = 'mu';\n            if (searchRegex.ignoreCase) {\n                mod += 'i';\n            }\n            if (searchRegex.global) {\n                mod += 'g';\n            }\n            searchRegex = new RegExp(searchRegex.source, mod);\n        }\n        const model = this._editor.getModel();\n        const modelText = model.getValue(1 /* EndOfLinePreference.LF */);\n        const fullModelRange = model.getFullModelRange();\n        const replacePattern = this._getReplacePattern();\n        let resultText;\n        const preserveCase = this._state.preserveCase;\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\n            resultText = modelText.replace(searchRegex, function () {\n                return replacePattern.buildReplaceString(arguments, preserveCase);\n            });\n        }\n        else {\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n        }\n        const command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n        this._executeEditorCommand('replaceAll', command);\n    }\n    _regularReplaceAll(findScopes) {\n        const replacePattern = this._getReplacePattern();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const replaceStrings = [];\n        for (let i = 0, len = matches.length; i < len; i++) {\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n        }\n        const command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\n        this._executeEditorCommand('replaceAll', command);\n    }\n    selectAllMatches() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\n        // If one of the ranges is the editor selection, then maintain it as primary\n        const editorSelection = this._editor.getSelection();\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const sel = selections[i];\n            if (sel.equalsRange(editorSelection)) {\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n                break;\n            }\n        }\n        this._editor.setSelections(selections);\n    }\n    _executeEditorCommand(source, command) {\n        try {\n            this._ignoreModelContentChanged = true;\n            this._editor.pushUndoStop();\n            this._editor.executeCommand(source, command);\n            this._editor.pushUndoStop();\n        }\n        finally {\n            this._ignoreModelContentChanged = false;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nexport class FindDecorations {\n    constructor(editor) {\n        this._editor = editor;\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n        this._startPosition = this._editor.getPosition();\n    }\n    dispose() {\n        this._editor.removeDecorations(this._allDecorations());\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    reset() {\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    getCount() {\n        return this._decorations.length;\n    }\n    /** @deprecated use getFindScopes to support multiple selections */\n    getFindScope() {\n        if (this._findScopeDecorationIds[0]) {\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\n        }\n        return null;\n    }\n    getFindScopes() {\n        if (this._findScopeDecorationIds.length) {\n            const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\n            if (scopes.length) {\n                return scopes;\n            }\n        }\n        return null;\n    }\n    getStartPosition() {\n        return this._startPosition;\n    }\n    setStartPosition(newStartPosition) {\n        this._startPosition = newStartPosition;\n        this.setCurrentFindMatch(null);\n    }\n    _getDecorationIndex(decorationId) {\n        const index = this._decorations.indexOf(decorationId);\n        if (index >= 0) {\n            return index + 1;\n        }\n        return 1;\n    }\n    getDecorationRangeAt(index) {\n        const decorationId = index < this._decorations.length ? this._decorations[index] : null;\n        if (decorationId) {\n            return this._editor.getModel().getDecorationRange(decorationId);\n        }\n        return null;\n    }\n    getCurrentMatchesPosition(desiredRange) {\n        const candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n        for (const candidate of candidates) {\n            const candidateOpts = candidate.options;\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n                return this._getDecorationIndex(candidate.id);\n            }\n        }\n        // We don't know the current match position, so returns zero to show '?' in find widget\n        return 0;\n    }\n    setCurrentFindMatch(nextMatch) {\n        let newCurrentDecorationId = null;\n        let matchPosition = 0;\n        if (nextMatch) {\n            for (let i = 0, len = this._decorations.length; i < len; i++) {\n                const range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n                if (nextMatch.equalsRange(range)) {\n                    newCurrentDecorationId = this._decorations[i];\n                    matchPosition = (i + 1);\n                    break;\n                }\n            }\n        }\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n            this._editor.changeDecorations((changeAccessor) => {\n                if (this._highlightedDecorationId !== null) {\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n                    this._highlightedDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    this._highlightedDecorationId = newCurrentDecorationId;\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n                }\n                if (this._rangeHighlightDecorationId !== null) {\n                    changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\n                    this._rangeHighlightDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n                        const lineBeforeEnd = rng.endLineNumber - 1;\n                        const lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n                    }\n                    this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n                }\n            });\n        }\n        return matchPosition;\n    }\n    set(findMatches, findScopes) {\n        this._editor.changeDecorations((accessor) => {\n            let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n            const newOverviewRulerApproximateDecorations = [];\n            if (findMatches.length > 1000) {\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\n                // approximate a distance in lines where matches should be merged\n                const lineCount = this._editor.getModel().getLineCount();\n                const height = this._editor.getLayoutInfo().height;\n                const approxPixelsPerLine = height / lineCount;\n                const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\n                // merge decorations as much as possible\n                let prevStartLineNumber = findMatches[0].range.startLineNumber;\n                let prevEndLineNumber = findMatches[0].range.endLineNumber;\n                for (let i = 1, len = findMatches.length; i < len; i++) {\n                    const range = findMatches[i].range;\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n                        if (range.endLineNumber > prevEndLineNumber) {\n                            prevEndLineNumber = range.endLineNumber;\n                        }\n                    }\n                    else {\n                        newOverviewRulerApproximateDecorations.push({\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                        });\n                        prevStartLineNumber = range.startLineNumber;\n                        prevEndLineNumber = range.endLineNumber;\n                    }\n                }\n                newOverviewRulerApproximateDecorations.push({\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                });\n            }\n            // Find matches\n            const newFindMatchesDecorations = new Array(findMatches.length);\n            for (let i = 0, len = findMatches.length; i < len; i++) {\n                newFindMatchesDecorations[i] = {\n                    range: findMatches[i].range,\n                    options: findMatchesOptions\n                };\n            }\n            this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\n            // Overview ruler approximate decorations\n            this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\n            // Range highlight\n            if (this._rangeHighlightDecorationId) {\n                accessor.removeDecoration(this._rangeHighlightDecorationId);\n                this._rangeHighlightDecorationId = null;\n            }\n            // Find scope\n            if (this._findScopeDecorationIds.length) {\n                this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\n                this._findScopeDecorationIds = [];\n            }\n            if (findScopes === null || findScopes === void 0 ? void 0 : findScopes.length) {\n                this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\n            }\n        });\n    }\n    matchBeforePosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = this._decorations.length - 1; i >= 0; i--) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.endLineNumber > position.lineNumber) {\n                continue;\n            }\n            if (r.endLineNumber < position.lineNumber) {\n                return r;\n            }\n            if (r.endColumn > position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n    }\n    matchAfterPosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = 0, len = this._decorations.length; i < len; i++) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.startLineNumber < position.lineNumber) {\n                continue;\n            }\n            if (r.startLineNumber > position.lineNumber) {\n                return r;\n            }\n            if (r.startColumn < position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\n    }\n    _allDecorations() {\n        let result = [];\n        result = result.concat(this._decorations);\n        result = result.concat(this._overviewRulerApproximateDecorations);\n        if (this._findScopeDecorationIds.length) {\n            result.push(...this._findScopeDecorationIds);\n        }\n        if (this._rangeHighlightDecorationId) {\n            result.push(this._rangeHighlightDecorationId);\n        }\n        return result;\n    }\n}\nFindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'current-find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 10,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'findMatch',\n    showIfCollapsed: true\n});\nFindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-only-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nFindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    description: 'find-range-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'rangeHighlight',\n    isWholeLine: true\n});\nFindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    description: 'find-scope',\n    className: 'findScope',\n    isWholeLine: true\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport class ReplaceAllCommand {\n    constructor(editorSelection, ranges, replaceStrings) {\n        this._editorSelection = editorSelection;\n        this._ranges = ranges;\n        this._replaceStrings = replaceStrings;\n        this._trackedEditorSelectionId = null;\n    }\n    getEditOperations(model, builder) {\n        if (this._ranges.length > 0) {\n            // Collect all edit operations\n            const ops = [];\n            for (let i = 0; i < this._ranges.length; i++) {\n                ops.push({\n                    range: this._ranges[i],\n                    text: this._replaceStrings[i]\n                });\n            }\n            // Sort them in ascending order by range starts\n            ops.sort((o1, o2) => {\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\n            });\n            // Merge operations that touch each other\n            const resultOps = [];\n            let previousOp = ops[0];\n            for (let i = 1; i < ops.length; i++) {\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n                    // These operations are one after another and can be merged\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\n                    previousOp.text = previousOp.text + ops[i].text;\n                }\n                else {\n                    resultOps.push(previousOp);\n                    previousOp = ops[i];\n                }\n            }\n            resultOps.push(previousOp);\n            for (const op of resultOps) {\n                builder.addEditOperation(op.range, op.text);\n            }\n        }\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\n/**\n * Assigned when the replace pattern is entirely static.\n */\nclass StaticValueReplacePattern {\n    constructor(staticValue) {\n        this.staticValue = staticValue;\n        this.kind = 0 /* ReplacePatternKind.StaticValue */;\n    }\n}\n/**\n * Assigned when the replace pattern has replacement patterns.\n */\nclass DynamicPiecesReplacePattern {\n    constructor(pieces) {\n        this.pieces = pieces;\n        this.kind = 1 /* ReplacePatternKind.DynamicPieces */;\n    }\n}\nexport class ReplacePattern {\n    static fromStaticValue(value) {\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\n    }\n    get hasReplacementPatterns() {\n        return (this._state.kind === 1 /* ReplacePatternKind.DynamicPieces */);\n    }\n    constructor(pieces) {\n        if (!pieces || pieces.length === 0) {\n            this._state = new StaticValueReplacePattern('');\n        }\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n        }\n        else {\n            this._state = new DynamicPiecesReplacePattern(pieces);\n        }\n    }\n    buildReplaceString(matches, preserveCase) {\n        if (this._state.kind === 0 /* ReplacePatternKind.StaticValue */) {\n            if (preserveCase) {\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\n            }\n            else {\n                return this._state.staticValue;\n            }\n        }\n        let result = '';\n        for (let i = 0, len = this._state.pieces.length; i < len; i++) {\n            const piece = this._state.pieces[i];\n            if (piece.staticValue !== null) {\n                // static value ReplacePiece\n                result += piece.staticValue;\n                continue;\n            }\n            // match index ReplacePiece\n            let match = ReplacePattern._substitute(piece.matchIndex, matches);\n            if (piece.caseOps !== null && piece.caseOps.length > 0) {\n                const repl = [];\n                const lenOps = piece.caseOps.length;\n                let opIdx = 0;\n                for (let idx = 0, len = match.length; idx < len; idx++) {\n                    if (opIdx >= lenOps) {\n                        repl.push(match.slice(idx));\n                        break;\n                    }\n                    switch (piece.caseOps[opIdx]) {\n                        case 'U':\n                            repl.push(match[idx].toUpperCase());\n                            break;\n                        case 'u':\n                            repl.push(match[idx].toUpperCase());\n                            opIdx++;\n                            break;\n                        case 'L':\n                            repl.push(match[idx].toLowerCase());\n                            break;\n                        case 'l':\n                            repl.push(match[idx].toLowerCase());\n                            opIdx++;\n                            break;\n                        default:\n                            repl.push(match[idx]);\n                    }\n                }\n                match = repl.join('');\n            }\n            result += match;\n        }\n        return result;\n    }\n    static _substitute(matchIndex, matches) {\n        if (matches === null) {\n            return '';\n        }\n        if (matchIndex === 0) {\n            return matches[0];\n        }\n        let remainder = '';\n        while (matchIndex > 0) {\n            if (matchIndex < matches.length) {\n                // A match can be undefined\n                const match = (matches[matchIndex] || '');\n                return match + remainder;\n            }\n            remainder = String(matchIndex % 10) + remainder;\n            matchIndex = Math.floor(matchIndex / 10);\n        }\n        return '$' + remainder;\n    }\n}\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\nexport class ReplacePiece {\n    static staticValue(value) {\n        return new ReplacePiece(value, -1, null);\n    }\n    static matchIndex(index) {\n        return new ReplacePiece(null, index, null);\n    }\n    static caseOps(index, caseOps) {\n        return new ReplacePiece(null, index, caseOps);\n    }\n    constructor(staticValue, matchIndex, caseOps) {\n        this.staticValue = staticValue;\n        this.matchIndex = matchIndex;\n        if (!caseOps || caseOps.length === 0) {\n            this.caseOps = null;\n        }\n        else {\n            this.caseOps = caseOps.slice(0);\n        }\n    }\n}\nclass ReplacePieceBuilder {\n    constructor(source) {\n        this._source = source;\n        this._lastCharIndex = 0;\n        this._result = [];\n        this._resultLen = 0;\n        this._currentStaticPiece = '';\n    }\n    emitUnchanged(toCharIndex) {\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n        this._lastCharIndex = toCharIndex;\n    }\n    emitStatic(value, toCharIndex) {\n        this._emitStatic(value);\n        this._lastCharIndex = toCharIndex;\n    }\n    _emitStatic(value) {\n        if (value.length === 0) {\n            return;\n        }\n        this._currentStaticPiece += value;\n    }\n    emitMatchIndex(index, toCharIndex, caseOps) {\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\n        this._lastCharIndex = toCharIndex;\n    }\n    finalize() {\n        this.emitUnchanged(this._source.length);\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        return new ReplacePattern(this._result);\n    }\n}\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * \\u\t\t\t=> upper-cases one character in a match.\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\n * \\l\t\t\t=> lower-cases one character in a match.\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\nexport function parseReplaceString(replaceString) {\n    if (!replaceString || replaceString.length === 0) {\n        return new ReplacePattern(null);\n    }\n    const caseOps = [];\n    const result = new ReplacePieceBuilder(replaceString);\n    for (let i = 0, len = replaceString.length; i < len; i++) {\n        const chCode = replaceString.charCodeAt(i);\n        if (chCode === 92 /* CharCode.Backslash */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a \\\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            // let replaceWithCharacter: string | null = null;\n            switch (nextChCode) {\n                case 92 /* CharCode.Backslash */:\n                    // \\\\ => inserts a \"\\\"\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\\\', i + 1);\n                    break;\n                case 110 /* CharCode.n */:\n                    // \\n => inserts a LF\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\n', i + 1);\n                    break;\n                case 116 /* CharCode.t */:\n                    // \\t => inserts a TAB\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\t', i + 1);\n                    break;\n                // Case modification of string replacements, patterned after Boost, but only applied\n                // to the replacement text, not subsequent content.\n                case 117 /* CharCode.u */:\n                // \\u => upper-cases one character.\n                case 85 /* CharCode.U */:\n                // \\U => upper-cases ALL following characters.\n                case 108 /* CharCode.l */:\n                // \\l => lower-cases one character.\n                case 76 /* CharCode.L */:\n                    // \\L => lower-cases ALL following characters.\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('', i + 1);\n                    caseOps.push(String.fromCharCode(nextChCode));\n                    break;\n            }\n            continue;\n        }\n        if (chCode === 36 /* CharCode.DollarSign */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a $\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            if (nextChCode === 36 /* CharCode.DollarSign */) {\n                // $$ => inserts a \"$\"\n                result.emitUnchanged(i - 1);\n                result.emitStatic('$', i + 1);\n                continue;\n            }\n            if (nextChCode === 48 /* CharCode.Digit0 */ || nextChCode === 38 /* CharCode.Ampersand */) {\n                // $& and $0 => inserts the matched substring.\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(0, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n            if (49 /* CharCode.Digit1 */ <= nextChCode && nextChCode <= 57 /* CharCode.Digit9 */) {\n                // $n\n                let matchIndex = nextChCode - 48 /* CharCode.Digit0 */;\n                // peek next char to probe for $nn\n                if (i + 1 < len) {\n                    const nextNextChCode = replaceString.charCodeAt(i + 1);\n                    if (48 /* CharCode.Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* CharCode.Digit9 */) {\n                        // $nn\n                        // move to next char\n                        i++;\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* CharCode.Digit0 */);\n                        result.emitUnchanged(i - 2);\n                        result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                        caseOps.length = 0;\n                        continue;\n                    }\n                }\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n        }\n    }\n    return result.finalize();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport './findOptionsWidget.css';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nexport class FindOptionsWidget extends Widget {\n    constructor(editor, state, keybindingService) {\n        super();\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n        this._isVisible = false;\n        this._editor = editor;\n        this._state = state;\n        this._keybindingService = keybindingService;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'findOptionsWidget';\n        this._domNode.style.display = 'none';\n        this._domNode.style.top = '10px';\n        this._domNode.style.zIndex = '12';\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        const toggleStyles = {\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n        };\n        this.caseSensitive = this._register(new CaseSensitiveToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand), isChecked: this._state.matchCase }, toggleStyles)));\n        this._domNode.appendChild(this.caseSensitive.domNode);\n        this._register(this.caseSensitive.onChange(() => {\n            this._state.change({\n                matchCase: this.caseSensitive.checked\n            }, false);\n        }));\n        this.wholeWords = this._register(new WholeWordsToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand), isChecked: this._state.wholeWord }, toggleStyles)));\n        this._domNode.appendChild(this.wholeWords.domNode);\n        this._register(this.wholeWords.onChange(() => {\n            this._state.change({\n                wholeWord: this.wholeWords.checked\n            }, false);\n        }));\n        this.regex = this._register(new RegexToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand), isChecked: this._state.isRegex }, toggleStyles)));\n        this._domNode.appendChild(this.regex.domNode);\n        this._register(this.regex.onChange(() => {\n            this._state.change({\n                isRegex: this.regex.checked\n            }, false);\n        }));\n        this._editor.addOverlayWidget(this);\n        this._register(this._state.onFindReplaceStateChange((e) => {\n            let somethingChanged = false;\n            if (e.isRegex) {\n                this.regex.checked = this._state.isRegex;\n                somethingChanged = true;\n            }\n            if (e.wholeWord) {\n                this.wholeWords.checked = this._state.wholeWord;\n                somethingChanged = true;\n            }\n            if (e.matchCase) {\n                this.caseSensitive.checked = this._state.matchCase;\n                somethingChanged = true;\n            }\n            if (!this._state.isRevealed && somethingChanged) {\n                this._revealTemporarily();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, (e) => this._onMouseLeave()));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\n    }\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n    }\n    highlightFindOptions() {\n        this._revealTemporarily();\n    }\n    _revealTemporarily() {\n        this._show();\n        this._hideSoon.schedule();\n    }\n    _onMouseLeave() {\n        this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n        this._hideSoon.cancel();\n    }\n    _show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._domNode.style.display = 'block';\n    }\n    _hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode.style.display = 'none';\n    }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MATCHES_LIMIT } from './findModel.js';\nfunction effectiveOptionValue(override, value) {\n    if (override === 1 /* FindOptionOverride.True */) {\n        return true;\n    }\n    if (override === 2 /* FindOptionOverride.False */) {\n        return false;\n    }\n    return value;\n}\nexport class FindReplaceState extends Disposable {\n    get searchString() { return this._searchString; }\n    get replaceString() { return this._replaceString; }\n    get isRevealed() { return this._isRevealed; }\n    get isReplaceRevealed() { return this._isReplaceRevealed; }\n    get isRegex() { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\n    get wholeWord() { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\n    get matchCase() { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\n    get preserveCase() { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\n    get actualIsRegex() { return this._isRegex; }\n    get actualWholeWord() { return this._wholeWord; }\n    get actualMatchCase() { return this._matchCase; }\n    get actualPreserveCase() { return this._preserveCase; }\n    get searchScope() { return this._searchScope; }\n    get matchesPosition() { return this._matchesPosition; }\n    get matchesCount() { return this._matchesCount; }\n    get currentMatch() { return this._currentMatch; }\n    get isSearching() { return this._isSearching; }\n    get filters() { return this._filters; }\n    constructor() {\n        super();\n        this._onFindReplaceStateChange = this._register(new Emitter());\n        this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\n        this._searchString = '';\n        this._replaceString = '';\n        this._isRevealed = false;\n        this._isReplaceRevealed = false;\n        this._isRegex = false;\n        this._isRegexOverride = 0 /* FindOptionOverride.NotSet */;\n        this._wholeWord = false;\n        this._wholeWordOverride = 0 /* FindOptionOverride.NotSet */;\n        this._matchCase = false;\n        this._matchCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._preserveCase = false;\n        this._preserveCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._searchScope = null;\n        this._matchesPosition = 0;\n        this._matchesCount = 0;\n        this._currentMatch = null;\n        this._loop = true;\n        this._isSearching = false;\n        this._filters = null;\n    }\n    changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\n        const changeEvent = {\n            moveCursor: false,\n            updateHistory: false,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        if (matchesCount === 0) {\n            matchesPosition = 0;\n        }\n        if (matchesPosition > matchesCount) {\n            matchesPosition = matchesCount;\n        }\n        if (this._matchesPosition !== matchesPosition) {\n            this._matchesPosition = matchesPosition;\n            changeEvent.matchesPosition = true;\n            somethingChanged = true;\n        }\n        if (this._matchesCount !== matchesCount) {\n            this._matchesCount = matchesCount;\n            changeEvent.matchesCount = true;\n            somethingChanged = true;\n        }\n        if (typeof currentMatch !== 'undefined') {\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n                this._currentMatch = currentMatch;\n                changeEvent.currentMatch = true;\n                somethingChanged = true;\n            }\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    change(newState, moveCursor, updateHistory = true) {\n        var _a;\n        const changeEvent = {\n            moveCursor: moveCursor,\n            updateHistory: updateHistory,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        const oldEffectiveIsRegex = this.isRegex;\n        const oldEffectiveWholeWords = this.wholeWord;\n        const oldEffectiveMatchCase = this.matchCase;\n        const oldEffectivePreserveCase = this.preserveCase;\n        if (typeof newState.searchString !== 'undefined') {\n            if (this._searchString !== newState.searchString) {\n                this._searchString = newState.searchString;\n                changeEvent.searchString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.replaceString !== 'undefined') {\n            if (this._replaceString !== newState.replaceString) {\n                this._replaceString = newState.replaceString;\n                changeEvent.replaceString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRevealed !== 'undefined') {\n            if (this._isRevealed !== newState.isRevealed) {\n                this._isRevealed = newState.isRevealed;\n                changeEvent.isRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n                this._isReplaceRevealed = newState.isReplaceRevealed;\n                changeEvent.isReplaceRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRegex !== 'undefined') {\n            this._isRegex = newState.isRegex;\n        }\n        if (typeof newState.wholeWord !== 'undefined') {\n            this._wholeWord = newState.wholeWord;\n        }\n        if (typeof newState.matchCase !== 'undefined') {\n            this._matchCase = newState.matchCase;\n        }\n        if (typeof newState.preserveCase !== 'undefined') {\n            this._preserveCase = newState.preserveCase;\n        }\n        if (typeof newState.searchScope !== 'undefined') {\n            if (!((_a = newState.searchScope) === null || _a === void 0 ? void 0 : _a.every((newSearchScope) => {\n                var _a;\n                return (_a = this._searchScope) === null || _a === void 0 ? void 0 : _a.some(existingSearchScope => {\n                    return !Range.equalsRange(existingSearchScope, newSearchScope);\n                });\n            }))) {\n                this._searchScope = newState.searchScope;\n                changeEvent.searchScope = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.loop !== 'undefined') {\n            if (this._loop !== newState.loop) {\n                this._loop = newState.loop;\n                changeEvent.loop = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isSearching !== 'undefined') {\n            if (this._isSearching !== newState.isSearching) {\n                this._isSearching = newState.isSearching;\n                changeEvent.isSearching = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.filters !== 'undefined') {\n            if (this._filters) {\n                this._filters.update(newState.filters);\n            }\n            else {\n                this._filters = newState.filters;\n            }\n            changeEvent.filters = true;\n            somethingChanged = true;\n        }\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* FindOptionOverride.NotSet */);\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* FindOptionOverride.NotSet */);\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        if (oldEffectiveIsRegex !== this.isRegex) {\n            somethingChanged = true;\n            changeEvent.isRegex = true;\n        }\n        if (oldEffectiveWholeWords !== this.wholeWord) {\n            somethingChanged = true;\n            changeEvent.wholeWord = true;\n        }\n        if (oldEffectiveMatchCase !== this.matchCase) {\n            somethingChanged = true;\n            changeEvent.matchCase = true;\n        }\n        if (oldEffectivePreserveCase !== this.preserveCase) {\n            somethingChanged = true;\n            changeEvent.preserveCase = true;\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    canNavigateBack() {\n        return this.canNavigateInLoop() || (this.matchesPosition !== 1);\n    }\n    canNavigateForward() {\n        return this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\n    }\n    canNavigateInLoop() {\n        return this._loop || (this.matchesCount >= MATCHES_LIMIT);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { asCssVariable, contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetForeground, editorWidgetResizeBorder, errorForeground, focusBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, toolbarHoverBackground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_DIALOG_LABEL = nls.localize('label.findDialog', \"Find / Replace\");\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nexport class FindWidgetViewZone {\n    constructor(afterLineNumber) {\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n        this.suppressMouseDown = false;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'dock-find-viewzone';\n    }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\n        event.stopPropagation();\n        return;\n    }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n        event.stopPropagation();\n        return;\n    }\n}\nexport class FindWidget extends Widget {\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n        super();\n        this._cachedHeight = null;\n        this._revealTimeouts = [];\n        this._codeEditor = codeEditor;\n        this._controller = controller;\n        this._state = state;\n        this._contextViewProvider = contextViewProvider;\n        this._keybindingService = keybindingService;\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._notificationService = notificationService;\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n        this._isVisible = false;\n        this._isReplaceVisible = false;\n        this._ignoreChangeEvent = false;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._buildDomNode();\n        this._updateButtons();\n        this._tryUpdateWidgetWidth();\n        this._findInput.inputBox.layout();\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(89 /* EditorOption.readOnly */)) {\n                if (this._codeEditor.getOption(89 /* EditorOption.readOnly */)) {\n                    // Hide replace part if editor becomes read only\n                    this._state.change({ isReplaceRevealed: false }, false);\n                }\n                this._updateButtons();\n            }\n            if (e.hasChanged(142 /* EditorOption.layoutInfo */)) {\n                this._tryUpdateWidgetWidth();\n            }\n            if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n                this.updateAccessibilitySupport();\n            }\n            if (e.hasChanged(40 /* EditorOption.find */)) {\n                const supportLoop = this._codeEditor.getOption(40 /* EditorOption.find */).loop;\n                this._state.change({ loop: supportLoop }, false);\n                const addExtraSpaceOnTop = this._codeEditor.getOption(40 /* EditorOption.find */).addExtraSpaceOnTop;\n                if (addExtraSpaceOnTop && !this._viewZone) {\n                    this._viewZone = new FindWidgetViewZone(0);\n                    this._showViewZone();\n                }\n                if (!addExtraSpaceOnTop && this._viewZone) {\n                    this._removeViewZone();\n                }\n            }\n        }));\n        this.updateAccessibilitySupport();\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n            if (this._isVisible) {\n                this._updateToggleSelectionFindButton();\n            }\n        }));\n        this._register(this._codeEditor.onDidFocusEditorWidget(() => __awaiter(this, void 0, void 0, function* () {\n            if (this._isVisible) {\n                const globalBufferTerm = yield this._controller.getGlobalBufferTerm();\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n                    this._state.change({ searchString: globalBufferTerm }, false);\n                    this._findInput.select();\n                }\n            }\n        })));\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n        this._register(this._findFocusTracker.onDidFocus(() => {\n            this._findInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._findFocusTracker.onDidBlur(() => {\n            this._findInputFocused.set(false);\n        }));\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\n            this._replaceInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\n            this._replaceInputFocused.set(false);\n        }));\n        this._codeEditor.addOverlayWidget(this);\n        if (this._codeEditor.getOption(40 /* EditorOption.find */).addExtraSpaceOnTop) {\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n        }\n        this._register(this._codeEditor.onDidChangeModel(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._viewZoneId = undefined;\n        }));\n        this._register(this._codeEditor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged) {\n                this._layoutViewZone();\n                return;\n            }\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n            setTimeout(() => {\n                this._layoutViewZone();\n            }, 0);\n        }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        if (this._isVisible) {\n            return {\n                preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n            };\n        }\n        return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n        if (e.searchString) {\n            try {\n                this._ignoreChangeEvent = true;\n                this._findInput.setValue(this._state.searchString);\n            }\n            finally {\n                this._ignoreChangeEvent = false;\n            }\n            this._updateButtons();\n        }\n        if (e.replaceString) {\n            this._replaceInput.inputBox.value = this._state.replaceString;\n        }\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._reveal();\n            }\n            else {\n                this._hide(true);\n            }\n        }\n        if (e.isReplaceRevealed) {\n            if (this._state.isReplaceRevealed) {\n                if (!this._codeEditor.getOption(89 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n                    this._isReplaceVisible = true;\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._updateButtons();\n                    this._replaceInput.inputBox.layout();\n                }\n            }\n            else {\n                if (this._isReplaceVisible) {\n                    this._isReplaceVisible = false;\n                    this._updateButtons();\n                }\n            }\n        }\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }\n        if (e.isRegex) {\n            this._findInput.setRegex(this._state.isRegex);\n        }\n        if (e.wholeWord) {\n            this._findInput.setWholeWords(this._state.wholeWord);\n        }\n        if (e.matchCase) {\n            this._findInput.setCaseSensitive(this._state.matchCase);\n        }\n        if (e.preserveCase) {\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\n        }\n        if (e.searchScope) {\n            if (this._state.searchScope) {\n                this._toggleSelectionFind.checked = true;\n            }\n            else {\n                this._toggleSelectionFind.checked = false;\n            }\n            this._updateToggleSelectionFindButton();\n        }\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\n            const showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n            this._domNode.classList.toggle('no-results', showRedOutline);\n            this._updateMatchesCount();\n            this._updateButtons();\n        }\n        if (e.searchString || e.currentMatch) {\n            this._layoutViewZone();\n        }\n        if (e.updateHistory) {\n            this._delayedUpdateHistory();\n        }\n        if (e.loop) {\n            this._updateButtons();\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n        if (this._state.searchString) {\n            this._findInput.inputBox.addToHistory();\n        }\n        if (this._state.replaceString) {\n            this._replaceInput.inputBox.addToHistory();\n        }\n    }\n    _updateMatchesCount() {\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n        }\n        else {\n            this._matchesCount.title = '';\n        }\n        // remove previous content\n        if (this._matchesCount.firstChild) {\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\n        }\n        let label;\n        if (this._state.matchesCount > 0) {\n            let matchesCount = String(this._state.matchesCount);\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(this._state.matchesPosition);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        this._matchesCount.appendChild(document.createTextNode(label));\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n        }\n        if (currentMatch) {\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n            const model = this._codeEditor.getModel();\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\n                return `${lineContent}, ${ariaLabel}`;\n            }\n            return ariaLabel;\n        }\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n        const selection = this._codeEditor.getSelection();\n        const isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n        const isChecked = this._toggleSelectionFind.checked;\n        if (this._isVisible && (isChecked || isSelection)) {\n            this._toggleSelectionFind.enable();\n        }\n        else {\n            this._toggleSelectionFind.disable();\n        }\n    }\n    _updateButtons() {\n        this._findInput.setEnabled(this._isVisible);\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n        this._updateToggleSelectionFindButton();\n        this._closeBtn.setEnabled(this._isVisible);\n        const findInputIsNonEmpty = (this._state.searchString.length > 0);\n        const matchesCount = this._state.matchesCount ? true : false;\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        const canReplace = !this._codeEditor.getOption(89 /* EditorOption.readOnly */);\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (!this._isVisible) {\n            this._isVisible = true;\n            const selection = this._codeEditor.getSelection();\n            switch (this._codeEditor.getOption(40 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    this._toggleSelectionFind.checked = true;\n                    break;\n                case 'never':\n                    this._toggleSelectionFind.checked = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            this._tryUpdateWidgetWidth();\n            this._updateButtons();\n            this._revealTimeouts.push(setTimeout(() => {\n                this._domNode.classList.add('visible');\n                this._domNode.setAttribute('aria-hidden', 'false');\n            }, 0));\n            // validate query again as it's being dismissed when we hide the find widget.\n            this._revealTimeouts.push(setTimeout(() => {\n                this._findInput.validate();\n            }, 200));\n            this._codeEditor.layoutOverlayWidget(this);\n            let adjustEditorScrollTop = true;\n            if (this._codeEditor.getOption(40 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n                const domNode = this._codeEditor.getDomNode();\n                if (domNode) {\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n                    const startTop = startCoords ? startCoords.top : 0;\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\n                        if (selection.endLineNumber > selection.startLineNumber) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n                        if (startLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n                        if (endLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                    }\n                }\n            }\n            this._showViewZone(adjustEditorScrollTop);\n        }\n    }\n    _hide(focusTheEditor) {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (this._isVisible) {\n            this._isVisible = false;\n            this._updateButtons();\n            this._domNode.classList.remove('visible');\n            this._domNode.setAttribute('aria-hidden', 'true');\n            this._findInput.clearMessage();\n            if (focusTheEditor) {\n                this._codeEditor.focus();\n            }\n            this._codeEditor.layoutOverlayWidget(this);\n            this._removeViewZone();\n        }\n    }\n    _layoutViewZone(targetScrollTop) {\n        const addExtraSpaceOnTop = this._codeEditor.getOption(40 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            this._removeViewZone();\n            return;\n        }\n        if (!this._isVisible) {\n            return;\n        }\n        const viewZone = this._viewZone;\n        if (this._viewZoneId !== undefined || !viewZone) {\n            return;\n        }\n        this._codeEditor.changeViewZones((accessor) => {\n            viewZone.heightInPx = this._getHeight();\n            this._viewZoneId = accessor.addZone(viewZone);\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n        });\n    }\n    _showViewZone(adjustScroll = true) {\n        if (!this._isVisible) {\n            return;\n        }\n        const addExtraSpaceOnTop = this._codeEditor.getOption(40 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            return;\n        }\n        if (this._viewZone === undefined) {\n            this._viewZone = new FindWidgetViewZone(0);\n        }\n        const viewZone = this._viewZone;\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                // the view zone already exists, we need to update the height\n                const newHeight = this._getHeight();\n                if (newHeight === viewZone.heightInPx) {\n                    return;\n                }\n                const scrollAdjustment = newHeight - viewZone.heightInPx;\n                viewZone.heightInPx = newHeight;\n                accessor.layoutZone(this._viewZoneId);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n                return;\n            }\n            else {\n                let scrollAdjustment = this._getHeight();\n                // if the editor has top padding, factor that into the zone height\n                scrollAdjustment -= this._codeEditor.getOption(82 /* EditorOption.padding */).top;\n                if (scrollAdjustment <= 0) {\n                    return;\n                }\n                viewZone.heightInPx = scrollAdjustment;\n                this._viewZoneId = accessor.addZone(viewZone);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n            }\n        });\n    }\n    _removeViewZone() {\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                accessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n                if (this._viewZone) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n                    this._viewZone = undefined;\n                }\n            }\n        });\n    }\n    _tryUpdateWidgetWidth() {\n        if (!this._isVisible) {\n            return;\n        }\n        if (!dom.isInDOM(this._domNode)) {\n            // the widget is not in the DOM\n            return;\n        }\n        const layoutInfo = this._codeEditor.getLayoutInfo();\n        const editorContentWidth = layoutInfo.contentWidth;\n        if (editorContentWidth <= 0) {\n            // for example, diff view original editor\n            this._domNode.classList.add('hiddenEditor');\n            return;\n        }\n        else if (this._domNode.classList.contains('hiddenEditor')) {\n            this._domNode.classList.remove('hiddenEditor');\n        }\n        const editorWidth = layoutInfo.width;\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\n        let collapsedFindWidget = false;\n        let reducedFindWidget = false;\n        let narrowFindWidget = false;\n        if (this._resized) {\n            const widgetWidth = dom.getTotalWidth(this._domNode);\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                return;\n            }\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n            reducedFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n            narrowFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n            collapsedFindWidget = true;\n        }\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        if (!narrowFindWidget && !collapsedFindWidget) {\n            // the minimal left offset of findwidget is 15px.\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n        }\n        this._findInput.layout({ collapsedFindWidget, narrowFindWidget, reducedFindWidget });\n        if (this._resized) {\n            const findInputWidth = this._findInput.inputBox.element.clientWidth;\n            if (findInputWidth > 0) {\n                this._replaceInput.width = findInputWidth;\n            }\n        }\n        else if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n    }\n    _getHeight() {\n        let totalheight = 0;\n        // find input margin top\n        totalheight += 4;\n        // find input height\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n        if (this._isReplaceVisible) {\n            // replace input margin\n            totalheight += 4;\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n        }\n        // margin bottom\n        totalheight += 4;\n        return totalheight;\n    }\n    _tryUpdateHeight() {\n        const totalHeight = this._getHeight();\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n            return false;\n        }\n        this._cachedHeight = totalHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        return true;\n    }\n    // ----- Public\n    focusFindInput() {\n        this._findInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._findInput.focus();\n    }\n    focusReplaceInput() {\n        this._replaceInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n        this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n        if (!this._codeEditor.hasModel()) {\n            return;\n        }\n        if (this._toggleSelectionFind.checked) {\n            const selections = this._codeEditor.getSelections();\n            selections.map(selection => {\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                }\n                const currentMatch = this._state.currentMatch;\n                if (selection.startLineNumber !== selection.endLineNumber) {\n                    if (!Range.equalsRange(selection, currentMatch)) {\n                        return selection;\n                    }\n                }\n                return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n                this._state.change({ searchScope: selections }, true);\n            }\n        }\n    }\n    _onFindInputMouseDown(e) {\n        // on linux, middle key does pasting.\n        if (e.middleButton) {\n            e.stopPropagation();\n        }\n    }\n    _onFindInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                this._findInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            if (this._isReplaceVisible) {\n                this._replaceInput.focus();\n            }\n            else {\n                this._findInput.focusOnCaseSensitive();\n            }\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n    }\n    _onReplaceInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n                    // this is the first time when users press Ctrl + Enter to replace all\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n                }\n                this._replaceInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            this._findInput.focusOnCaseSensitive();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            this._findInput.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n        return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n        const flexibleHeight = true;\n        const flexibleWidth = true;\n        // Find input\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n            width: FIND_INPUT_AREA_WIDTH,\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    // use `g` and `u` which are also used by the TextModel search\n                    new RegExp(value, 'gu');\n                    return null;\n                }\n                catch (e) {\n                    return { content: e.message };\n                }\n            },\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showCommonFindToggles: true,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n            inputBoxStyles: defaultInputBoxStyles,\n            toggleStyles: defaultToggleStyles\n        }, this._contextKeyService));\n        this._findInput.setRegex(!!this._state.isRegex);\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\n        this._findInput.setWholeWords(!!this._state.wholeWord);\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n        this._register(this._findInput.inputBox.onDidChange(() => {\n            if (this._ignoreChangeEvent) {\n                return;\n            }\n            this._state.change({ searchString: this._findInput.getValue() }, true);\n        }));\n        this._register(this._findInput.onDidOptionChange(() => {\n            this._state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n            if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.onRegexKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focusOnPreserve();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        if (platform.isLinux) {\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n        }\n        this._matchesCount = document.createElement('div');\n        this._matchesCount.className = 'matchesCount';\n        this._updateMatchesCount();\n        // Previous button\n        this._prevBtn = this._register(new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n            icon: findPreviousMatchIcon,\n            onTrigger: () => {\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction)).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        // Next button\n        this._nextBtn = this._register(new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n            icon: findNextMatchIcon,\n            onTrigger: () => {\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.NextMatchFindAction)).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        const findPart = document.createElement('div');\n        findPart.className = 'find-part';\n        findPart.appendChild(this._findInput.domNode);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'find-actions';\n        findPart.appendChild(actionsContainer);\n        actionsContainer.appendChild(this._matchesCount);\n        actionsContainer.appendChild(this._prevBtn.domNode);\n        actionsContainer.appendChild(this._nextBtn.domNode);\n        // Toggle selection button\n        this._toggleSelectionFind = this._register(new Toggle({\n            icon: findSelectionIcon,\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n            isChecked: false,\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n        }));\n        this._register(this._toggleSelectionFind.onChange(() => {\n            if (this._toggleSelectionFind.checked) {\n                if (this._codeEditor.hasModel()) {\n                    const selections = this._codeEditor.getSelections();\n                    selections.map(selection => {\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                        }\n                        if (!selection.isEmpty()) {\n                            return selection;\n                        }\n                        return null;\n                    }).filter(element => !!element);\n                    if (selections.length) {\n                        this._state.change({ searchScope: selections }, true);\n                    }\n                }\n            }\n            else {\n                this._state.change({ searchScope: null }, true);\n            }\n        }));\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n        // Close button\n        this._closeBtn = this._register(new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n            icon: widgetClose,\n            onTrigger: () => {\n                this._state.change({ isRevealed: false, searchScope: null }, false);\n            },\n            onKeyDown: (e) => {\n                if (e.equals(2 /* KeyCode.Tab */)) {\n                    if (this._isReplaceVisible) {\n                        if (this._replaceBtn.isEnabled()) {\n                            this._replaceBtn.focus();\n                        }\n                        else {\n                            this._codeEditor.focus();\n                        }\n                        e.preventDefault();\n                    }\n                }\n            }\n        }));\n        // Replace input\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n            label: NLS_REPLACE_INPUT_LABEL,\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n            history: [],\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n            inputBoxStyles: defaultInputBoxStyles,\n            toggleStyles: defaultToggleStyles\n        }, this._contextKeyService, true));\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n        }));\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        this._register(this._replaceInput.onDidOptionChange(() => {\n            this._state.change({\n                preserveCase: this._replaceInput.getPreserveCase()\n            }, true);\n        }));\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._prevBtn.isEnabled()) {\n                    this._prevBtn.focus();\n                }\n                else if (this._nextBtn.isEnabled()) {\n                    this._nextBtn.focus();\n                }\n                else if (this._toggleSelectionFind.enabled) {\n                    this._toggleSelectionFind.focus();\n                }\n                else if (this._closeBtn.isEnabled()) {\n                    this._closeBtn.focus();\n                }\n                e.preventDefault();\n            }\n        }));\n        // Replace one button\n        this._replaceBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n            icon: findReplaceIcon,\n            onTrigger: () => {\n                this._controller.replace();\n            },\n            onKeyDown: (e) => {\n                if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                    this._closeBtn.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        // Replace all button\n        this._replaceAllBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n            icon: findReplaceAllIcon,\n            onTrigger: () => {\n                this._controller.replaceAll();\n            }\n        }));\n        const replacePart = document.createElement('div');\n        replacePart.className = 'replace-part';\n        replacePart.appendChild(this._replaceInput.domNode);\n        const replaceActionsContainer = document.createElement('div');\n        replaceActionsContainer.className = 'replace-actions';\n        replacePart.appendChild(replaceActionsContainer);\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n        // Toggle replace button\n        this._toggleReplaceBtn = this._register(new SimpleButton({\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n            className: 'codicon toggle left',\n            onTrigger: () => {\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n                if (this._isReplaceVisible) {\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._replaceInput.inputBox.layout();\n                }\n                this._showViewZone();\n            }\n        }));\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        // Widget\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'editor-widget find-widget';\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._domNode.ariaLabel = NLS_FIND_DIALOG_LABEL;\n        this._domNode.role = 'dialog';\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n        this._domNode.appendChild(findPart);\n        this._domNode.appendChild(this._closeBtn.domNode);\n        this._domNode.appendChild(replacePart);\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* Orientation.VERTICAL */, size: 2 });\n        this._resized = false;\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n        this._register(this._resizeSash.onDidStart(() => {\n            originalWidth = dom.getTotalWidth(this._domNode);\n        }));\n        this._register(this._resizeSash.onDidChange((evt) => {\n            this._resized = true;\n            const width = originalWidth + evt.startX - evt.currentX;\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\n                // narrow down the find widget should be handled by CSS.\n                return;\n            }\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n            if (width > maxWidth) {\n                return;\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n            this._tryUpdateHeight();\n        }));\n        this._register(this._resizeSash.onDidReset(() => {\n            // users double click on the sash\n            const currentWidth = dom.getTotalWidth(this._domNode);\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\n                return;\n            }\n            let width = FIND_WIDGET_INITIAL_WIDTH;\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n                // 1. never resized before, double click should maximizes it\n                // 2. users resized it already but its width is the same as default\n                const layoutInfo = this._codeEditor.getLayoutInfo();\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n                this._resized = true;\n            }\n            else {\n                /**\n                 * no op, the find widget should be shrinked to its default size.\n                 */\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n        }));\n    }\n    updateAccessibilitySupport() {\n        const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n    getViewState() {\n        let widgetViewZoneVisible = false;\n        if (this._viewZone && this._viewZoneId) {\n            widgetViewZoneVisible = this._viewZone.heightInPx > this._codeEditor.getScrollTop();\n        }\n        return {\n            widgetViewZoneVisible,\n            scrollTop: this._codeEditor.getScrollTop()\n        };\n    }\n    setViewState(state) {\n        if (!state) {\n            return;\n        }\n        if (state.widgetViewZoneVisible) {\n            // we should add the view zone\n            this._layoutViewZone(state.scrollTop);\n        }\n    }\n}\nFindWidget.ID = 'editor.contrib.findWidget';\nexport class SimpleButton extends Widget {\n    constructor(opts) {\n        super();\n        this._opts = opts;\n        let className = 'button';\n        if (this._opts.className) {\n            className = className + ' ' + this._opts.className;\n        }\n        if (this._opts.icon) {\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n        }\n        this._domNode = document.createElement('div');\n        this._domNode.title = this._opts.label;\n        this._domNode.tabIndex = 0;\n        this._domNode.className = className;\n        this._domNode.setAttribute('role', 'button');\n        this._domNode.setAttribute('aria-label', this._opts.label);\n        this.onclick(this._domNode, (e) => {\n            this._opts.onTrigger();\n            e.preventDefault();\n        });\n        this.onkeydown(this._domNode, (e) => {\n            var _a, _b;\n            if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n                this._opts.onTrigger();\n                e.preventDefault();\n                return;\n            }\n            (_b = (_a = this._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    isEnabled() {\n        return (this._domNode.tabIndex >= 0);\n    }\n    focus() {\n        this._domNode.focus();\n    }\n    setEnabled(enabled) {\n        this._domNode.classList.toggle('disabled', !enabled);\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\n        this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n    setExpanded(expanded) {\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\n        if (expanded) {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n        }\n        else {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n        }\n    }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    addBackgroundColorRule('.find-widget', widgetBackground);\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const widgetBorderColor = theme.getColor(widgetBorder);\n    if (widgetBorderColor) {\n        collector.addRule(`.monaco-editor .find-widget { border-left: 1px solid ${widgetBorderColor}; border-right: 1px solid ${widgetBorderColor}; border-bottom: 1px solid ${widgetBorderColor}; }`);\n    }\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const findMatchBorder = theme.getColor(editorFindMatchBorder);\n    if (findMatchBorder) {\n        collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\n    }\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n    if (findRangeHighlightBorder) {\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n    }\n    const foreground = theme.getColor(editorWidgetForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\n    }\n    const error = theme.getColor(errorForeground);\n    if (error) {\n        collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\n    }\n    const resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n    if (resizeBorderBackground) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\n    }\n    else {\n        const border = theme.getColor(editorWidgetBorder);\n        if (border) {\n            collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\n        }\n    }\n    // Action bars\n    const toolbarHoverBackgroundColor = theme.getColor(toolbarHoverBackground);\n    if (toolbarHoverBackgroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\n\t\t}\n\t`);\n    }\n    // This rule is used to override the outline color for synthetic-focus find input.\n    const focusOutline = theme.getColor(focusBorder);\n    if (focusOutline) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './browser/coreCommands.js';\nimport './browser/widget/codeEditorWidget.js';\nimport './browser/widget/diffEditorWidget.js';\nimport './browser/widget/diffNavigator.js';\nimport './contrib/anchorSelect/browser/anchorSelect.js';\nimport './contrib/bracketMatching/browser/bracketMatching.js';\nimport './contrib/caretOperations/browser/caretOperations.js';\nimport './contrib/caretOperations/browser/transpose.js';\nimport './contrib/clipboard/browser/clipboard.js';\nimport './contrib/codeAction/browser/codeActionContributions.js';\nimport './contrib/codelens/browser/codelensController.js';\nimport './contrib/colorPicker/browser/colorContributions.js';\nimport './contrib/colorPicker/browser/standaloneColorPickerActions.js';\nimport './contrib/comment/browser/comment.js';\nimport './contrib/contextmenu/browser/contextmenu.js';\nimport './contrib/cursorUndo/browser/cursorUndo.js';\nimport './contrib/dnd/browser/dnd.js';\nimport './contrib/dropOrPasteInto/browser/copyPasteContribution.js';\nimport './contrib/dropOrPasteInto/browser/dropIntoEditorContribution.js';\nimport './contrib/find/browser/findController.js';\nimport './contrib/folding/browser/folding.js';\nimport './contrib/fontZoom/browser/fontZoom.js';\nimport './contrib/format/browser/formatActions.js';\nimport './contrib/documentSymbols/browser/documentSymbols.js';\nimport './contrib/inlineCompletions/browser/inlineCompletions.contribution.js';\nimport './contrib/inlineProgress/browser/inlineProgress.js';\nimport './contrib/gotoSymbol/browser/goToCommands.js';\nimport './contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport './contrib/gotoError/browser/gotoError.js';\nimport './contrib/hover/browser/hover.js';\nimport './contrib/indentation/browser/indentation.js';\nimport './contrib/inlayHints/browser/inlayHintsContribution.js';\nimport './contrib/inPlaceReplace/browser/inPlaceReplace.js';\nimport './contrib/lineSelection/browser/lineSelection.js';\nimport './contrib/linesOperations/browser/linesOperations.js';\nimport './contrib/linkedEditing/browser/linkedEditing.js';\nimport './contrib/links/browser/links.js';\nimport './contrib/longLinesHelper/browser/longLinesHelper.js';\nimport './contrib/multicursor/browser/multicursor.js';\nimport './contrib/parameterHints/browser/parameterHints.js';\nimport './contrib/rename/browser/rename.js';\nimport './contrib/semanticTokens/browser/documentSemanticTokens.js';\nimport './contrib/semanticTokens/browser/viewportSemanticTokens.js';\nimport './contrib/smartSelect/browser/smartSelect.js';\nimport './contrib/snippet/browser/snippetController2.js';\nimport './contrib/stickyScroll/browser/stickyScrollContribution.js';\nimport './contrib/suggest/browser/suggestController.js';\nimport './contrib/suggest/browser/suggestInlineCompletions.js';\nimport './contrib/tokenization/browser/tokenization.js';\nimport './contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport './contrib/unicodeHighlighter/browser/unicodeHighlighter.js';\nimport './contrib/unusualLineTerminators/browser/unusualLineTerminators.js';\nimport './contrib/wordHighlighter/browser/wordHighlighter.js';\nimport './contrib/wordOperations/browser/wordOperations.js';\nimport './contrib/wordPartOperations/browser/wordPartOperations.js';\nimport './contrib/readOnlyMessage/browser/contribution.js';\n// Load up these strings even in VSCode, even if they are not used\n// in order to get them translated\nimport './common/standaloneStrings.js';\nimport '../base/browser/ui/codicons/codiconStyles.js'; // The codicons are defined here and must be loaded\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { TriggerInlineSuggestionAction, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, AcceptNextWordOfInlineCompletion, AcceptInlineCompletion, HideInlineCompletion, ToggleAlwaysShowInlineSuggestionToolbar, AcceptNextLineOfInlineCompletion } from './commands.js';\nimport { InlineCompletionsHoverParticipant } from './hoverParticipant.js';\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(InlineCompletionsController.ID, InlineCompletionsController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorAction(TriggerInlineSuggestionAction);\nregisterEditorAction(ShowNextInlineSuggestionAction);\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\nregisterEditorAction(AcceptNextWordOfInlineCompletion);\nregisterEditorAction(AcceptNextLineOfInlineCompletion);\nregisterEditorAction(AcceptInlineCompletion);\nregisterEditorAction(HideInlineCompletion);\nregisterAction2(ToggleAlwaysShowInlineSuggestionToolbar);\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { transaction } from '../../../../base/common/observable.js';\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { showNextInlineSuggestionActionId, showPreviousInlineSuggestionActionId, inlineSuggestCommitId } from './commandIds.js';\nimport { InlineCompletionContextKeys } from './inlineCompletionContextKeys.js';\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\nimport { Context as SuggestContext } from '../../suggest/browser/suggest.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, Action2 } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nexport class ShowNextInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowNextInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\n            alias: 'Show Next Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 94 /* KeyCode.BracketRight */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.next();\n        });\n    }\n}\nShowNextInlineSuggestionAction.ID = showNextInlineSuggestionActionId;\nexport class ShowPreviousInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowPreviousInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\n            alias: 'Show Previous Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 92 /* KeyCode.BracketLeft */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.previous();\n        });\n    }\n}\nShowPreviousInlineSuggestionAction.ID = showPreviousInlineSuggestionActionId;\nexport class TriggerInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.trigger',\n            label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\n            alias: 'Trigger Inline Suggestion',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.triggerExplicitly();\n        });\n    }\n}\nexport class AcceptNextWordOfInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.acceptNextWord',\n            label: nls.localize('action.inlineSuggest.acceptNextWord', \"Accept Next Word Of Inline Suggestion\"),\n            alias: 'Accept Next Word Of Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            },\n            menuOpts: [{\n                    menuId: MenuId.InlineSuggestionToolbar,\n                    title: nls.localize('acceptWord', 'Accept Word'),\n                    group: 'primary',\n                    order: 2,\n                }],\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            yield ((_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.acceptNextWord(controller.editor));\n        });\n    }\n}\nexport class AcceptNextLineOfInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.acceptNextLine',\n            label: nls.localize('action.inlineSuggest.acceptNextLine', \"Accept Next Line Of Inline Suggestion\"),\n            alias: 'Accept Next Line Of Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, InlineCompletionContextKeys.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */ + 1,\n            },\n            menuOpts: [{\n                    menuId: MenuId.InlineSuggestionToolbar,\n                    title: nls.localize('acceptLine', 'Accept Line'),\n                    group: 'secondary',\n                    order: 2,\n                }],\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            yield ((_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.acceptNextLine(controller.editor));\n        });\n    }\n}\nexport class AcceptInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: inlineSuggestCommitId,\n            label: nls.localize('action.inlineSuggest.accept', \"Accept Inline Suggestion\"),\n            alias: 'Accept Inline Suggestion',\n            precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\n            menuOpts: [{\n                    menuId: MenuId.InlineSuggestionToolbar,\n                    title: nls.localize('accept', \"Accept\"),\n                    group: 'primary',\n                    order: 1,\n                }],\n            kbOpts: {\n                primary: 2 /* KeyCode.Tab */,\n                weight: 200,\n                kbExpr: ContextKeyExpr.and(InlineCompletionContextKeys.inlineSuggestionVisible, EditorContextKeys.tabMovesFocus.toNegated(), InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize, SuggestContext.Visible.toNegated(), EditorContextKeys.hoverFocused.toNegated()),\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            if (controller) {\n                (_a = controller.model.get()) === null || _a === void 0 ? void 0 : _a.accept(controller.editor);\n                controller.editor.focus();\n            }\n        });\n    }\n}\nexport class HideInlineCompletion extends EditorAction {\n    constructor() {\n        super({\n            id: HideInlineCompletion.ID,\n            label: nls.localize('action.inlineSuggest.hide', \"Hide Inline Suggestion\"),\n            alias: 'Hide Inline Suggestion',\n            precondition: InlineCompletionContextKeys.inlineSuggestionVisible,\n            kbOpts: {\n                weight: 100,\n                primary: 9 /* KeyCode.Escape */,\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = InlineCompletionsController.get(editor);\n            transaction(tx => {\n                var _a;\n                (_a = controller === null || controller === void 0 ? void 0 : controller.model.get()) === null || _a === void 0 ? void 0 : _a.stop(tx);\n            });\n        });\n    }\n}\nHideInlineCompletion.ID = 'editor.action.inlineSuggest.hide';\nexport class ToggleAlwaysShowInlineSuggestionToolbar extends Action2 {\n    constructor() {\n        super({\n            id: ToggleAlwaysShowInlineSuggestionToolbar.ID,\n            title: nls.localize('action.inlineSuggest.alwaysShowToolbar', \"Always Show Toolbar\"),\n            f1: false,\n            precondition: undefined,\n            menu: [{\n                    id: MenuId.InlineSuggestionToolbar,\n                    group: 'secondary',\n                    order: 10,\n                }],\n            toggled: ContextKeyExpr.equals('config.editor.inlineSuggest.showToolbar', 'always')\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configService = accessor.get(IConfigurationService);\n            const currentValue = configService.getValue('editor.inlineSuggest.showToolbar');\n            const newValue = currentValue === 'always' ? 'onHover' : 'always';\n            configService.updateValue('editor.inlineSuggest.showToolbar', newValue);\n        });\n    }\n}\nToggleAlwaysShowInlineSuggestionToolbar.ID = 'editor.action.inlineSuggest.toggleAlwaysShowToolbar';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable } from '../../../../base/common/observable.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { InlineCompletionsController } from './inlineCompletionsController.js';\nimport { InlineSuggestionHintsContentWidget } from './inlineCompletionsHintsWidget.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nexport class InlineCompletionsHover {\n    constructor(owner, range, controller) {\n        this.owner = owner;\n        this.range = range;\n        this.controller = controller;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\n    constructor(_editor, _languageService, _openerService, accessibilityService, _instantiationService, _telemetryService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.accessibilityService = accessibilityService;\n        this._instantiationService = _instantiationService;\n        this._telemetryService = _telemetryService;\n        this.hoverOrdinal = 4;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        const controller = InlineCompletionsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        const target = mouseEvent.target;\n        if (target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            // handle the case where the mouse is over the view zone\n            const viewZoneData = target.detail;\n            if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\n                return new HoverForeignElementAnchor(1000, this, Range.fromPositions(this._editor.getModel().validatePosition(viewZoneData.positionBefore || viewZoneData.position)), mouseEvent.event.posx, mouseEvent.event.posy, false);\n            }\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            // handle the case where the mouse is over the empty portion of a line following ghost text\n            if (controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\n            }\n        }\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            // handle the case where the mouse is directly over ghost text\n            const mightBeForeignElement = target.detail.mightBeForeignElement;\n            if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range, mouseEvent.event.posx, mouseEvent.event.posy, false);\n            }\n        }\n        return null;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (this._editor.getOption(61 /* EditorOption.inlineSuggest */).showToolbar === 'always') {\n            return [];\n        }\n        const controller = InlineCompletionsController.get(this._editor);\n        if (controller && controller.shouldShowHoverAt(anchor.range)) {\n            return [new InlineCompletionsHover(this, anchor.range, controller)];\n        }\n        return [];\n    }\n    renderHoverParts(context, hoverParts) {\n        const disposableStore = new DisposableStore();\n        const part = hoverParts[0];\n        this._telemetryService.publicLog2('inlineCompletionHover.shown');\n        if (this.accessibilityService.isScreenReaderOptimized() && !this._editor.getOption(7 /* EditorOption.screenReaderAnnounceInlineSuggestion */)) {\n            this.renderScreenReaderText(context, part, disposableStore);\n        }\n        const model = part.controller.model.get();\n        const w = this._instantiationService.createInstance(InlineSuggestionHintsContentWidget, this._editor, false, constObservable(null), model.selectedInlineCompletionIndex, model.inlineCompletionsCount, model.selectedInlineCompletion.map(v => { var _a; return (_a = v === null || v === void 0 ? void 0 : v.inlineCompletion.source.inlineCompletions.commands) !== null && _a !== void 0 ? _a : []; }));\n        context.fragment.appendChild(w.getDomNode());\n        model.triggerExplicitly();\n        disposableStore.add(w);\n        return disposableStore;\n    }\n    renderScreenReaderText(context, part, disposableStore) {\n        const $ = dom.$;\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents', { ['aria-live']: 'assertive' }));\n        const renderer = disposableStore.add(new MarkdownRenderer({ editor: this._editor }, this._languageService, this._openerService));\n        const render = (code) => {\n            disposableStore.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\n            const renderedContents = disposableStore.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\n            hoverContentsElement.replaceChildren(renderedContents.element);\n        };\n        disposableStore.add(autorun(reader => {\n            var _a;\n            /** @description update hover */\n            const ghostText = (_a = part.controller.model.read(reader)) === null || _a === void 0 ? void 0 : _a.ghostText.read(reader);\n            if (ghostText) {\n                const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\n                render(ghostText.renderForScreenReader(lineText));\n            }\n            else {\n                dom.reset(hoverContentsElement);\n            }\n        }));\n        context.fragment.appendChild(markdownHoverElement);\n    }\n};\nInlineCompletionsHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IAccessibilityService),\n    __param(4, IInstantiationService),\n    __param(5, ITelemetryService)\n], InlineCompletionsHoverParticipant);\nexport { InlineCompletionsHoverParticipant };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from './indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { normalizeIndentation } from '../../../common/core/indentation.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nexport function getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber, inheritedIndent) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return [];\n    }\n    const indentationRules = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).indentationRules;\n    if (!indentationRules) {\n        return [];\n    }\n    endLineNumber = Math.min(endLineNumber, model.getLineCount());\n    // Skip `unIndentedLinePattern` lines\n    while (startLineNumber <= endLineNumber) {\n        if (!indentationRules.unIndentedLinePattern) {\n            break;\n        }\n        const text = model.getLineContent(startLineNumber);\n        if (!indentationRules.unIndentedLinePattern.test(text)) {\n            break;\n        }\n        startLineNumber++;\n    }\n    if (startLineNumber > endLineNumber - 1) {\n        return [];\n    }\n    const { tabSize, indentSize, insertSpaces } = model.getOptions();\n    const shiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.shiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const unshiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const indentEdits = [];\n    // indentation being passed to lines below\n    let globalIndent;\n    // Calculate indentation for the first line\n    // If there is no passed-in indentation, we use the indentation of the first line as base.\n    const currentLineText = model.getLineContent(startLineNumber);\n    let adjustedLineContent = currentLineText;\n    if (inheritedIndent !== undefined && inheritedIndent !== null) {\n        globalIndent = inheritedIndent;\n        const oldIndentation = strings.getLeadingWhitespace(currentLineText);\n        adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = unshiftIndent(globalIndent);\n            adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        }\n        if (currentLineText !== adjustedLineContent) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(startLineNumber, 1, startLineNumber, oldIndentation.length + 1), normalizeIndentation(globalIndent, indentSize, insertSpaces)));\n        }\n    }\n    else {\n        globalIndent = strings.getLeadingWhitespace(currentLineText);\n    }\n    // idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.\n    let idealIndentForNextLine = globalIndent;\n    if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        globalIndent = shiftIndent(globalIndent);\n    }\n    else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n    }\n    startLineNumber++;\n    // Calculate indentation adjustment for all following lines\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        const text = model.getLineContent(lineNumber);\n        const oldIndentation = strings.getLeadingWhitespace(text);\n        const adjustedLineContent = idealIndentForNextLine + text.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = unshiftIndent(idealIndentForNextLine);\n            globalIndent = unshiftIndent(globalIndent);\n        }\n        if (oldIndentation !== idealIndentForNextLine) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(lineNumber, 1, lineNumber, oldIndentation.length + 1), normalizeIndentation(idealIndentForNextLine, indentSize, insertSpaces)));\n        }\n        // calculate idealIndentForNextLine\n        if (indentationRules.unIndentedLinePattern && indentationRules.unIndentedLinePattern.test(text)) {\n            // In reindent phase, if the line matches `unIndentedLinePattern` we inherit indentation from above lines\n            // but don't change globalIndent and idealIndentForNextLine.\n            continue;\n        }\n        else if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = shiftIndent(globalIndent);\n            idealIndentForNextLine = globalIndent;\n        }\n        else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        }\n        else {\n            idealIndentForNextLine = globalIndent;\n        }\n    }\n    return indentEdits;\n}\nexport class IndentationToSpacesAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToSpacesAction.ID,\n            label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n            alias: 'Convert Indentation to Spaces',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: true\n        });\n    }\n}\nIndentationToSpacesAction.ID = 'editor.action.indentationToSpaces';\nexport class IndentationToTabsAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToTabsAction.ID,\n            label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n            alias: 'Convert Indentation to Tabs',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: false\n        });\n    }\n}\nIndentationToTabsAction.ID = 'editor.action.indentationToTabs';\nexport class ChangeIndentationSizeAction extends EditorAction {\n    constructor(insertSpaces, displaySizeOnly, opts) {\n        super(opts);\n        this.insertSpaces = insertSpaces;\n        this.displaySizeOnly = displaySizeOnly;\n    }\n    run(accessor, editor) {\n        const quickInputService = accessor.get(IQuickInputService);\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        const modelOpts = model.getOptions();\n        const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n            id: n.toString(),\n            label: n.toString(),\n            // add description for tabSize value set in the configuration\n            description: (n === creationOpts.tabSize && n === modelOpts.tabSize\n                ? nls.localize('configuredTabSize', \"Configured Tab Size\")\n                : n === creationOpts.tabSize\n                    ? nls.localize('defaultTabSize', \"Default Tab Size\")\n                    : n === modelOpts.tabSize\n                        ? nls.localize('currentTabSize', \"Current Tab Size\")\n                        : undefined)\n        }));\n        // auto focus the tabSize set for the current editor\n        const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n        setTimeout(() => {\n            quickInputService.pick(picks, { placeHolder: nls.localize({ key: 'selectTabWidth', comment: ['Tab corresponds to the tab key'] }, \"Select Tab Size for Current File\"), activeItem: picks[autoFocusIndex] }).then(pick => {\n                if (pick) {\n                    if (model && !model.isDisposed()) {\n                        const pickedVal = parseInt(pick.label, 10);\n                        if (this.displaySizeOnly) {\n                            model.updateOptions({\n                                tabSize: pickedVal\n                            });\n                        }\n                        else {\n                            model.updateOptions({\n                                tabSize: pickedVal,\n                                indentSize: pickedVal,\n                                insertSpaces: this.insertSpaces\n                            });\n                        }\n                    }\n                }\n            });\n        }, 50 /* quick input is sensitive to being opened so soon after another */);\n    }\n}\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\n    constructor() {\n        super(false, false, {\n            id: IndentUsingTabs.ID,\n            label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n            alias: 'Indent Using Tabs',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingTabs.ID = 'editor.action.indentUsingTabs';\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\n    constructor() {\n        super(true, false, {\n            id: IndentUsingSpaces.ID,\n            label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n            alias: 'Indent Using Spaces',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingSpaces.ID = 'editor.action.indentUsingSpaces';\nexport class ChangeTabDisplaySize extends ChangeIndentationSizeAction {\n    constructor() {\n        super(true, true, {\n            id: ChangeTabDisplaySize.ID,\n            label: nls.localize('changeTabDisplaySize', \"Change Tab Display Size\"),\n            alias: 'Change Tab Display Size',\n            precondition: undefined\n        });\n    }\n}\nChangeTabDisplaySize.ID = 'editor.action.changeTabDisplaySize';\nexport class DetectIndentation extends EditorAction {\n    constructor() {\n        super({\n            id: DetectIndentation.ID,\n            label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n            alias: 'Detect Indentation from Content',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n    }\n}\nDetectIndentation.ID = 'editor.action.detectIndentation';\nexport class ReindentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentlines',\n            label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n            alias: 'Reindent Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentselectedlines',\n            label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n            alias: 'Reindent Selected Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const edits = [];\n        for (const selection of selections) {\n            let startLineNumber = selection.startLineNumber;\n            let endLineNumber = selection.endLineNumber;\n            if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n                endLineNumber--;\n            }\n            if (startLineNumber === 1) {\n                if (startLineNumber === endLineNumber) {\n                    continue;\n                }\n            }\n            else {\n                startLineNumber--;\n            }\n            const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n            edits.push(...editOperations);\n        }\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class AutoIndentOnPasteCommand {\n    constructor(edits, initialSelection) {\n        this._initialSelection = initialSelection;\n        this._edits = [];\n        this._selectionId = null;\n        for (const edit of edits) {\n            if (edit.range && typeof edit.text === 'string') {\n                this._edits.push(edit);\n            }\n        }\n    }\n    getEditOperations(model, builder) {\n        for (const edit of this._edits) {\n            builder.addEditOperation(Range.lift(edit.range), edit.text);\n        }\n        let selectionIsSet = false;\n        if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n            if (this._edits[0].range.startColumn === this._initialSelection.endColumn &&\n                this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, true);\n            }\n            else if (this._edits[0].range.endColumn === this._initialSelection.startColumn &&\n                this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, false);\n            }\n        }\n        if (!selectionIsSet) {\n            this._selectionId = builder.trackSelection(this._initialSelection);\n        }\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\nlet AutoIndentOnPaste = class AutoIndentOnPaste {\n    constructor(editor, _languageConfigurationService) {\n        this.editor = editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.callOnDispose = new DisposableStore();\n        this.callOnModel = new DisposableStore();\n        this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n    }\n    update() {\n        // clean up\n        this.callOnModel.clear();\n        // we are disabled\n        if (this.editor.getOption(11 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(54 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        this.callOnModel.add(this.editor.onDidPaste(({ range }) => {\n            this.trigger(range);\n        }));\n    }\n    trigger(range) {\n        const selections = this.editor.getSelections();\n        if (selections === null || selections.length > 1) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n            return;\n        }\n        const autoIndent = this.editor.getOption(11 /* EditorOption.autoIndent */);\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const textEdits = [];\n        const indentConverter = {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n        let startLineNumber = range.startLineNumber;\n        while (startLineNumber <= range.endLineNumber) {\n            if (this.shouldIgnoreLine(model, startLineNumber)) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber > range.endLineNumber) {\n            return;\n        }\n        let firstLineText = model.getLineContent(startLineNumber);\n        if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n            const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\n            if (indentOfFirstLine !== null) {\n                const oldIndentation = strings.getLeadingWhitespace(firstLineText);\n                const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                if (newSpaceCnt !== oldSpaceCnt) {\n                    const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                    textEdits.push({\n                        range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n                        text: newIndent\n                    });\n                    firstLineText = newIndent + firstLineText.substr(oldIndentation.length);\n                }\n                else {\n                    const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\n                    if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\n                        // we paste content into a line where only contains whitespaces\n                        // after pasting, the indentation of the first line is already correct\n                        // the first line doesn't match any indentation rule\n                        // then no-op.\n                        return;\n                    }\n                }\n            }\n        }\n        const firstLineNumber = startLineNumber;\n        // ignore empty or ignored lines\n        while (startLineNumber < range.endLineNumber) {\n            if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber !== range.endLineNumber) {\n            const virtualModel = {\n                tokenization: {\n                    getLineTokens: (lineNumber) => {\n                        return model.tokenization.getLineTokens(lineNumber);\n                    },\n                    getLanguageId: () => {\n                        return model.getLanguageId();\n                    },\n                    getLanguageIdAtPosition: (lineNumber, column) => {\n                        return model.getLanguageIdAtPosition(lineNumber, column);\n                    },\n                },\n                getLineContent: (lineNumber) => {\n                    if (lineNumber === firstLineNumber) {\n                        return firstLineText;\n                    }\n                    else {\n                        return model.getLineContent(lineNumber);\n                    }\n                }\n            };\n            const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\n            if (indentOfSecondLine !== null) {\n                const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n                const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n                if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n                    const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n                    for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n                        const lineContent = model.getLineContent(i);\n                        const originalIndent = strings.getLeadingWhitespace(lineContent);\n                        const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n                        const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n                        const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n                        if (newIndent !== originalIndent) {\n                            textEdits.push({\n                                range: new Range(i, 1, i, originalIndent.length + 1),\n                                text: newIndent\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        if (textEdits.length > 0) {\n            this.editor.pushUndoStop();\n            const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n            this.editor.executeCommand('autoIndentOnPaste', cmd);\n            this.editor.pushUndoStop();\n        }\n    }\n    shouldIgnoreLine(model, lineNumber) {\n        model.tokenization.forceTokenization(lineNumber);\n        const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (nonWhitespaceColumn === 0) {\n            return true;\n        }\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        if (tokens.getCount() > 0) {\n            const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n            if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        this.callOnDispose.dispose();\n        this.callOnModel.dispose();\n    }\n};\nAutoIndentOnPaste.ID = 'editor.contrib.autoIndentOnPaste';\nAutoIndentOnPaste = __decorate([\n    __param(1, ILanguageConfigurationService)\n], AutoIndentOnPaste);\nexport { AutoIndentOnPaste };\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return;\n    }\n    let spaces = '';\n    for (let i = 0; i < tabSize; i++) {\n        spaces += ' ';\n    }\n    const spacesRegExp = new RegExp(spaces, 'gi');\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (lastIndentationColumn === 0) {\n            lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n        }\n        if (lastIndentationColumn === 1) {\n            continue;\n        }\n        const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n        const originalIndentation = model.getValueInRange(originalIndentationRange);\n        const newIndentation = (tabsToSpaces\n            ? originalIndentation.replace(/\\t/ig, spaces)\n            : originalIndentation.replace(spacesRegExp, '\\t'));\n        builder.addEditOperation(originalIndentationRange, newIndentation);\n    }\n}\nexport class IndentationToSpacesCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, true);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nexport class IndentationToTabsCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, false);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(ChangeTabDisplaySize);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function getSpaceCnt(str, tabSize) {\n    let spacesCnt = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str.charAt(i) === '\\t') {\n            spacesCnt += tabSize;\n        }\n        else {\n            spacesCnt++;\n        }\n    }\n    return spacesCnt;\n}\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\n    spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\n    let result = '';\n    if (!insertSpaces) {\n        const tabsCnt = Math.floor(spacesCnt / tabSize);\n        spacesCnt = spacesCnt % tabSize;\n        for (let i = 0; i < tabsCnt; i++) {\n            result += '\\t';\n        }\n    }\n    for (let i = 0; i < spacesCnt; i++) {\n        result += ' ';\n    }\n    return result;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { InlayHintsController } from './inlayHintsController.js';\nimport { InlayHintsHover } from './inlayHintsHover.js';\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nHoverParticipantRegistry.register(InlayHintsHover);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { asCommandLink } from './inlayHints.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n    constructor(part, owner, initialMousePosX, initialMousePosY) {\n        super(10, owner, part.item.anchor.range, initialMousePosX, initialMousePosY, true);\n        this.part = part;\n    }\n}\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n    constructor(editor, languageService, openerService, configurationService, _resolverService, languageFeaturesService) {\n        super(editor, languageService, openerService, configurationService, languageFeaturesService);\n        this._resolverService = _resolverService;\n        this.hoverOrdinal = 6;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        var _a;\n        const controller = InlayHintsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        if (mouseEvent.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return null;\n        }\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n            return null;\n        }\n        return new InlayHintsHoverAnchor(options.attachedData, this, mouseEvent.event.posx, mouseEvent.event.posy);\n    }\n    computeSync() {\n        return [];\n    }\n    computeAsync(anchor, _lineDecorations, token) {\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\n            var _a, e_1, _b, _c;\n            const { part } = anchor;\n            yield part.item.resolve(token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            // (1) Inlay Tooltip\n            let itemTooltip;\n            if (typeof part.item.hint.tooltip === 'string') {\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n            }\n            else if (part.item.hint.tooltip) {\n                itemTooltip = part.item.hint.tooltip;\n            }\n            if (itemTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], false, 0));\n            }\n            // (1.2) Inlay dbl-click gesture\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(localize('hint.dbl', \"Double-click to insert\"))], false, 10001));\n            }\n            // (2) Inlay Label Part Tooltip\n            let partTooltip;\n            if (typeof part.part.tooltip === 'string') {\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\n            }\n            else if (part.part.tooltip) {\n                partTooltip = part.part.tooltip;\n            }\n            if (partTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], false, 1));\n            }\n            // (2.2) Inlay Label Part Help Hover\n            if (part.part.location || part.part.command) {\n                let linkHint;\n                const useMetaKey = this._editor.getOption(76 /* EditorOption.multiCursorModifier */) === 'altKey';\n                const kb = useMetaKey\n                    ? platform.isMacintosh\n                        ? localize('links.navigate.kb.meta.mac', \"cmd + click\")\n                        : localize('links.navigate.kb.meta', \"ctrl + click\")\n                    : platform.isMacintosh\n                        ? localize('links.navigate.kb.alt.mac', \"option + click\")\n                        : localize('links.navigate.kb.alt', \"alt + click\");\n                if (part.part.location && part.part.command) {\n                    linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\n                }\n                else if (part.part.location) {\n                    linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\n                }\n                else if (part.part.command) {\n                    linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, { isTrusted: true });\n                }\n                if (linkHint) {\n                    executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], false, 10000));\n                }\n            }\n            // (3) Inlay Label Part Location tooltip\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n            try {\n                for (var _d = true, iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), _a = iterable_1_1.done, !_a; _d = true) {\n                    _c = iterable_1_1.value;\n                    _d = false;\n                    const item = _c;\n                    executor.emitOne(item);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_d && !_a && (_b = iterable_1.return)) yield _b.call(iterable_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }));\n    }\n    _resolveInlayHintLabelPartHover(part, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!part.part.location) {\n                return AsyncIterableObject.EMPTY;\n            }\n            const { uri, range } = part.part.location;\n            const ref = yield this._resolverService.createModelReference(uri);\n            try {\n                const model = ref.object.textEditorModel;\n                if (!this._languageFeaturesService.hoverProvider.has(model)) {\n                    return AsyncIterableObject.EMPTY;\n                }\n                return getHover(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token)\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, false, 2 + item.ordinal));\n            }\n            finally {\n                ref.dispose();\n            }\n        });\n    }\n};\nInlayHintsHover = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ITextModelService),\n    __param(5, ILanguageFeaturesService)\n], InlayHintsHover);\nexport { InlayHintsHover };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nexport class ExpandLineSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'expandLineSelection',\n            label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\n            alias: 'Expand Line Selection',\n            precondition: undefined,\n            kbOpts: {\n                weight: 0 /* KeybindingWeight.EditorCore */,\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */\n            },\n        });\n    }\n    run(_accessor, editor, args) {\n        args = args || {};\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        viewModel.model.pushStackElement();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\n        viewModel.revealPrimaryCursor(args.source, true);\n    }\n}\nregisterEditorAction(ExpandLineSelectionAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignore = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignore = true;\n                    prev = curr;\n                }\n            }\n        }\n        const commands = [];\n        for (const selection of selections) {\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.copyLinesUpAction',\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n            alias: 'Copy Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\n                order: 1\n            }\n        });\n    }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.copyLinesDownAction',\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n            alias: 'Copy Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\n                order: 2\n            }\n        });\n    }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.duplicateSelection',\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n            alias: 'Duplicate Selection',\n            precondition: EditorContextKeys.writable,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\n                order: 5\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        const model = editor.getModel();\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                commands.push(new CopyLinesCommand(selection, true));\n            }\n            else {\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const commands = [];\n        const selections = editor.getSelections() || [];\n        const autoIndent = editor.getOption(11 /* EditorOption.autoIndent */);\n        for (const selection of selections) {\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveLinesUpAction',\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\n            alias: 'Move Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\n                order: 3\n            }\n        });\n    }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveLinesDownAction',\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\n            alias: 'Move Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\n                order: 4\n            }\n        });\n    }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n    constructor(descending, opts) {\n        super(opts);\n        this.descending = descending;\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections() || [];\n        for (const selection of selections) {\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n                return;\n            }\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.sortLinesAscending',\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n            alias: 'Sort Lines Ascending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.sortLinesDescending',\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n            alias: 'Sort Lines Descending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeDuplicateLines',\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n            alias: 'Delete Duplicate Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let linesDeleted = 0;\n        for (const selection of editor.getSelections()) {\n            const uniqueLines = new Set();\n            const lines = [];\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n                const line = model.getLineContent(i);\n                if (uniqueLines.has(line)) {\n                    continue;\n                }\n                lines.push(line);\n                uniqueLines.add(line);\n            }\n            const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n            const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n            const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n            endCursorState.push(finalSelection);\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n    constructor() {\n        super({\n            id: TrimTrailingWhitespaceAction.ID,\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n            alias: 'Trim Trailing Whitespace',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        let cursors = [];\n        if (args.reason === 'auto-save') {\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n            // It is very convenient for the editor config extension to invoke this action.\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n        }\n        const selection = editor.getSelection();\n        if (selection === null) {\n            return;\n        }\n        const command = new TrimTrailingWhitespaceCommand(selection, cursors);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n    }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.deleteLines',\n            label: nls.localize('lines.delete', \"Delete Line\"),\n            alias: 'Delete Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const ops = this._getLinesToRemove(editor);\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            // Model is empty\n            return;\n        }\n        let linesDeleted = 0;\n        const edits = [];\n        const cursorState = [];\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            let startLineNumber = op.startLineNumber;\n            let endLineNumber = op.endLineNumber;\n            let startColumn = 1;\n            let endColumn = model.getLineMaxColumn(endLineNumber);\n            if (endLineNumber < model.getLineCount()) {\n                endLineNumber += 1;\n                endColumn = 1;\n            }\n            else if (startLineNumber > 1) {\n                startLineNumber -= 1;\n                startColumn = model.getLineMaxColumn(startLineNumber);\n            }\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, cursorState);\n        editor.pushUndoStop();\n    }\n    _getLinesToRemove(editor) {\n        // Construct delete operations\n        const operations = editor.getSelections().map((s) => {\n            let endLineNumber = s.endLineNumber;\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n                endLineNumber -= 1;\n            }\n            return {\n                startLineNumber: s.startLineNumber,\n                selectionStartColumn: s.selectionStartColumn,\n                endLineNumber: endLineNumber,\n                positionColumn: s.positionColumn\n            };\n        });\n        // Sort delete operations\n        operations.sort((a, b) => {\n            if (a.startLineNumber === b.startLineNumber) {\n                return a.endLineNumber - b.endLineNumber;\n            }\n            return a.startLineNumber - b.startLineNumber;\n        });\n        // Merge delete operations which are adjacent or overlapping\n        const mergedOperations = [];\n        let previousOperation = operations[0];\n        for (let i = 1; i < operations.length; i++) {\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n                // Merge current operations into the previous one\n                previousOperation.endLineNumber = operations[i].endLineNumber;\n            }\n            else {\n                // Push previous operation\n                mergedOperations.push(previousOperation);\n                previousOperation = operations[i];\n            }\n        }\n        // Push the last operation\n        mergedOperations.push(previousOperation);\n        return mergedOperations;\n    }\n}\nexport class IndentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.indentLines',\n            label: nls.localize('lines.indent', \"Indent Line\"),\n            alias: 'Indent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n        editor.pushUndoStop();\n    }\n}\nclass OutdentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.outdentLines',\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\n            alias: 'Outdent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n    }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineBefore',\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n            alias: 'Insert Line Above',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class InsertLineAfterAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineAfter',\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n            alias: 'Insert Line Below',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const primaryCursor = editor.getSelection();\n        const rangesToDelete = this._getRangesToDelete(editor);\n        // merge overlapping selections\n        const effectiveRanges = [];\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n            const range = rangesToDelete[i];\n            const nextRange = rangesToDelete[i + 1];\n            if (Range.intersectRanges(range, nextRange) === null) {\n                effectiveRanges.push(range);\n            }\n            else {\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n            }\n        }\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n        const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n        const edits = effectiveRanges.map(range => {\n            return EditOperation.replace(range, '');\n        });\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllLeft',\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n            alias: 'Delete All Left',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        let deletedLines = 0;\n        rangesToDelete.forEach(range => {\n            let endCursor;\n            if (range.endColumn === 1 && deletedLines > 0) {\n                const newStartLine = range.startLineNumber - deletedLines;\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n            }\n            else {\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n            }\n            deletedLines += range.endLineNumber - range.startLineNumber;\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        });\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections;\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        rangesToDelete = rangesToDelete.map(selection => {\n            if (selection.isEmpty()) {\n                if (selection.startColumn === 1) {\n                    const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n                    const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineContent(deleteFromLine).length + 1;\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n                }\n                else {\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n                }\n            }\n            else {\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n            }\n        });\n        return rangesToDelete;\n    }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllRight',\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n            alias: 'Delete All Right',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */, secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n            const range = rangesToDelete[i];\n            const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        }\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        const rangesToDelete = selections.map((sel) => {\n            if (sel.isEmpty()) {\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n                if (sel.startColumn === maxColumn) {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n                }\n                else {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n                }\n            }\n            return sel;\n        });\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        return rangesToDelete;\n    }\n}\nexport class JoinLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.joinLines',\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\n            alias: 'Join Lines',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let primaryCursor = editor.getSelection();\n        if (primaryCursor === null) {\n            return;\n        }\n        selections.sort(Range.compareRangesUsingStarts);\n        const reducedSelections = [];\n        const lastSelection = selections.reduce((previousValue, currentValue) => {\n            if (previousValue.isEmpty()) {\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\n                    if (primaryCursor.equalsSelection(previousValue)) {\n                        primaryCursor = currentValue;\n                    }\n                    return currentValue;\n                }\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n            else {\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n        });\n        reducedSelections.push(lastSelection);\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let endPrimaryCursor = primaryCursor;\n        let lineOffset = 0;\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\n            const selection = reducedSelections[i];\n            const startLineNumber = selection.startLineNumber;\n            const startColumn = 1;\n            let columnDeltaOffset = 0;\n            let endLineNumber, endColumn;\n            const selectionEndPositionOffset = model.getLineContent(selection.endLineNumber).length - selection.endColumn;\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n                const position = selection.getStartPosition();\n                if (position.lineNumber < model.getLineCount()) {\n                    endLineNumber = startLineNumber + 1;\n                    endColumn = model.getLineMaxColumn(endLineNumber);\n                }\n                else {\n                    endLineNumber = position.lineNumber;\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\n                }\n            }\n            else {\n                endLineNumber = selection.endLineNumber;\n                endColumn = model.getLineMaxColumn(endLineNumber);\n            }\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n                const lineText = model.getLineContent(i);\n                const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n                if (firstNonWhitespaceIdx >= 1) {\n                    let insertSpace = true;\n                    if (trimmedLinesContent === '') {\n                        insertSpace = false;\n                    }\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n                        insertSpace = false;\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n                    }\n                    const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n                    if (insertSpace) {\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\n                    }\n                    else {\n                        columnDeltaOffset = lineTextWithoutIndent.length;\n                    }\n                }\n                else {\n                    columnDeltaOffset = 0;\n                }\n            }\n            const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n            if (!deleteSelection.isEmpty()) {\n                let resultSelection;\n                if (selection.isEmpty()) {\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n                }\n                else {\n                    if (selection.startLineNumber === selection.endLineNumber) {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n                    }\n                    else {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n                    }\n                }\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n                    endPrimaryCursor = resultSelection;\n                }\n                else {\n                    endCursorState.push(resultSelection);\n                }\n            }\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n        }\n        endCursorState.unshift(endPrimaryCursor);\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TransposeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transpose',\n            label: nls.localize('editor.transpose', \"Transpose Characters around the Cursor\"),\n            alias: 'Transpose Characters around the Cursor',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const cursor = selection.getStartPosition();\n            const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n            if (cursor.column >= maxColumn) {\n                if (cursor.lineNumber === model.getLineCount()) {\n                    continue;\n                }\n                // The cursor is at the end of current line and current line is not empty\n                // then we transpose the character before the cursor and the line break if there is any following line.\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n            }\n            else {\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class AbstractCaseAction extends EditorAction {\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const wordSeparators = editor.getOption(128 /* EditorOption.wordSeparators */);\n        const textEdits = [];\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                const cursor = selection.getStartPosition();\n                const word = editor.getConfiguredWordAtPosition(cursor);\n                if (!word) {\n                    continue;\n                }\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n                const text = model.getValueInRange(wordRange);\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n            }\n            else {\n                const text = model.getValueInRange(selection);\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, textEdits);\n        editor.pushUndoStop();\n    }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToUppercase',\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n            alias: 'Transform to Uppercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleUpperCase();\n    }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToLowercase',\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n            alias: 'Transform to Lowercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleLowerCase();\n    }\n}\nclass BackwardsCompatibleRegExp {\n    constructor(_pattern, _flags) {\n        this._pattern = _pattern;\n        this._flags = _flags;\n        this._actual = null;\n        this._evaluated = false;\n    }\n    get() {\n        if (!this._evaluated) {\n            this._evaluated = true;\n            try {\n                this._actual = new RegExp(this._pattern, this._flags);\n            }\n            catch (err) {\n                // this browser does not support this regular expression\n            }\n        }\n        return this._actual;\n    }\n    isSupported() {\n        return (this.get() !== null);\n    }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToTitlecase',\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n            alias: 'Transform to Title Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\n        if (!titleBoundary) {\n            // cannot support this\n            return text;\n        }\n        return text\n            .toLocaleLowerCase()\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\n    }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToSnakecase',\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n            alias: 'Transform to Snake Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\n        const singleLetters = SnakeCaseAction.singleLetters.get();\n        if (!caseBoundary || !singleLetters) {\n            // cannot support this\n            return text;\n        }\n        return (text\n            .replace(caseBoundary, '$1_$2')\n            .replace(singleLetters, '$1_$2$3')\n            .toLocaleLowerCase());\n    }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nexport class CamelCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToCamelcase',\n            label: nls.localize('editor.transformToCamelcase', \"Transform to Camel Case\"),\n            alias: 'Transform to Camel Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const wordBoundary = CamelCaseAction.wordBoundary.get();\n        if (!wordBoundary) {\n            // cannot support this\n            return text;\n        }\n        const words = text.split(wordBoundary);\n        const firstWord = words.shift();\n        return firstWord + words.map((word) => word.substring(0, 1).toLocaleUpperCase() + word.substring(1))\n            .join('');\n    }\n}\nCamelCaseAction.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\nexport class KebabCaseAction extends AbstractCaseAction {\n    static isSupported() {\n        const areAllRegexpsSupported = [\n            this.caseBoundary,\n            this.singleLetters,\n            this.underscoreBoundary,\n        ].every((regexp) => regexp.isSupported());\n        return areAllRegexpsSupported;\n    }\n    constructor() {\n        super({\n            id: 'editor.action.transformToKebabcase',\n            label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n            alias: 'Transform to Kebab Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, _) {\n        const caseBoundary = KebabCaseAction.caseBoundary.get();\n        const singleLetters = KebabCaseAction.singleLetters.get();\n        const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n        if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n            // one or more regexps aren't supported\n            return text;\n        }\n        return text\n            .replace(underscoreBoundary, '$1-$3')\n            .replace(caseBoundary, '$1-$2')\n            .replace(singleLetters, '$1-$2')\n            .toLocaleLowerCase();\n    }\n}\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n    registerEditorAction(SnakeCaseAction);\n}\nif (CamelCaseAction.wordBoundary.isSupported()) {\n    registerEditorAction(CamelCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n    registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n    registerEditorAction(KebabCaseAction);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class CopyLinesCommand {\n    constructor(selection, isCopyingDown, noop) {\n        this._selection = selection;\n        this._isCopyingDown = isCopyingDown;\n        this._noop = noop || false;\n        this._selectionDirection = 0 /* SelectionDirection.LTR */;\n        this._selectionId = null;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._endLineNumberDelta = 1;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const sourceLines = [];\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            sourceLines.push(model.getLineContent(i));\n        }\n        const sourceText = sourceLines.join('\\n');\n        if (sourceText === '') {\n            // Duplicating empty line\n            if (this._isCopyingDown) {\n                this._startLineNumberDelta++;\n                this._endLineNumberDelta++;\n            }\n        }\n        if (this._noop) {\n            builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n        }\n        else {\n            if (!this._isCopyingDown) {\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n            }\n            else {\n                builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        this._selectionDirection = this._selection.getDirection();\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n            let startLineNumber = result.startLineNumber;\n            let startColumn = result.startColumn;\n            let endLineNumber = result.endLineNumber;\n            let endColumn = result.endColumn;\n            if (this._startLineNumberDelta !== 0) {\n                startLineNumber = startLineNumber + this._startLineNumberDelta;\n                startColumn = 1;\n            }\n            if (this._endLineNumberDelta !== 0) {\n                endLineNumber = endLineNumber + this._endLineNumberDelta;\n                endColumn = 1;\n            }\n            result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n        }\n        return result;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as indentUtils from '../../indentation/browser/indentUtils.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getEnterAction } from '../../../common/languages/enterAction.js';\nlet MoveLinesCommand = class MoveLinesCommand {\n    constructor(selection, isMovingDown, autoIndent, _languageConfigurationService) {\n        this._languageConfigurationService = _languageConfigurationService;\n        this._selection = selection;\n        this._isMovingDown = isMovingDown;\n        this._autoIndent = autoIndent;\n        this._selectionId = null;\n        this._moveEndLineSelectionShrink = false;\n    }\n    getEditOperations(model, builder) {\n        const modelLineCount = model.getLineCount();\n        if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        this._moveEndPositionDown = false;\n        let s = this._selection;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n        const virtualModel = {\n            tokenization: {\n                getLineTokens: (lineNumber) => {\n                    return model.tokenization.getLineTokens(lineNumber);\n                },\n                getLanguageId: () => {\n                    return model.getLanguageId();\n                },\n                getLanguageIdAtPosition: (lineNumber, column) => {\n                    return model.getLanguageIdAtPosition(lineNumber, column);\n                },\n            },\n            getLineContent: null,\n        };\n        if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n            // Current line is empty\n            const lineNumber = s.startLineNumber;\n            const otherLineNumber = (this._isMovingDown ? lineNumber + 1 : lineNumber - 1);\n            if (model.getLineMaxColumn(otherLineNumber) === 1) {\n                // Other line number is empty too, so no editing is needed\n                // Add a no-op to force running by the model\n                builder.addEditOperation(new Range(1, 1, 1, 1), null);\n            }\n            else {\n                // Type content from other line number on line number\n                builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\n                // Remove content from other line number\n                builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n            }\n            // Track selection at the other line number\n            s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n        }\n        else {\n            let movingLineNumber;\n            let movingLineText;\n            if (this._isMovingDown) {\n                movingLineNumber = s.endLineNumber + 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\n                let insertingText = movingLineText;\n                if (this.shouldAutoIndent(model, s)) {\n                    const movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\n                    // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n                    if (movingLineMatchResult !== null) {\n                        const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                        const newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                        const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                        insertingText = newIndentation + this.trimStart(movingLineText);\n                    }\n                    else {\n                        // no enter rule matches, let's check indentatin rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return model.getLineContent(movingLineNumber);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const indentOfMovingLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfMovingLine !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                                insertingText = newIndentation + this.trimStart(movingLineText);\n                            }\n                        }\n                    }\n                    // add edit operations for moving line first to make sure it's executed after we make indentation change\n                    // to s.startLineNumber\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                    const ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\n                    // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match onEnter rules, let's check indentation rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return insertingText;\n                            }\n                            else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                                return model.getLineContent(lineNumber - 1);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const newIndentatOfMovingBlock = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter, this._languageConfigurationService);\n                        if (newIndentatOfMovingBlock !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n                else {\n                    // Insert line that needs to be moved before\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                }\n            }\n            else {\n                movingLineNumber = s.startLineNumber - 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\n                // Insert line that needs to be moved after\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n                if (this.shouldAutoIndent(model, s)) {\n                    virtualModel.getLineContent = (lineNumber) => {\n                        if (lineNumber === movingLineNumber) {\n                            return model.getLineContent(s.startLineNumber);\n                        }\n                        else {\n                            return model.getLineContent(lineNumber);\n                        }\n                    };\n                    const ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\n                    // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match any onEnter rule, let's check indentation rules then.\n                        const indentOfFirstLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfFirstLine !== null) {\n                            // adjust the indentation of the moving block\n                            const oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    buildIndentConverter(tabSize, indentSize, insertSpaces) {\n        return {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n    }\n    parseEnterResult(model, indentConverter, tabSize, line, enter) {\n        if (enter) {\n            let enterPrefix = enter.indentation;\n            if (enter.indentAction === IndentAction.None) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.Indent) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.IndentOutdent) {\n                enterPrefix = enter.indentation;\n            }\n            else if (enter.indentAction === IndentAction.Outdent) {\n                enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\n            }\n            const movingLineText = model.getLineContent(line);\n            if (this.trimStart(movingLineText).indexOf(this.trimStart(enterPrefix)) >= 0) {\n                const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n                let newIndentation = strings.getLeadingWhitespace(enterPrefix);\n                const indentMetadataOfMovelingLine = getIndentMetadata(model, line, this._languageConfigurationService);\n                if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* IndentConsts.DECREASE_MASK */) {\n                    newIndentation = indentConverter.unshiftIndent(newIndentation);\n                }\n                const newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                return newSpaceCnt - oldSpaceCnt;\n            }\n        }\n        return null;\n    }\n    /**\n     *\n     * @param model\n     * @param indentConverter\n     * @param tabSize\n     * @param line the line moving down\n     * @param futureAboveLineNumber the line which will be at the `line` position\n     * @param futureAboveLineText\n     */\n    matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\n        if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\n            // break\n            const maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\n            const enter = getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n        else {\n            // go upwards, starting from `line - 1`\n            let validPrecedingLine = line - 1;\n            while (validPrecedingLine >= 1) {\n                const lineContent = model.getLineContent(validPrecedingLine);\n                const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n                if (nonWhitespaceIdx >= 0) {\n                    break;\n                }\n                validPrecedingLine--;\n            }\n            if (validPrecedingLine < 1 || line > model.getLineCount()) {\n                return null;\n            }\n            const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n            const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n    }\n    matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\n        let validPrecedingLine = oneLineAbove;\n        while (validPrecedingLine >= 1) {\n            // ship empty lines as empty lines just inherit indentation\n            let lineContent;\n            if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\n                lineContent = previousLineText;\n            }\n            else {\n                lineContent = model.getLineContent(validPrecedingLine);\n            }\n            const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n            if (nonWhitespaceIdx >= 0) {\n                break;\n            }\n            validPrecedingLine--;\n        }\n        if (validPrecedingLine < 1 || line > model.getLineCount()) {\n            return null;\n        }\n        const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n        const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n        return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    }\n    trimStart(str) {\n        return str.replace(/^\\s+/, '');\n    }\n    shouldAutoIndent(model, selection) {\n        if (this._autoIndent < 4 /* EditorAutoIndentStrategy.Full */) {\n            return false;\n        }\n        // if it's not easy to tokenize, we stop auto indent.\n        if (!model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\n            return false;\n        }\n        const languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n        const languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n        if (languageAtSelectionStart !== languageAtSelectionEnd) {\n            return false;\n        }\n        if (this._languageConfigurationService.getLanguageConfiguration(languageAtSelectionStart).indentRulesSupport === null) {\n            return false;\n        }\n        return true;\n    }\n    getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            const lineContent = model.getLineContent(i);\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            const newSpacesCnt = originalSpacesCnt + offset;\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n                builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n                if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n                    // as users select part of the original indent white spaces\n                    // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n                    this._moveEndLineSelectionShrink = true;\n                }\n            }\n        }\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n            result = result.setEndPosition(result.endLineNumber, 2);\n        }\n        return result;\n    }\n};\nMoveLinesCommand = __decorate([\n    __param(3, ILanguageConfigurationService)\n], MoveLinesCommand);\nexport { MoveLinesCommand };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport class SortLinesCommand {\n    static getCollator() {\n        if (!SortLinesCommand._COLLATOR) {\n            SortLinesCommand._COLLATOR = new Intl.Collator();\n        }\n        return SortLinesCommand._COLLATOR;\n    }\n    constructor(selection, descending) {\n        this.selection = selection;\n        this.descending = descending;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        const op = sortLines(model, this.selection, this.descending);\n        if (op) {\n            builder.addEditOperation(op.range, op.text);\n        }\n        this.selectionId = builder.trackSelection(this.selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n    static canRun(model, selection, descending) {\n        if (model === null) {\n            return false;\n        }\n        const data = getSortData(model, selection, descending);\n        if (!data) {\n            return false;\n        }\n        for (let i = 0, len = data.before.length; i < len; i++) {\n            if (data.before[i] !== data.after[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nSortLinesCommand._COLLATOR = null;\nfunction getSortData(model, selection, descending) {\n    const startLineNumber = selection.startLineNumber;\n    let endLineNumber = selection.endLineNumber;\n    if (selection.endColumn === 1) {\n        endLineNumber--;\n    }\n    // Nothing to sort if user didn't select anything.\n    if (startLineNumber >= endLineNumber) {\n        return null;\n    }\n    const linesToSort = [];\n    // Get the contents of the selection to be sorted.\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        linesToSort.push(model.getLineContent(lineNumber));\n    }\n    let sorted = linesToSort.slice(0);\n    sorted.sort(SortLinesCommand.getCollator().compare);\n    // If descending, reverse the order.\n    if (descending === true) {\n        sorted = sorted.reverse();\n    }\n    return {\n        startLineNumber: startLineNumber,\n        endLineNumber: endLineNumber,\n        before: linesToSort,\n        after: sorted\n    };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model, selection, descending) {\n    const data = getSortData(model, selection, descending);\n    if (!data) {\n        return null;\n    }\n    return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar LinkedEditingContribution_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport './linkedEditing.css';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nlet LinkedEditingContribution = LinkedEditingContribution_1 = class LinkedEditingContribution extends Disposable {\n    static get(editor) {\n        return editor.getContribution(LinkedEditingContribution_1.ID);\n    }\n    constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._syncRangesToken = 0;\n        this._localToDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._providers = languageFeaturesService.linkedEditingRangeProvider;\n        this._enabled = false;\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { max: 200 });\n        this._currentDecorations = this._editor.createDecorationsCollection();\n        this._languageWordPattern = null;\n        this._currentWordPattern = null;\n        this._ignoreChangeEvent = false;\n        this._localToDispose = this._register(new DisposableStore());\n        this._rangeUpdateTriggerPromise = null;\n        this._rangeSyncTriggerPromise = null;\n        this._currentRequest = null;\n        this._currentRequestPosition = null;\n        this._currentRequestModelVersion = null;\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(68 /* EditorOption.linkedEditing */) || e.hasChanged(91 /* EditorOption.renameOnType */)) {\n                this.reinitialize(false);\n            }\n        }));\n        this._register(this._providers.onDidChange(() => this.reinitialize(false)));\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n        this.reinitialize(true);\n    }\n    reinitialize(forceRefresh) {\n        const model = this._editor.getModel();\n        const isEnabled = model !== null && (this._editor.getOption(68 /* EditorOption.linkedEditing */) || this._editor.getOption(91 /* EditorOption.renameOnType */)) && this._providers.has(model);\n        if (isEnabled === this._enabled && !forceRefresh) {\n            return;\n        }\n        this._enabled = isEnabled;\n        this.clearRanges();\n        this._localToDispose.clear();\n        if (!isEnabled || model === null) {\n            return;\n        }\n        this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\n            this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        }));\n        const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n        const triggerRangeUpdate = () => {\n            var _a;\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), (_a = this._debounceDuration) !== null && _a !== void 0 ? _a : this._debounceInformation.get(model));\n        };\n        const rangeSyncScheduler = new Delayer(0);\n        const triggerRangeSync = (token) => {\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\n        };\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (!this._ignoreChangeEvent) {\n                if (this._currentDecorations.length > 0) {\n                    const referenceRange = this._currentDecorations.getRange(0);\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n                        triggerRangeSync(this._syncRangesToken);\n                        return;\n                    }\n                }\n            }\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add({\n            dispose: () => {\n                rangeUpdateScheduler.dispose();\n                rangeSyncScheduler.dispose();\n            }\n        });\n        this.updateRanges();\n    }\n    _syncRanges(token) {\n        // delayed invocation, make sure we're still on\n        if (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\n            // nothing to do\n            return;\n        }\n        const model = this._editor.getModel();\n        const referenceRange = this._currentDecorations.getRange(0);\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n            return this.clearRanges();\n        }\n        const referenceValue = model.getValueInRange(referenceRange);\n        if (this._currentWordPattern) {\n            const match = referenceValue.match(this._currentWordPattern);\n            const matchLength = match ? match[0].length : 0;\n            if (matchLength !== referenceValue.length) {\n                return this.clearRanges();\n            }\n        }\n        const edits = [];\n        for (let i = 1, len = this._currentDecorations.length; i < len; i++) {\n            const mirrorRange = this._currentDecorations.getRange(i);\n            if (!mirrorRange) {\n                continue;\n            }\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n                edits.push({\n                    range: mirrorRange,\n                    text: referenceValue\n                });\n            }\n            else {\n                let oldValue = model.getValueInRange(mirrorRange);\n                let newValue = referenceValue;\n                let rangeStartColumn = mirrorRange.startColumn;\n                let rangeEndColumn = mirrorRange.endColumn;\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n                rangeStartColumn += commonPrefixLength;\n                oldValue = oldValue.substr(commonPrefixLength);\n                newValue = newValue.substr(commonPrefixLength);\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n                rangeEndColumn -= commonSuffixLength;\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n                    edits.push({\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n                        text: newValue\n                    });\n                }\n            }\n        }\n        if (edits.length === 0) {\n            return;\n        }\n        try {\n            this._editor.popUndoStop();\n            this._ignoreChangeEvent = true;\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n            this._editor.executeEdits('linkedEditing', edits);\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n    dispose() {\n        this.clearRanges();\n        super.dispose();\n    }\n    clearRanges() {\n        this._visibleContextKey.set(false);\n        this._currentDecorations.clear();\n        if (this._currentRequest) {\n            this._currentRequest.cancel();\n            this._currentRequest = null;\n            this._currentRequestPosition = null;\n        }\n    }\n    get currentUpdateTriggerPromise() {\n        return this._rangeUpdateTriggerPromise || Promise.resolve();\n    }\n    get currentSyncTriggerPromise() {\n        return this._rangeSyncTriggerPromise || Promise.resolve();\n    }\n    updateRanges(force = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                this.clearRanges();\n                return;\n            }\n            const position = this._editor.getPosition();\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n                // disabled or multicursor\n                this.clearRanges();\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n                if (position.equals(this._currentRequestPosition)) {\n                    return; // same position\n                }\n                if (this._currentDecorations.length > 0) {\n                    const range = this._currentDecorations.getRange(0);\n                    if (range && range.containsPosition(position)) {\n                        return; // just moving inside the existing primary range\n                    }\n                }\n            }\n            // Clear existing decorations while we compute new ones\n            this.clearRanges();\n            this._currentRequestPosition = position;\n            this._currentRequestModelVersion = modelVersionId;\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const sw = new StopWatch(false);\n                    const response = yield getLinkedEditingRanges(this._providers, model, position, token);\n                    this._debounceInformation.update(model, sw.elapsed());\n                    if (request !== this._currentRequest) {\n                        return;\n                    }\n                    this._currentRequest = null;\n                    if (modelVersionId !== model.getVersionId()) {\n                        return;\n                    }\n                    let ranges = [];\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\n                        ranges = response.ranges;\n                    }\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\n                    let foundReferenceRange = false;\n                    for (let i = 0, len = ranges.length; i < len; i++) {\n                        if (Range.containsPosition(ranges[i], position)) {\n                            foundReferenceRange = true;\n                            if (i !== 0) {\n                                const referenceRange = ranges[i];\n                                ranges.splice(i, 1);\n                                ranges.unshift(referenceRange);\n                            }\n                            break;\n                        }\n                    }\n                    if (!foundReferenceRange) {\n                        // Cannot do linked editing if the ranges are not where the cursor is...\n                        this.clearRanges();\n                        return;\n                    }\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution_1.DECORATION }));\n                    this._visibleContextKey.set(true);\n                    this._currentDecorations.set(decorations);\n                    this._syncRangesToken++; // cancel any pending syncRanges call\n                }\n                catch (err) {\n                    if (!isCancellationError(err)) {\n                        onUnexpectedError(err);\n                    }\n                    if (this._currentRequest === request || !this._currentRequest) {\n                        // stop if we are still the latest request\n                        this.clearRanges();\n                    }\n                }\n            }));\n            this._currentRequest = request;\n            return request;\n        });\n    }\n    // for testing\n    setDebounceDuration(timeInMS) {\n        this._debounceDuration = timeInMS;\n    }\n};\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\n    description: 'linked-editing',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    className: DECORATION_CLASS_NAME\n});\nLinkedEditingContribution = LinkedEditingContribution_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkedEditingContribution);\nexport { LinkedEditingContribution };\nexport class LinkedEditingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.linkedEditing',\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n            alias: 'Start Linked Editing',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(_accessor, editor) {\n        const controller = LinkedEditingContribution.get(editor);\n        if (controller) {\n            return Promise.resolve(controller.updateRanges(true));\n        }\n        return Promise.resolve();\n    }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n    id: 'cancelLinkedEditingInput',\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n    handler: x => x.clearRanges(),\n    kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nfunction getLinkedEditingRanges(providers, model, position, token) {\n    const orderedByScore = providers.ordered(model);\n    // in order of score ask the linked editing range provider\n    // until someone response with a good result\n    // (good = not null)\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield provider.provideLinkedEditingRanges(model, position, token);\n        }\n        catch (e) {\n            onUnexpectedExternalError(e);\n            return undefined;\n        }\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hcDark: Color.fromHex('#f00').transparent(0.3), hcLight: Color.white }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n    const { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\n    return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(LinkedEditingAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar LinkDetector_1;\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nlet LinkDetector = LinkDetector_1 = class LinkDetector extends Disposable {\n    static get(editor) {\n        return editor.getContribution(LinkDetector_1.ID);\n    }\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this.editor = editor;\n        this.openerService = openerService;\n        this.notificationService = notificationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.providers = this.languageFeaturesService.linkProvider;\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n        this.computePromise = null;\n        this.activeLinksList = null;\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\n        }));\n        this._register(clickLinkGesture.onExecute((e) => {\n            this.onEditorMouseUp(e);\n        }));\n        this._register(clickLinkGesture.onCancel((e) => {\n            this.cleanUpActiveLinkDecoration();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!e.hasChanged(69 /* EditorOption.links */)) {\n                return;\n            }\n            // Remove any links (for the getting disabled case)\n            this.updateDecorations([]);\n            // Stop any computation (for the getting disabled case)\n            this.stop();\n            // Start computing (for the getting enabled case)\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (!this.editor.hasModel()) {\n                return;\n            }\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelLanguage((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(this.providers.onDidChange((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this.computeLinks.schedule(0);\n    }\n    computeLinksNow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.editor.hasModel() || !this.editor.getOption(69 /* EditorOption.links */)) {\n                return;\n            }\n            const model = this.editor.getModel();\n            if (!this.providers.has(model)) {\n                return;\n            }\n            if (this.activeLinksList) {\n                this.activeLinksList.dispose();\n                this.activeLinksList = null;\n            }\n            this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n            try {\n                const sw = new StopWatch(false);\n                this.activeLinksList = yield this.computePromise;\n                this.debounceInformation.update(model, sw.elapsed());\n                if (model.isDisposed()) {\n                    return;\n                }\n                this.updateDecorations(this.activeLinksList.links);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                this.computePromise = null;\n            }\n        });\n    }\n    updateDecorations(links) {\n        const useMetaKey = (this.editor.getOption(76 /* EditorOption.multiCursorModifier */) === 'altKey');\n        const oldDecorations = [];\n        const keys = Object.keys(this.currentOccurrences);\n        for (const decorationId of keys) {\n            const occurence = this.currentOccurrences[decorationId];\n            oldDecorations.push(occurence.decorationId);\n        }\n        const newDecorations = [];\n        if (links) {\n            // Not sure why this is sometimes null\n            for (const link of links) {\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n            }\n        }\n        this.editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            for (let i = 0, len = decorations.length; i < len; i++) {\n                const occurence = new LinkOccurrence(links[i], decorations[i]);\n                this.currentOccurrences[occurence.decorationId] = occurence;\n            }\n        });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n        const useMetaKey = (this.editor.getOption(76 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.isEnabled(mouseEvent, withKey)) {\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.activate(changeAccessor, useMetaKey);\n                    this.activeLinkDecorationId = occurrence.decorationId;\n                });\n            }\n        }\n        else {\n            this.cleanUpActiveLinkDecoration();\n        }\n    }\n    cleanUpActiveLinkDecoration() {\n        const useMetaKey = (this.editor.getOption(76 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.activeLinkDecorationId) {\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.deactivate(changeAccessor, useMetaKey);\n                });\n            }\n            this.activeLinkDecorationId = null;\n        }\n    }\n    onEditorMouseUp(mouseEvent) {\n        if (!this.isEnabled(mouseEvent)) {\n            return;\n        }\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (!occurrence) {\n            return;\n        }\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n        if (!this.openerService) {\n            return;\n        }\n        const { link } = occurrence;\n        link.resolve(CancellationToken.None).then(uri => {\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n            if (typeof uri === 'string' && this.editor.hasModel()) {\n                const modelUri = this.editor.getModel().uri;\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n                    const parsedUri = URI.parse(uri);\n                    if (parsedUri.scheme === Schemas.file) {\n                        const fsPath = resources.originalFSPath(parsedUri);\n                        let relativePath = null;\n                        if (fsPath.startsWith('/./')) {\n                            relativePath = `.${fsPath.substr(1)}`;\n                        }\n                        else if (fsPath.startsWith('//./')) {\n                            relativePath = `.${fsPath.substr(2)}`;\n                        }\n                        if (relativePath) {\n                            uri = resources.joinPath(modelUri, relativePath);\n                        }\n                    }\n                }\n            }\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true, fromWorkspace: true });\n        }, err => {\n            const messageOrError = err instanceof Error ? err.message : err;\n            // different error cases\n            if (messageOrError === 'invalid') {\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n            }\n            else if (messageOrError === 'missing') {\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n            }\n            else {\n                onUnexpectedError(err);\n            }\n        });\n    }\n    getLinkOccurrence(position) {\n        if (!this.editor.hasModel() || !position) {\n            return null;\n        }\n        const decorations = this.editor.getModel().getDecorationsInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: position.column,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n        }, 0, true);\n        for (const decoration of decorations) {\n            const currentOccurrence = this.currentOccurrences[decoration.id];\n            if (currentOccurrence) {\n                return currentOccurrence;\n            }\n        }\n        return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n        return Boolean((mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */)\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\n    }\n    stop() {\n        var _a;\n        this.computeLinks.cancel();\n        if (this.activeLinksList) {\n            (_a = this.activeLinksList) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.activeLinksList = null;\n        }\n        if (this.computePromise) {\n            this.computePromise.cancel();\n            this.computePromise = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n};\nLinkDetector.ID = 'editor.linkDetector';\nLinkDetector = LinkDetector_1 = __decorate([\n    __param(1, IOpenerService),\n    __param(2, INotificationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n    general: ModelDecorationOptions.register({\n        description: 'detected-link',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link'\n    }),\n    active: ModelDecorationOptions.register({\n        description: 'detected-link-active',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link-active'\n    })\n};\nclass LinkOccurrence {\n    static decoration(link, useMetaKey) {\n        return {\n            range: link.range,\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\n        };\n    }\n    static _getOptions(link, useMetaKey, isActive) {\n        const options = Object.assign({}, (isActive ? decoration.active : decoration.general));\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\n        return options;\n    }\n    constructor(link, decorationId) {\n        this.link = link;\n        this.decorationId = decorationId;\n    }\n    activate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n    }\n    deactivate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n    }\n}\nfunction getHoverMessage(link, useMetaKey) {\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\n    const label = link.tooltip\n        ? link.tooltip\n        : executeCmd\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\n            : nls.localize('links.navigate.follow', 'Follow link');\n    const kb = useMetaKey\n        ? platform.isMacintosh\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\n        : platform.isMacintosh\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\n    if (link.url) {\n        let nativeLabel = '';\n        if (/^command:/i.test(link.url.toString())) {\n            // Don't show complete command arguments in the native tooltip\n            const match = link.url.toString().match(/^command:([^?#]+)/);\n            if (match) {\n                const commandId = match[1];\n                nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n            }\n        }\n        const hoverMessage = new MarkdownString('', true)\n            .appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel)\n            .appendMarkdown(` (${kb})`);\n        return hoverMessage;\n    }\n    else {\n        return new MarkdownString().appendText(`${label} (${kb})`);\n    }\n}\nclass OpenLinkAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.openLink',\n            label: nls.localize('label', \"Open Link\"),\n            alias: 'Open Link',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const linkDetector = LinkDetector.get(editor);\n        if (!linkDetector) {\n            return;\n        }\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        for (const sel of selections) {\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n            if (link) {\n                linkDetector.openLinkOccurrence(link, false);\n            }\n        }\n    }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(OpenLinkAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class Link {\n    constructor(link, provider) {\n        this._link = link;\n        this._provider = provider;\n    }\n    toJSON() {\n        return {\n            range: this.range,\n            url: this.url,\n            tooltip: this.tooltip\n        };\n    }\n    get range() {\n        return this._link.range;\n    }\n    get url() {\n        return this._link.url;\n    }\n    get tooltip() {\n        return this._link.tooltip;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._link.url) {\n                return this._link.url;\n            }\n            if (typeof this._provider.resolveLink === 'function') {\n                return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\n                    this._link = value || this._link;\n                    if (this._link.url) {\n                        // recurse\n                        return this.resolve(token);\n                    }\n                    return Promise.reject(new Error('missing'));\n                });\n            }\n            return Promise.reject(new Error('missing'));\n        });\n    }\n}\nexport class LinksList {\n    constructor(tuples) {\n        this._disposables = new DisposableStore();\n        let links = [];\n        for (const [list, provider] of tuples) {\n            // merge all links\n            const newLinks = list.links.map(link => new Link(link, provider));\n            links = LinksList._union(links, newLinks);\n            // register disposables\n            if (isDisposable(list)) {\n                this._disposables.add(list);\n            }\n        }\n        this.links = links;\n    }\n    dispose() {\n        this._disposables.dispose();\n        this.links.length = 0;\n    }\n    static _union(oldLinks, newLinks) {\n        // reunite oldLinks with newLinks and remove duplicates\n        const result = [];\n        let oldIndex;\n        let oldLen;\n        let newIndex;\n        let newLen;\n        for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n            const oldLink = oldLinks[oldIndex];\n            const newLink = newLinks[newIndex];\n            if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n                // Remove the oldLink\n                oldIndex++;\n                continue;\n            }\n            const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n            if (comparisonResult < 0) {\n                // oldLink is before\n                result.push(oldLink);\n                oldIndex++;\n            }\n            else {\n                // newLink is before\n                result.push(newLink);\n                newIndex++;\n            }\n        }\n        for (; oldIndex < oldLen; oldIndex++) {\n            result.push(oldLinks[oldIndex]);\n        }\n        for (; newIndex < newLen; newIndex++) {\n            result.push(newLinks[newIndex]);\n        }\n        return result;\n    }\n}\nexport function getLinks(providers, model, token) {\n    const lists = [];\n    // ask all providers for links in parallel\n    const promises = providers.ordered(model).reverse().map((provider, i) => {\n        return Promise.resolve(provider.provideLinks(model, token)).then(result => {\n            if (result) {\n                lists[i] = [result, provider];\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(() => {\n        const result = new LinksList(coalesce(lists));\n        if (!token.isCancellationRequested) {\n            return result;\n        }\n        result.dispose();\n        return new LinksList([]);\n    });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    let [uri, resolveCount] = args;\n    assertType(uri instanceof URI);\n    if (typeof resolveCount !== 'number') {\n        resolveCount = 0;\n    }\n    const { linkProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return [];\n    }\n    const list = yield getLinks(linkProvider, model, CancellationToken.None);\n    if (!list) {\n        return [];\n    }\n    // resolve links\n    for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\n        yield list.links[i].resolve(CancellationToken.None);\n    }\n    const result = list.links.slice(0);\n    list.dispose();\n    return result;\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nclass LongLinesHelper extends Disposable {\n    static get(editor) {\n        return editor.getContribution(LongLinesHelper.ID);\n    }\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(this._editor.onMouseDown((e) => {\n            const stopRenderingLineAfter = this._editor.getOption(115 /* EditorOption.stopRenderingLineAfter */);\n            if (stopRenderingLineAfter >= 0 && e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.position.column >= stopRenderingLineAfter) {\n                this._editor.updateOptions({\n                    stopRenderingLineAfter: -1\n                });\n            }\n        }));\n    }\n}\nLongLinesHelper.ID = 'editor.contrib.longLinesHelper';\nregisterEditorContribution(LongLinesHelper.ID, LongLinesHelper, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SelectionHighlighter_1;\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getSelectionHighlightDecorationOptions } from '../../wordHighlighter/browser/highlightDecorations.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n    if (cursorDiff.length >= 1) {\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n        status(msg);\n    }\n}\nexport class InsertCursorAbove extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAbove',\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n            alias: 'Add Cursor Above',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealTopMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class InsertCursorBelow extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorBelow',\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n            alias: 'Add Cursor Below',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\n                order: 3\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealBottomMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n            alias: 'Add Cursors to Line Ends',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\n                order: 4\n            }\n        });\n    }\n    getCursorsForSelection(selection, model, result) {\n        if (selection.isEmpty()) {\n            return;\n        }\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n            const currentLineMaxColumn = model.getLineMaxColumn(i);\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n        }\n        if (selection.endColumn > 1) {\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n        }\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        const newSelections = [];\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToBottom',\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n            alias: 'Add Cursors To Bottom',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const lineCount = editor.getModel().getLineCount();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToTop',\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n            alias: 'Add Cursors To Top',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class MultiCursorSessionResult {\n    constructor(selections, revealRange, revealScrollType) {\n        this.selections = selections;\n        this.revealRange = revealRange;\n        this.revealScrollType = revealScrollType;\n    }\n}\nexport class MultiCursorSession {\n    static create(editor, findController) {\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const findState = findController.getState();\n        // Find widget owns entirely what we search for if:\n        //  - focus is not in the editor (i.e. it is in the find widget)\n        //  - and the search widget is visible\n        //  - and the search string is non-empty\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n            // Find widget owns what is searched for\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n        }\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n        let isDisconnectedFromFindController = false;\n        let wholeWord;\n        let matchCase;\n        const selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            isDisconnectedFromFindController = true;\n            wholeWord = true;\n            matchCase = true;\n        }\n        else {\n            wholeWord = findState.wholeWord;\n            matchCase = findState.matchCase;\n        }\n        // Selection owns what is searched for\n        const s = editor.getSelection();\n        let searchText;\n        let currentMatch = null;\n        if (s.isEmpty()) {\n            // selection is empty => expand to current word\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n            if (!word) {\n                return null;\n            }\n            searchText = word.word;\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n        }\n        else {\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n        }\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n    }\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n        this._editor = _editor;\n        this.findController = findController;\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n        this.searchText = searchText;\n        this.wholeWord = wholeWord;\n        this.matchCase = matchCase;\n        this.currentMatch = currentMatch;\n    }\n    addSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getNextMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false);\n        if (!nextMatch) {\n            return null;\n        }\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n    }\n    addSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getPreviousMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false);\n        if (!previousMatch) {\n            return null;\n        }\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n    }\n    selectAll(searchScope) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this.findController.highlightFindOptions();\n        const editorModel = this._editor.getModel();\n        if (searchScope) {\n            return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        }\n        return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    }\n}\nexport class MultiCursorSelectionController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._sessionDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._ignoreSelectionChange = false;\n        this._session = null;\n    }\n    dispose() {\n        this._endSession();\n        super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n        if (!this._session) {\n            // Create a new session\n            const session = MultiCursorSession.create(this._editor, findController);\n            if (!session) {\n                return;\n            }\n            this._session = session;\n            const newState = { searchString: this._session.searchText };\n            if (this._session.isDisconnectedFromFindController) {\n                newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\n                newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\n                newState.isRegexOverride = 2 /* FindOptionOverride.False */;\n            }\n            findController.getState().change(newState, false);\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\n                if (this._ignoreSelectionChange) {\n                    return;\n                }\n                this._endSession();\n            }));\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n                this._endSession();\n            }));\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\n                if (e.matchCase || e.wholeWord) {\n                    this._endSession();\n                }\n            }));\n        }\n    }\n    _endSession() {\n        this._sessionDispose.clear();\n        if (this._session && this._session.isDisconnectedFromFindController) {\n            const newState = {\n                wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\n                matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\n                isRegexOverride: 0 /* FindOptionOverride.NotSet */,\n            };\n            this._session.findController.getState().change(newState, false);\n        }\n        this._session = null;\n    }\n    _setSelections(selections) {\n        this._ignoreSelectionChange = true;\n        this._editor.setSelections(selections);\n        this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n        if (!selection.isEmpty()) {\n            return selection;\n        }\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n        if (!word) {\n            return selection;\n        }\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n        if (!result) {\n            return;\n        }\n        this._setSelections(result.selections);\n        if (result.revealRange) {\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n        }\n    }\n    getSession(findController) {\n        return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._session) {\n            // If there are multiple cursors, handle the case where they do not all select the same text.\n            const allSelections = this._editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    const model = this._editor.getModel();\n                    const resultingSelections = [];\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n                    }\n                    this._editor.setSelections(resultingSelections);\n                    return;\n                }\n            }\n        }\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\n        }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n        }\n    }\n    moveSelectionToNextFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n        }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n        }\n    }\n    selectAll(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let matches = null;\n        const findState = findController.getState();\n        // Special case: find widget owns entirely what we search for if:\n        // - focus is not in the editor (i.e. it is in the find widget)\n        // - and the search widget is visible\n        // - and the search string is non-empty\n        // - and we're searching for a regex\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n            const editorModel = this._editor.getModel();\n            if (findState.searchScope) {\n                matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n            else {\n                matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(128 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n        }\n        else {\n            this._beginSessionIfNeeded(findController);\n            if (!this._session) {\n                return;\n            }\n            matches = this._session.selectAll(findState.searchScope);\n        }\n        if (matches.length > 0) {\n            const editorSelection = this._editor.getSelection();\n            // Have the primary cursor remain the one where the action was invoked\n            for (let i = 0, len = matches.length; i < len; i++) {\n                const match = matches[i];\n                const intersection = match.range.intersectRanges(editorSelection);\n                if (intersection) {\n                    // bingo!\n                    matches[i] = matches[0];\n                    matches[0] = match;\n                    break;\n                }\n            }\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n        }\n    }\n    selectAllUsingSelections(selections) {\n        if (selections.length > 0) {\n            this._setSelections(selections);\n        }\n    }\n}\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n    run(accessor, editor) {\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel) {\n            const previousCursorState = viewModel.getCursorStates();\n            const findController = CommonFindController.get(editor);\n            if (findController) {\n                this._run(multiCursorController, findController);\n            }\n            else {\n                const newFindController = accessor.get(IInstantiationService).createInstance(CommonFindController, editor);\n                this._run(multiCursorController, newFindController);\n                newFindController.dispose();\n            }\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\n        }\n    }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToNextFindMatch',\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n            alias: 'Add Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\n                order: 5\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToNextFindMatch(findController);\n    }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToPreviousFindMatch',\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n            alias: 'Add Selection To Previous Find Match',\n            precondition: undefined,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\n                order: 6\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToNextFindMatch',\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n            alias: 'Move Last Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToNextFindMatch(findController);\n    }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n            alias: 'Move Last Selection To Previous Find Match',\n            precondition: undefined\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectHighlights',\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n            alias: 'Select All Occurrences of Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\n                order: 7\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.changeAll',\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n            alias: 'Change All Occurrences',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.2\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nclass SelectionHighlighterState {\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n        this._model = _model;\n        this._searchText = _searchText;\n        this._matchCase = _matchCase;\n        this._wordSeparators = _wordSeparators;\n        this._modelVersionId = this._model.getVersionId();\n        this._cachedFindMatches = null;\n        if (prevState\n            && this._model === prevState._model\n            && this._searchText === prevState._searchText\n            && this._matchCase === prevState._matchCase\n            && this._wordSeparators === prevState._wordSeparators\n            && this._modelVersionId === prevState._modelVersionId) {\n            this._cachedFindMatches = prevState._cachedFindMatches;\n        }\n    }\n    findMatches() {\n        if (this._cachedFindMatches === null) {\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n        }\n        return this._cachedFindMatches;\n    }\n}\nlet SelectionHighlighter = SelectionHighlighter_1 = class SelectionHighlighter extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this.editor = editor;\n        this._isEnabled = editor.getOption(106 /* EditorOption.selectionHighlight */);\n        this._decorations = editor.createDecorationsCollection();\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n        this.state = null;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            this._isEnabled = editor.getOption(106 /* EditorOption.selectionHighlight */);\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (!this._isEnabled) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            if (e.selection.isEmpty()) {\n                if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                    if (this.state) {\n                        // no longer valid\n                        this._setState(null);\n                    }\n                    this.updateSoon.schedule();\n                }\n                else {\n                    this._setState(null);\n                }\n            }\n            else {\n                this._update();\n            }\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._setState(null);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (this._isEnabled) {\n                this.updateSoon.schedule();\n            }\n        }));\n        const findController = CommonFindController.get(editor);\n        if (findController) {\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\n                this._update();\n            }));\n        }\n        this.updateSoon.schedule();\n    }\n    _update() {\n        this._setState(SelectionHighlighter_1._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n        if (!isEnabled) {\n            return null;\n        }\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const s = editor.getSelection();\n        if (s.startLineNumber !== s.endLineNumber) {\n            // multiline forbidden for perf reasons\n            return null;\n        }\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return null;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return null;\n        }\n        let r = multiCursorController.getSession(findController);\n        if (!r) {\n            const allSelections = editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    return null;\n                }\n            }\n            r = MultiCursorSession.create(editor, findController);\n        }\n        if (!r) {\n            return null;\n        }\n        if (r.currentMatch) {\n            // This is an empty selection\n            // Do not interfere with semantic word highlighting in the no selection case\n            return null;\n        }\n        if (/^[ \\t]+$/.test(r.searchText)) {\n            // whitespace only selection\n            return null;\n        }\n        if (r.searchText.length > 200) {\n            // very long selection\n            return null;\n        }\n        // TODO: better handling of this case\n        const findState = findController.getState();\n        const caseSensitive = findState.matchCase;\n        // Return early if the find widget shows the exact same matches\n        if (findState.isRevealed) {\n            let findStateSearchString = findState.searchString;\n            if (!caseSensitive) {\n                findStateSearchString = findStateSearchString.toLowerCase();\n            }\n            let mySearchString = r.searchText;\n            if (!caseSensitive) {\n                mySearchString = mySearchString.toLowerCase();\n            }\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n                return null;\n            }\n        }\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(128 /* EditorOption.wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n        this.state = newState;\n        if (!this.state) {\n            this._decorations.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForTokenization()) {\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n            return;\n        }\n        const allMatches = this.state.findMatches();\n        const selections = this.editor.getSelections();\n        selections.sort(Range.compareRangesUsingStarts);\n        // do not overlap with selection (issue #64 and #512)\n        const matches = [];\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n            const match = allMatches[i];\n            if (j >= lenJ) {\n                // finished all editor selections\n                matches.push(match);\n                i++;\n            }\n            else {\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n                if (cmp < 0) {\n                    // match is before sel\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n                        matches.push(match);\n                    }\n                    i++;\n                }\n                else if (cmp > 0) {\n                    // sel is before match\n                    j++;\n                }\n                else {\n                    // sel is equal to match\n                    i++;\n                    j++;\n                }\n            }\n        }\n        const hasSemanticHighlights = this._languageFeaturesService.documentHighlightProvider.has(model) && this.editor.getOption(79 /* EditorOption.occurrencesHighlight */);\n        const decorations = matches.map(r => {\n            return {\n                range: r,\n                options: getSelectionHighlightDecorationOptions(hasSemanticHighlights)\n            };\n        });\n        this._decorations.set(decorations);\n    }\n    dispose() {\n        this._setState(null);\n        super.dispose();\n    }\n};\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\nSelectionHighlighter = SelectionHighlighter_1 = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\n    for (let i = 1, len = ranges.length; i < len; i++) {\n        const range = ranges[i];\n        if (range.isEmpty()) {\n            return false;\n        }\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\n        if (selectedText !== thisSelectedText) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n    const text = model.getValueInRange(range);\n    return (toLowerCase ? text.toLowerCase() : text);\n}\nexport class FocusNextCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusNextCursor',\n            label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\n                args: [],\n            },\n            alias: 'Focus Next Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.shift();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.push(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class FocusPreviousCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusPreviousCursor',\n            label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\n                args: [],\n            },\n            alias: 'Focus Previous Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.pop();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.unshift(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\nregisterEditorAction(FocusNextCursor);\nregisterEditorAction(FocusPreviousCursor);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './highlightDecorations.css';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { activeContrastBorder, editorSelectionHighlight, minimapSelectionOccurrenceHighlight, overviewRulerSelectionHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst wordHighlightBackground = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hcDark: null, hcLight: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nregisterColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hcDark: null, hcLight: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nregisterColor('editor.wordHighlightTextBackground', { light: wordHighlightBackground, dark: wordHighlightBackground, hcDark: wordHighlightBackground, hcLight: wordHighlightBackground }, nls.localize('wordHighlightText', 'Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst wordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nregisterColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nregisterColor('editor.wordHighlightTextBorder', { light: wordHighlightBorder, dark: wordHighlightBorder, hcDark: wordHighlightBorder, hcLight: wordHighlightBorder }, nls.localize('wordHighlightTextBorder', \"Border color of a textual occurrence for a symbol.\"));\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hcDark: '#A0A0A0CC', hcLight: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hcDark: '#C0A0C0CC', hcLight: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightTextForeground = registerColor('editorOverviewRuler.wordHighlightTextForeground', { dark: overviewRulerSelectionHighlightForeground, light: overviewRulerSelectionHighlightForeground, hcDark: overviewRulerSelectionHighlightForeground, hcLight: overviewRulerSelectionHighlightForeground }, nls.localize('overviewRulerWordHighlightTextForeground', 'Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst _WRITE_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight-strong',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlightStrong',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nconst _TEXT_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight-text',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlightText',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightTextForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nconst _SELECTION_HIGHLIGHT_OPTIONS = ModelDecorationOptions.register({\n    description: 'selection-highlight-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nconst _SELECTION_HIGHLIGHT_OPTIONS_NO_OVERVIEW = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n});\nconst _REGULAR_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nexport function getHighlightDecorationOptions(kind) {\n    if (kind === DocumentHighlightKind.Write) {\n        return _WRITE_OPTIONS;\n    }\n    else if (kind === DocumentHighlightKind.Text) {\n        return _TEXT_OPTIONS;\n    }\n    else {\n        return _REGULAR_OPTIONS;\n    }\n}\nexport function getSelectionHighlightDecorationOptions(hasSemanticHighlights) {\n    // Show in overviewRuler only if model has no semantic highlighting\n    return (hasSemanticHighlights ? _SELECTION_HIGHLIGHT_OPTIONS_NO_OVERVIEW : _SELECTION_HIGHLIGHT_OPTIONS);\n}\nregisterThemingParticipant((theme, collector) => {\n    const selectionHighlight = theme.getColor(editorSelectionHighlight);\n    if (selectionHighlight) {\n        collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ParameterHintsController_1;\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = ParameterHintsController_1 = class ParameterHintsController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(ParameterHintsController_1.ID);\n    }\n    constructor(editor, instantiationService, languageFeaturesService) {\n        super();\n        this.editor = editor;\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n        this._register(this.model.onChangedHints(newParameterHints => {\n            var _a;\n            if (newParameterHints) {\n                this.widget.value.show();\n                this.widget.value.render(newParameterHints);\n            }\n            else {\n                (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n            }\n        }));\n        this.widget = new Lazy(() => this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor, this.model)));\n    }\n    cancel() {\n        this.model.cancel();\n    }\n    previous() {\n        var _a;\n        (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.previous();\n    }\n    next() {\n        var _a;\n        (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.next();\n    }\n    trigger(context) {\n        this.model.trigger(context, 0);\n    }\n};\nParameterHintsController.ID = 'editor.controller.parameterHints';\nParameterHintsController = ParameterHintsController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, ILanguageFeaturesService)\n], ParameterHintsController);\nexport { ParameterHintsController };\nexport class TriggerParameterHintsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.triggerParameterHints',\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n            alias: 'Trigger Parameter Hints',\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ParameterHintsController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.trigger({\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke\n        });\n    }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'closeParameterHints',\n    precondition: Context.Visible,\n    handler: x => x.cancel(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showPrevParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.previous(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showNextParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.next(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n    ParameterHintState.Default = { type: 0 /* Type.Default */ };\n    class Pending {\n        constructor(request, previouslyActiveHints) {\n            this.request = request;\n            this.previouslyActiveHints = previouslyActiveHints;\n            this.type = 2 /* Type.Pending */;\n        }\n    }\n    ParameterHintState.Pending = Pending;\n    class Active {\n        constructor(hints) {\n            this.hints = hints;\n            this.type = 1 /* Type.Active */;\n        }\n    }\n    ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport class ParameterHintsModel extends Disposable {\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n        super();\n        this._onChangedHints = this._register(new Emitter());\n        this.onChangedHints = this._onChangedHints.event;\n        this.triggerOnType = false;\n        this._state = ParameterHintState.Default;\n        this._pendingTriggers = [];\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        this.triggerId = 0;\n        this.editor = editor;\n        this.providers = providers;\n        this.throttledDelayer = new Delayer(delay);\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\n        this.onEditorConfigurationChange();\n        this.onModelChanged();\n    }\n    get state() { return this._state; }\n    set state(value) {\n        if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\n            this._state.request.cancel();\n        }\n        this._state = value;\n    }\n    cancel(silent = false) {\n        this.state = ParameterHintState.Default;\n        this.throttledDelayer.cancel();\n        if (!silent) {\n            this._onChangedHints.fire(undefined);\n        }\n    }\n    trigger(context, delay) {\n        const model = this.editor.getModel();\n        if (!model || !this.providers.has(model)) {\n            return;\n        }\n        const triggerId = ++this.triggerId;\n        this._pendingTriggers.push(context);\n        this.throttledDelayer.trigger(() => {\n            return this.doTrigger(triggerId);\n        }, delay)\n            .catch(onUnexpectedError);\n    }\n    next() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const last = (activeSignature % length) === (length - 1);\n        const cycle = this.editor.getOption(84 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on last signature of list\n        if ((length < 2 || last) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const first = activeSignature === 0;\n        const cycle = this.editor.getOption(84 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on first signature of list\n        if ((length < 2 || first) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        this.state = new ParameterHintState.Active(Object.assign(Object.assign({}, this.state.hints), { activeSignature }));\n        this._onChangedHints.fire(this.state.hints);\n    }\n    doTrigger(triggerId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\n            const activeSignatureHelp = this.getLastActiveHints();\n            this.cancel(true);\n            if (this._pendingTriggers.length === 0) {\n                return false;\n            }\n            const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n            this._pendingTriggers = [];\n            const triggerContext = {\n                triggerKind: context.triggerKind,\n                triggerCharacter: context.triggerCharacter,\n                isRetrigger: isRetrigger,\n                activeSignatureHelp: activeSignatureHelp\n            };\n            if (!this.editor.hasModel()) {\n                return false;\n            }\n            const model = this.editor.getModel();\n            const position = this.editor.getPosition();\n            this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n            try {\n                const result = yield this.state.request;\n                // Check that we are still resolving the correct signature help\n                if (triggerId !== this.triggerId) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    return false;\n                }\n                if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    this._lastSignatureHelpResult.clear();\n                    this.cancel();\n                    return false;\n                }\n                else {\n                    this.state = new ParameterHintState.Active(result.value);\n                    this._lastSignatureHelpResult.value = result;\n                    this._onChangedHints.fire(this.state.hints);\n                    return true;\n                }\n            }\n            catch (error) {\n                if (triggerId === this.triggerId) {\n                    this.state = ParameterHintState.Default;\n                }\n                onUnexpectedError(error);\n                return false;\n            }\n        });\n    }\n    getLastActiveHints() {\n        switch (this.state.type) {\n            case 1 /* ParameterHintState.Type.Active */: return this.state.hints;\n            case 2 /* ParameterHintState.Type.Pending */: return this.state.previouslyActiveHints;\n            default: return undefined;\n        }\n    }\n    get isTriggered() {\n        return this.state.type === 1 /* ParameterHintState.Type.Active */\n            || this.state.type === 2 /* ParameterHintState.Type.Pending */\n            || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n        this.cancel();\n        this.triggerChars.clear();\n        this.retriggerChars.clear();\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const support of this.providers.ordered(model)) {\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\n                if (ch.length) {\n                    const charCode = ch.charCodeAt(0);\n                    this.triggerChars.add(charCode);\n                    // All trigger characters are also considered retrigger characters\n                    this.retriggerChars.add(charCode);\n                }\n            }\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\n                if (ch.length) {\n                    this.retriggerChars.add(ch.charCodeAt(0));\n                }\n            }\n        }\n    }\n    onDidType(text) {\n        if (!this.triggerOnType) {\n            return;\n        }\n        const lastCharIndex = text.length - 1;\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n            this.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n                triggerCharacter: text.charAt(lastCharIndex),\n            });\n        }\n    }\n    onCursorChange(e) {\n        if (e.source === 'mouse') {\n            this.cancel();\n        }\n        else if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onModelContentChange() {\n        if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onEditorConfigurationChange() {\n        this.triggerOnType = this.editor.getOption(84 /* EditorOption.parameterHints */).enabled;\n        if (!this.triggerOnType) {\n            this.cancel();\n        }\n    }\n    dispose() {\n        this.cancel(true);\n        super.dispose();\n    }\n}\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\nfunction mergeTriggerContexts(previous, current) {\n    switch (current.triggerKind) {\n        case languages.SignatureHelpTriggerKind.Invoke:\n            // Invoke overrides previous triggers.\n            return current;\n        case languages.SignatureHelpTriggerKind.ContentChange:\n            // Ignore content changes triggers\n            return previous;\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\n        default:\n            return current;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n    Visible: new RawContextKey('parameterHintsVisible', false),\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\n};\nexport function provideSignatureHelp(registry, model, position, context, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const supports = registry.ordered(model);\n        for (const support of supports) {\n            try {\n                const result = yield support.provideSignatureHelp(model, position, token, context);\n                if (result) {\n                    return result;\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = yield provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n            isRetrigger: false,\n            triggerCharacter,\n        }, CancellationToken.None);\n        if (!result) {\n            return undefined;\n        }\n        setTimeout(() => result.dispose(), 0);\n        return result.value;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ParameterHintsWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { listHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = ParameterHintsWidget_1 = class ParameterHintsWidget extends Disposable {\n    constructor(editor, model, contextKeyService, openerService, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.renderDisposeables = this._register(new DisposableStore());\n        this.visible = false;\n        this.announcedLabel = null;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n    }\n    createParameterHintDOMNodes() {\n        const element = $('.editor-widget.parameter-hints-widget');\n        const wrapper = dom.append(element, $('.phwrapper'));\n        wrapper.tabIndex = -1;\n        const controls = dom.append(wrapper, $('.controls'));\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n        const overloads = dom.append(controls, $('.overloads'));\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n        this._register(dom.addDisposableListener(previous, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.previous();\n        }));\n        this._register(dom.addDisposableListener(next, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.next();\n        }));\n        const body = $('.body');\n        const scrollbar = new DomScrollableElement(body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        this._register(scrollbar);\n        wrapper.appendChild(scrollbar.getDomNode());\n        const signature = dom.append(body, $('.signature'));\n        const docs = dom.append(body, $('.docs'));\n        element.style.userSelect = 'text';\n        this.domNodes = {\n            element,\n            signature,\n            overloads,\n            docs,\n            scrollbar,\n        };\n        this.editor.addContentWidget(this);\n        this.hide();\n        this._register(this.editor.onDidChangeCursorSelection(e => {\n            if (this.visible) {\n                this.editor.layoutContentWidget(this);\n            }\n        }));\n        const updateFont = () => {\n            if (!this.domNodes) {\n                return;\n            }\n            const fontInfo = this.editor.getOption(49 /* EditorOption.fontInfo */);\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        };\n        updateFont();\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\n            .filter(e => e.hasChanged(49 /* EditorOption.fontInfo */))\n            .on(updateFont, null));\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n        this.updateMaxHeight();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(() => {\n            var _a;\n            (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.add('visible');\n        }, 100);\n        this.editor.layoutContentWidget(this);\n    }\n    hide() {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.visible) {\n            return;\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.remove('visible');\n        this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n            };\n        }\n        return null;\n    }\n    render(hints) {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.domNodes) {\n            return;\n        }\n        const multiple = hints.signatures.length > 1;\n        this.domNodes.element.classList.toggle('multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.domNodes.signature.innerText = '';\n        this.domNodes.docs.innerText = '';\n        const signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        const code = dom.append(this.domNodes.signature, $('.code'));\n        const fontInfo = this.editor.getOption(49 /* EditorOption.fontInfo */);\n        code.style.fontSize = `${fontInfo.fontSize}px`;\n        code.style.fontFamily = fontInfo.fontFamily;\n        const hasParameters = signature.parameters.length > 0;\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n        if (!hasParameters) {\n            const label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, activeParameterIndex);\n        }\n        const activeParameter = signature.parameters[activeParameterIndex];\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n            const documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\n        }\n        if (signature.documentation === undefined) {\n            /** no op */\n        }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\n            dom.append(this.domNodes.docs, renderedContents.element);\n        }\n        const hasDocs = this.hasDocs(signature, activeParameter);\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\n        this.domNodes.overloads.textContent =\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n        if (activeParameter) {\n            let labelToAnnounce = '';\n            const param = signature.parameters[activeParameterIndex];\n            if (Array.isArray(param.label)) {\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n            }\n            else {\n                labelToAnnounce = param.label;\n            }\n            if (param.documentation) {\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n            }\n            if (signature.documentation) {\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n            }\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n            asyncRenderCallback: () => {\n                var _a;\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n            }\n        }));\n        renderedContents.element.classList.add('markdown-docs');\n        return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n            return true;\n        }\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n            return true;\n        }\n        return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n        const beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        const paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        const afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n        const param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else if (!param.label.length) {\n            return [0, 0];\n        }\n        else {\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n            regex.test(signature.label);\n            const idx = regex.lastIndex - param.label.length;\n            return idx >= 0\n                ? [idx, regex.lastIndex]\n                : [0, 0];\n        }\n    }\n    next() {\n        this.editor.focus();\n        this.model.next();\n    }\n    previous() {\n        this.editor.focus();\n        this.model.previous();\n    }\n    getDomNode() {\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        return this.domNodes.element;\n    }\n    getId() {\n        return ParameterHintsWidget_1.ID;\n    }\n    updateMaxHeight() {\n        if (!this.domNodes) {\n            return;\n        }\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        const maxHeight = `${height}px`;\n        this.domNodes.element.style.maxHeight = maxHeight;\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n        if (wrapper.length) {\n            wrapper[0].style.maxHeight = maxHeight;\n        }\n    }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = ParameterHintsWidget_1 = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, IOpenerService),\n    __param(4, ILanguageService)\n], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nregisterColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar RenameController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                const res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = RenameController_1 = class RenameController {\n    static get(editor) {\n        return editor.getContribution(RenameController_1.ID);\n    }\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // set up cancellation token to prevent reentrant rename, this\n            // is the parent to the resolve- and rename-tokens\n            this._cts.dispose(true);\n            this._cts = new CancellationTokenSource();\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            // part 1 - resolve rename location\n            const cts1 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, undefined, this._cts.token);\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(cts1.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            finally {\n                cts1.dispose();\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (cts1.token.isCancellationRequested) {\n                return undefined;\n            }\n            // part 2 - do rename at location\n            const cts2 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range, this._cts.token);\n            const selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, cts2.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                cts2.dispose();\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, cts2.token), cts2.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(renameResult, {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    code: 'undoredo.rename',\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    respectAutoSaveConfig: true\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            }).finally(() => {\n                cts2.dispose();\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = RenameController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 1024 /* KeyMod.Shift */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(49 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        const widgetBorderColor = theme.getColor(widgetBorder);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(49 /* EditorOption.fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    beforeRender() {\n        var _a, _b;\n        const [accept, preview] = this._acceptKeybindings;\n        this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n        return null;\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor) {\n        var _a;\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(!document.hasFocus())));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ModelSemanticColoring_1;\nimport { Disposable, dispose } from '../../../../base/common/lifecycle.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { getDocumentSemanticTokens, hasDocumentSemanticTokensProvider, isSemanticTokens, isSemanticTokensEdits } from '../common/getSemanticTokens.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { SEMANTIC_HIGHLIGHTING_SETTING_ID, isSemanticColoringEnabled } from '../common/semanticTokensConfig.js';\nlet DocumentSemanticTokensFeature = class DocumentSemanticTokensFeature extends Disposable {\n    constructor(semanticTokensStylingService, modelService, themeService, configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._watchers = Object.create(null);\n        const register = (model) => {\n            this._watchers[model.uri.toString()] = new ModelSemanticColoring(model, semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService);\n        };\n        const deregister = (model, modelSemanticColoring) => {\n            modelSemanticColoring.dispose();\n            delete this._watchers[model.uri.toString()];\n        };\n        const handleSettingOrThemeChange = () => {\n            for (const model of modelService.getModels()) {\n                const curr = this._watchers[model.uri.toString()];\n                if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n                    if (!curr) {\n                        register(model);\n                    }\n                }\n                else {\n                    if (curr) {\n                        deregister(model, curr);\n                    }\n                }\n            }\n        };\n        this._register(modelService.onModelAdded((model) => {\n            if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n                register(model);\n            }\n        }));\n        this._register(modelService.onModelRemoved((model) => {\n            const curr = this._watchers[model.uri.toString()];\n            if (curr) {\n                deregister(model, curr);\n            }\n        }));\n        this._register(configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                handleSettingOrThemeChange();\n            }\n        }));\n        this._register(themeService.onDidColorThemeChange(handleSettingOrThemeChange));\n    }\n    dispose() {\n        // Dispose all watchers\n        for (const watcher of Object.values(this._watchers)) {\n            watcher.dispose();\n        }\n        super.dispose();\n    }\n};\nDocumentSemanticTokensFeature = __decorate([\n    __param(0, ISemanticTokensStylingService),\n    __param(1, IModelService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], DocumentSemanticTokensFeature);\nexport { DocumentSemanticTokensFeature };\nlet ModelSemanticColoring = ModelSemanticColoring_1 = class ModelSemanticColoring extends Disposable {\n    constructor(model, _semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._semanticTokensStylingService = _semanticTokensStylingService;\n        this._isDisposed = false;\n        this._model = model;\n        this._provider = languageFeaturesService.documentSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentSemanticTokens', { min: ModelSemanticColoring_1.REQUEST_MIN_DELAY, max: ModelSemanticColoring_1.REQUEST_MAX_DELAY });\n        this._fetchDocumentSemanticTokens = this._register(new RunOnceScheduler(() => this._fetchDocumentSemanticTokensNow(), ModelSemanticColoring_1.REQUEST_MIN_DELAY));\n        this._currentDocumentResponse = null;\n        this._currentDocumentRequestCancellationTokenSource = null;\n        this._documentProvidersChangeListeners = [];\n        this._providersChangedDuringRequest = false;\n        this._register(this._model.onDidChangeContent(() => {\n            if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        }));\n        this._register(this._model.onDidChangeAttached(() => {\n            if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        }));\n        this._register(this._model.onDidChangeLanguage(() => {\n            // clear any outstanding state\n            if (this._currentDocumentResponse) {\n                this._currentDocumentResponse.dispose();\n                this._currentDocumentResponse = null;\n            }\n            if (this._currentDocumentRequestCancellationTokenSource) {\n                this._currentDocumentRequestCancellationTokenSource.cancel();\n                this._currentDocumentRequestCancellationTokenSource = null;\n            }\n            this._setDocumentSemanticTokens(null, null, null, []);\n            this._fetchDocumentSemanticTokens.schedule(0);\n        }));\n        const bindDocumentChangeListeners = () => {\n            dispose(this._documentProvidersChangeListeners);\n            this._documentProvidersChangeListeners = [];\n            for (const provider of this._provider.all(model)) {\n                if (typeof provider.onDidChange === 'function') {\n                    this._documentProvidersChangeListeners.push(provider.onDidChange(() => {\n                        if (this._currentDocumentRequestCancellationTokenSource) {\n                            // there is already a request running,\n                            this._providersChangedDuringRequest = true;\n                            return;\n                        }\n                        this._fetchDocumentSemanticTokens.schedule(0);\n                    }));\n                }\n            }\n        };\n        bindDocumentChangeListeners();\n        this._register(this._provider.onDidChange(() => {\n            bindDocumentChangeListeners();\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }));\n        this._register(themeService.onDidColorThemeChange(_ => {\n            // clear out existing tokens\n            this._setDocumentSemanticTokens(null, null, null, []);\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }));\n        this._fetchDocumentSemanticTokens.schedule(0);\n    }\n    dispose() {\n        if (this._currentDocumentResponse) {\n            this._currentDocumentResponse.dispose();\n            this._currentDocumentResponse = null;\n        }\n        if (this._currentDocumentRequestCancellationTokenSource) {\n            this._currentDocumentRequestCancellationTokenSource.cancel();\n            this._currentDocumentRequestCancellationTokenSource = null;\n        }\n        dispose(this._documentProvidersChangeListeners);\n        this._documentProvidersChangeListeners = [];\n        this._setDocumentSemanticTokens(null, null, null, []);\n        this._isDisposed = true;\n        super.dispose();\n    }\n    _fetchDocumentSemanticTokensNow() {\n        if (this._currentDocumentRequestCancellationTokenSource) {\n            // there is already a request running, let it finish...\n            return;\n        }\n        if (!hasDocumentSemanticTokensProvider(this._provider, this._model)) {\n            // there is no provider\n            if (this._currentDocumentResponse) {\n                // there are semantic tokens set\n                this._model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!this._model.isAttachedToEditor()) {\n            // this document is not visible, there is no need to fetch semantic tokens for it\n            return;\n        }\n        const cancellationTokenSource = new CancellationTokenSource();\n        const lastProvider = this._currentDocumentResponse ? this._currentDocumentResponse.provider : null;\n        const lastResultId = this._currentDocumentResponse ? this._currentDocumentResponse.resultId || null : null;\n        const request = getDocumentSemanticTokens(this._provider, this._model, lastProvider, lastResultId, cancellationTokenSource.token);\n        this._currentDocumentRequestCancellationTokenSource = cancellationTokenSource;\n        this._providersChangedDuringRequest = false;\n        const pendingChanges = [];\n        const contentChangeListener = this._model.onDidChangeContent((e) => {\n            pendingChanges.push(e);\n        });\n        const sw = new StopWatch(false);\n        request.then((res) => {\n            this._debounceInformation.update(this._model, sw.elapsed());\n            this._currentDocumentRequestCancellationTokenSource = null;\n            contentChangeListener.dispose();\n            if (!res) {\n                this._setDocumentSemanticTokens(null, null, null, pendingChanges);\n            }\n            else {\n                const { provider, tokens } = res;\n                const styling = this._semanticTokensStylingService.getStyling(provider);\n                this._setDocumentSemanticTokens(provider, tokens || null, styling, pendingChanges);\n            }\n        }, (err) => {\n            const isExpectedError = err && (errors.isCancellationError(err) || (typeof err.message === 'string' && err.message.indexOf('busy') !== -1));\n            if (!isExpectedError) {\n                errors.onUnexpectedError(err);\n            }\n            // Semantic tokens eats up all errors and considers errors to mean that the result is temporarily not available\n            // The API does not have a special error kind to express this...\n            this._currentDocumentRequestCancellationTokenSource = null;\n            contentChangeListener.dispose();\n            if (pendingChanges.length > 0 || this._providersChangedDuringRequest) {\n                // More changes occurred while the request was running\n                if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                    this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n                }\n            }\n        });\n    }\n    static _copy(src, srcOffset, dest, destOffset, length) {\n        // protect against overflows\n        length = Math.min(length, dest.length - destOffset, src.length - srcOffset);\n        for (let i = 0; i < length; i++) {\n            dest[destOffset + i] = src[srcOffset + i];\n        }\n    }\n    _setDocumentSemanticTokens(provider, tokens, styling, pendingChanges) {\n        const currentResponse = this._currentDocumentResponse;\n        const rescheduleIfNeeded = () => {\n            if ((pendingChanges.length > 0 || this._providersChangedDuringRequest) && !this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        };\n        if (this._currentDocumentResponse) {\n            this._currentDocumentResponse.dispose();\n            this._currentDocumentResponse = null;\n        }\n        if (this._isDisposed) {\n            // disposed!\n            if (provider && tokens) {\n                provider.releaseDocumentSemanticTokens(tokens.resultId);\n            }\n            return;\n        }\n        if (!provider || !styling) {\n            this._model.tokenization.setSemanticTokens(null, false);\n            return;\n        }\n        if (!tokens) {\n            this._model.tokenization.setSemanticTokens(null, true);\n            rescheduleIfNeeded();\n            return;\n        }\n        if (isSemanticTokensEdits(tokens)) {\n            if (!currentResponse) {\n                // not possible!\n                this._model.tokenization.setSemanticTokens(null, true);\n                return;\n            }\n            if (tokens.edits.length === 0) {\n                // nothing to do!\n                tokens = {\n                    resultId: tokens.resultId,\n                    data: currentResponse.data\n                };\n            }\n            else {\n                let deltaLength = 0;\n                for (const edit of tokens.edits) {\n                    deltaLength += (edit.data ? edit.data.length : 0) - edit.deleteCount;\n                }\n                const srcData = currentResponse.data;\n                const destData = new Uint32Array(srcData.length + deltaLength);\n                let srcLastStart = srcData.length;\n                let destLastStart = destData.length;\n                for (let i = tokens.edits.length - 1; i >= 0; i--) {\n                    const edit = tokens.edits[i];\n                    if (edit.start > srcData.length) {\n                        styling.warnInvalidEditStart(currentResponse.resultId, tokens.resultId, i, edit.start, srcData.length);\n                        // The edits are invalid and there's no way to recover\n                        this._model.tokenization.setSemanticTokens(null, true);\n                        return;\n                    }\n                    const copyCount = srcLastStart - (edit.start + edit.deleteCount);\n                    if (copyCount > 0) {\n                        ModelSemanticColoring_1._copy(srcData, srcLastStart - copyCount, destData, destLastStart - copyCount, copyCount);\n                        destLastStart -= copyCount;\n                    }\n                    if (edit.data) {\n                        ModelSemanticColoring_1._copy(edit.data, 0, destData, destLastStart - edit.data.length, edit.data.length);\n                        destLastStart -= edit.data.length;\n                    }\n                    srcLastStart = edit.start;\n                }\n                if (srcLastStart > 0) {\n                    ModelSemanticColoring_1._copy(srcData, 0, destData, 0, srcLastStart);\n                }\n                tokens = {\n                    resultId: tokens.resultId,\n                    data: destData\n                };\n            }\n        }\n        if (isSemanticTokens(tokens)) {\n            this._currentDocumentResponse = new SemanticTokensResponse(provider, tokens.resultId, tokens.data);\n            const result = toMultilineTokens2(tokens, styling, this._model.getLanguageId());\n            // Adjust incoming semantic tokens\n            if (pendingChanges.length > 0) {\n                // More changes occurred while the request was running\n                // We need to:\n                // 1. Adjust incoming semantic tokens\n                // 2. Request them again\n                for (const change of pendingChanges) {\n                    for (const area of result) {\n                        for (const singleChange of change.changes) {\n                            area.applyEdit(singleChange.range, singleChange.text);\n                        }\n                    }\n                }\n            }\n            this._model.tokenization.setSemanticTokens(result, true);\n        }\n        else {\n            this._model.tokenization.setSemanticTokens(null, true);\n        }\n        rescheduleIfNeeded();\n    }\n};\nModelSemanticColoring.REQUEST_MIN_DELAY = 300;\nModelSemanticColoring.REQUEST_MAX_DELAY = 2000;\nModelSemanticColoring = ModelSemanticColoring_1 = __decorate([\n    __param(1, ISemanticTokensStylingService),\n    __param(2, IThemeService),\n    __param(3, ILanguageFeatureDebounceService),\n    __param(4, ILanguageFeaturesService)\n], ModelSemanticColoring);\nclass SemanticTokensResponse {\n    constructor(provider, resultId, data) {\n        this.provider = provider;\n        this.resultId = resultId;\n        this.data = data;\n    }\n    dispose() {\n        this.provider.releaseDocumentSemanticTokens(this.resultId);\n    }\n}\nregisterEditorFeature(DocumentSemanticTokensFeature);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { encodeSemanticTokensDto } from '../../../common/services/semanticTokensDto.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function isSemanticTokens(v) {\n    return v && !!(v.data);\n}\nexport function isSemanticTokensEdits(v) {\n    return v && Array.isArray(v.edits);\n}\nexport class DocumentSemanticTokensResult {\n    constructor(provider, tokens, error) {\n        this.provider = provider;\n        this.tokens = tokens;\n        this.error = error;\n    }\n}\nexport function hasDocumentSemanticTokensProvider(registry, model) {\n    return registry.has(model);\n}\nfunction getDocumentSemanticTokensProviders(registry, model) {\n    const groups = registry.orderedGroups(model);\n    return (groups.length > 0 ? groups[0] : []);\n}\nexport function getDocumentSemanticTokens(registry, model, lastProvider, lastResultId, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getDocumentSemanticTokensProviders(registry, model);\n        // Get tokens from all providers at the same time.\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            let result;\n            let error = null;\n            try {\n                result = yield provider.provideDocumentSemanticTokens(model, (provider === lastProvider ? lastResultId : null), token);\n            }\n            catch (err) {\n                error = err;\n                result = null;\n            }\n            if (!result || (!isSemanticTokens(result) && !isSemanticTokensEdits(result))) {\n                result = null;\n            }\n            return new DocumentSemanticTokensResult(provider, result, error);\n        })));\n        // Try to return the first result with actual tokens or\n        // the first result which threw an error (!!)\n        for (const result of results) {\n            if (result.error) {\n                throw result.error;\n            }\n            if (result.tokens) {\n                return result;\n            }\n        }\n        // Return the first result, even if it doesn't have tokens\n        if (results.length > 0) {\n            return results[0];\n        }\n        return null;\n    });\n}\nfunction _getDocumentSemanticTokensProviderHighestGroup(registry, model) {\n    const result = registry.orderedGroups(model);\n    return (result.length > 0 ? result[0] : null);\n}\nclass DocumentRangeSemanticTokensResult {\n    constructor(provider, tokens) {\n        this.provider = provider;\n        this.tokens = tokens;\n    }\n}\nexport function hasDocumentRangeSemanticTokensProvider(providers, model) {\n    return providers.has(model);\n}\nfunction getDocumentRangeSemanticTokensProviders(providers, model) {\n    const groups = providers.orderedGroups(model);\n    return (groups.length > 0 ? groups[0] : []);\n}\nexport function getDocumentRangeSemanticTokens(registry, model, range, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getDocumentRangeSemanticTokensProviders(registry, model);\n        // Get tokens from all providers at the same time.\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            let result;\n            try {\n                result = yield provider.provideDocumentRangeSemanticTokens(model, range, token);\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                result = null;\n            }\n            if (!result || !isSemanticTokens(result)) {\n                result = null;\n            }\n            return new DocumentRangeSemanticTokensResult(provider, result);\n        })));\n        // Try to return the first result with actual tokens\n        for (const result of results) {\n            if (result.tokens) {\n                return result;\n            }\n        }\n        // Return the first result, even if it doesn't have tokens\n        if (results.length > 0) {\n            return results[0];\n        }\n        return null;\n    });\n}\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const providers = _getDocumentSemanticTokensProviderHighestGroup(documentSemanticTokensProvider, model);\n    if (!providers) {\n        // there is no provider => fall back to a document range semantic tokens provider\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokensLegend', uri);\n    }\n    return providers[0].getLegend();\n}));\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    if (!hasDocumentSemanticTokensProvider(documentSemanticTokensProvider, model)) {\n        // there is no provider => fall back to a document range semantic tokens provider\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokens', uri, model.getFullModelRange());\n    }\n    const r = yield getDocumentSemanticTokens(documentSemanticTokensProvider, model, null, null, CancellationToken.None);\n    if (!r) {\n        return undefined;\n    }\n    const { provider, tokens } = r;\n    if (!tokens || !isSemanticTokens(tokens)) {\n        return undefined;\n    }\n    const buff = encodeSemanticTokensDto({\n        id: 0,\n        type: 'full',\n        data: tokens.data\n    });\n    if (tokens.resultId) {\n        provider.releaseDocumentSemanticTokens(tokens.resultId);\n    }\n    return buff;\n}));\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const providers = getDocumentRangeSemanticTokensProviders(documentRangeSemanticTokensProvider, model);\n    if (providers.length === 0) {\n        // no providers\n        return undefined;\n    }\n    if (providers.length === 1) {\n        // straight forward case, just a single provider\n        return providers[0].getLegend();\n    }\n    if (!range || !Range.isIRange(range)) {\n        // if no range is provided, we cannot support multiple providers\n        // as we cannot fall back to the one which would give results\n        // => return the first legend for backwards compatibility and print a warning\n        console.warn(`provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in`);\n        return providers[0].getLegend();\n    }\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n    if (!result) {\n        return undefined;\n    }\n    return result.provider.getLegend();\n}));\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(uri instanceof URI);\n    assertType(Range.isIRange(range));\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n    if (!result || !result.tokens) {\n        // there is no provider or it didn't return tokens\n        return undefined;\n    }\n    return encodeSemanticTokensDto({\n        id: 0,\n        type: 'full',\n        data: result.tokens.data\n    });\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ViewportSemanticTokensContribution_1;\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../common/getSemanticTokens.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../common/semanticTokensConfig.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nlet ViewportSemanticTokensContribution = ViewportSemanticTokensContribution_1 = class ViewportSemanticTokensContribution extends Disposable {\n    static get(editor) {\n        return editor.getContribution(ViewportSemanticTokensContribution_1.ID);\n    }\n    constructor(editor, _semanticTokensStylingService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._semanticTokensStylingService = _semanticTokensStylingService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        scheduleTokenizeViewport();\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.tokenization.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._semanticTokensStylingService.getStyling(provider);\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = ViewportSemanticTokensContribution_1 = __decorate([\n    __param(1, ISemanticTokensStylingService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nexport { ViewportSemanticTokensContribution };\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar SmartSelectController_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = SmartSelectController_1 = class SmartSelectController {\n    static get(editor) {\n        return editor.getContribution(SmartSelectController_1.ID);\n    }\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(111 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = SmartSelectController_1 = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nexport { SmartSelectController };\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        const work = [];\n        const allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            const oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            const oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true, selectSubwords: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    constructor(selectSubwords = true) {\n        this.selectSubwords = selectSubwords;\n    }\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            if (this.selectSubwords) {\n                this._addInWordRanges(bucket, model, position);\n            }\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        const { word, startColumn } = obj;\n        const offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            const ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            const ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ToggleStickyScroll, FocusStickyScroll, SelectEditor, SelectPreviousStickyScrollLine, SelectNextStickyScrollLine, GoToStickyScrollLine } from './stickyScrollActions.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterAction2(ToggleStickyScroll);\nregisterAction2(FocusStickyScroll);\nregisterAction2(SelectPreviousStickyScrollLine);\nregisterAction2(SelectNextStickyScrollLine);\nregisterAction2(GoToStickyScrollLine);\nregisterAction2(SelectEditor);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { localize } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nexport class ToggleStickyScroll extends Action2 {\n    constructor() {\n        super({\n            id: 'editor.action.toggleStickyScroll',\n            title: {\n                value: localize('toggleStickyScroll', \"Toggle Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mitoggleStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Sticky Scroll\"),\n                original: 'Toggle Sticky Scroll',\n            },\n            category: Categories.View,\n            toggled: {\n                condition: ContextKeyExpr.equals('config.editor.stickyScroll.enabled', true),\n                title: localize('stickyScroll', \"Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'miStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Sticky Scroll\"),\n            },\n            menu: [\n                { id: MenuId.CommandPalette },\n                { id: MenuId.MenubarAppearanceMenu, group: '4_editor', order: 3 },\n                { id: MenuId.StickyScrollContext }\n            ]\n        });\n    }\n    run(accessor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor.get(IConfigurationService);\n            const newValue = !configurationService.getValue('editor.stickyScroll.enabled');\n            return configurationService.updateValue('editor.stickyScroll.enabled', newValue);\n        });\n    }\n}\nconst weight = 100 /* KeybindingWeight.EditorContrib */;\nexport class FocusStickyScroll extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.focusStickyScroll',\n            title: {\n                value: localize('focusStickyScroll', \"Focus Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mifocusStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Focus Sticky Scroll\"),\n                original: 'Focus Sticky Scroll',\n            },\n            precondition: ContextKeyExpr.and(ContextKeyExpr.has('config.editor.stickyScroll.enabled'), EditorContextKeys.stickyScrollVisible),\n            menu: [\n                { id: MenuId.CommandPalette },\n            ]\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n}\nexport class SelectNextStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectNextStickyScrollLine',\n            title: {\n                value: localize('selectNextStickyScrollLine.title', \"Select next sticky scroll line\"),\n                original: 'Select next sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 18 /* KeyCode.DownArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusNext();\n    }\n}\nexport class SelectPreviousStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectPreviousStickyScrollLine',\n            title: {\n                value: localize('selectPreviousStickyScrollLine.title', \"Select previous sticky scroll line\"),\n                original: 'Select previous sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 16 /* KeyCode.UpArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusPrevious();\n    }\n}\nexport class GoToStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.goToFocusedStickyScrollLine',\n            title: {\n                value: localize('goToFocusedStickyScrollLine.title', \"Go to focused sticky scroll line\"),\n                original: 'Go to focused sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 3 /* KeyCode.Enter */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToFocused();\n    }\n}\nexport class SelectEditor extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectEditor',\n            title: {\n                value: localize('selectEditor.title', \"Select Editor\"),\n                original: 'Select Editor'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 9 /* KeyCode.Escape */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectEditor();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar StickyScrollController_1;\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getDefinitionsAtPosition } from '../../gotoSymbol/browser/goToSymbol.js';\nimport { goToDefinitionWithLocation } from '../../inlayHints/browser/inlayHintsLocations.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StickyRange } from './stickyScrollElement.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nlet StickyScrollController = StickyScrollController_1 = class StickyScrollController extends Disposable {\n    constructor(_editor, _contextMenuService, _languageFeaturesService, _instaService, _languageConfigurationService, _languageFeatureDebounceService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instaService = _instaService;\n        this._contextKeyService = _contextKeyService;\n        this._sessionStore = new DisposableStore();\n        this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n        this._candidateDefinitionsLength = -1;\n        this._focusedStickyElementIndex = -1;\n        this._enabled = false;\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n        this._endLineNumbers = [];\n        this._showEndForLine = null;\n        this._stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, _languageFeaturesService, _languageConfigurationService);\n        this._register(this._stickyScrollWidget);\n        this._register(this._stickyLineCandidateProvider);\n        this._widgetState = new StickyScrollWidgetState([], [], 0);\n        this._readConfiguration();\n        const stickyScrollDomNode = this._stickyScrollWidget.getDomNode();\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(113 /* EditorOption.stickyScroll */)\n                || e.hasChanged(71 /* EditorOption.minimap */)\n                || e.hasChanged(65 /* EditorOption.lineHeight */)\n                || e.hasChanged(108 /* EditorOption.showFoldingControls */)) {\n                this._readConfiguration();\n            }\n        }));\n        this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.CONTEXT_MENU, (event) => __awaiter(this, void 0, void 0, function* () {\n            this._onContextMenu(event);\n        })));\n        this._stickyScrollFocusedContextKey = EditorContextKeys.stickyScrollFocused.bindTo(this._contextKeyService);\n        this._stickyScrollVisibleContextKey = EditorContextKeys.stickyScrollVisible.bindTo(this._contextKeyService);\n        const focusTracker = this._register(dom.trackFocus(stickyScrollDomNode));\n        this._register(focusTracker.onDidBlur(_ => {\n            // Suppose that the blurring is caused by scrolling, then keep the focus on the sticky scroll\n            // This is determined by the fact that the height of the widget has become zero and there has been no position revealing\n            if (this._positionRevealed === false && stickyScrollDomNode.clientHeight === 0) {\n                this._focusedStickyElementIndex = -1;\n                this.focus();\n            }\n            // In all other casees, dispose the focus on the sticky scroll\n            else {\n                this._disposeFocusStickyScrollStore();\n            }\n        }));\n        this._register(focusTracker.onDidFocus(_ => {\n            this.focus();\n        }));\n        this._registerMouseListeners();\n        // Suppose that mouse down on the sticky scroll, then do not focus on the sticky scroll because this will be followed by the revealing of a position\n        this._register(dom.addDisposableListener(stickyScrollDomNode, dom.EventType.MOUSE_DOWN, (e) => {\n            this._onMouseDown = true;\n        }));\n    }\n    get stickyScrollCandidateProvider() {\n        return this._stickyLineCandidateProvider;\n    }\n    get stickyScrollWidgetState() {\n        return this._widgetState;\n    }\n    static get(editor) {\n        return editor.getContribution(StickyScrollController_1.ID);\n    }\n    _disposeFocusStickyScrollStore() {\n        var _a;\n        this._stickyScrollFocusedContextKey.set(false);\n        (_a = this._focusDisposableStore) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n    }\n    focus() {\n        // If the mouse is down, do not focus on the sticky scroll\n        if (this._onMouseDown) {\n            this._onMouseDown = false;\n            this._editor.focus();\n            return;\n        }\n        const focusState = this._stickyScrollFocusedContextKey.get();\n        if (focusState === true) {\n            return;\n        }\n        this._focused = true;\n        this._focusDisposableStore = new DisposableStore();\n        this._stickyScrollFocusedContextKey.set(true);\n        this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumbers.length - 1;\n        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n    }\n    focusNext() {\n        if (this._focusedStickyElementIndex < this._stickyScrollWidget.lineNumberCount - 1) {\n            this._focusNav(true);\n        }\n    }\n    focusPrevious() {\n        if (this._focusedStickyElementIndex > 0) {\n            this._focusNav(false);\n        }\n    }\n    selectEditor() {\n        this._editor.focus();\n    }\n    // True is next, false is previous\n    _focusNav(direction) {\n        this._focusedStickyElementIndex = direction ? this._focusedStickyElementIndex + 1 : this._focusedStickyElementIndex - 1;\n        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n    }\n    goToFocused() {\n        const lineNumbers = this._stickyScrollWidget.lineNumbers;\n        this._disposeFocusStickyScrollStore();\n        this._revealPosition({ lineNumber: lineNumbers[this._focusedStickyElementIndex], column: 1 });\n    }\n    _revealPosition(position) {\n        this._reveaInEditor(position, () => this._editor.revealPosition(position));\n    }\n    _revealLineInCenterIfOutsideViewport(position) {\n        this._reveaInEditor(position, () => this._editor.revealLineInCenterIfOutsideViewport(position.lineNumber, 0 /* ScrollType.Smooth */));\n    }\n    _reveaInEditor(position, revealFunction) {\n        if (this._focused) {\n            this._disposeFocusStickyScrollStore();\n        }\n        this._positionRevealed = true;\n        revealFunction();\n        this._editor.setSelection(Range.fromPositions(position));\n        this._editor.focus();\n    }\n    _registerMouseListeners() {\n        const sessionStore = this._register(new DisposableStore());\n        const gesture = this._register(new ClickLinkGesture(this._editor, {\n            extractLineNumberFromMouseEvent: (e) => {\n                const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\n                return position ? position.lineNumber : 0;\n            }\n        }));\n        const getMouseEventTarget = (mouseEvent) => {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            if (mouseEvent.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || mouseEvent.target.detail !== this._stickyScrollWidget.getId()) {\n                // not hovering over our widget\n                return null;\n            }\n            const mouseTargetElement = mouseEvent.target.element;\n            if (!mouseTargetElement || mouseTargetElement.innerText !== mouseTargetElement.innerHTML) {\n                // not on a span element rendering text\n                return null;\n            }\n            const position = this._stickyScrollWidget.getEditorPositionFromNode(mouseTargetElement);\n            if (!position) {\n                // not hovering a sticky scroll line\n                return null;\n            }\n            return {\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column + mouseTargetElement.innerText.length),\n                textElement: mouseTargetElement\n            };\n        };\n        const stickyScrollWidgetDomNode = this._stickyScrollWidget.getDomNode();\n        this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.CLICK, (mouseEvent) => {\n            if (mouseEvent.ctrlKey || mouseEvent.altKey || mouseEvent.metaKey) {\n                // modifier pressed\n                return;\n            }\n            if (!mouseEvent.leftButton) {\n                // not left click\n                return;\n            }\n            if (mouseEvent.shiftKey) {\n                // shift click\n                const lineIndex = this._stickyScrollWidget.getStickyLineIndexFromChildDomNode(mouseEvent.target);\n                if (lineIndex === null) {\n                    return;\n                }\n                const position = new Position(this._endLineNumbers[lineIndex], 1);\n                this._revealLineInCenterIfOutsideViewport(position);\n                return;\n            }\n            // normal click\n            let position = this._stickyScrollWidget.getEditorPositionFromNode(mouseEvent.target);\n            if (!position) {\n                const lineNumber = this._stickyScrollWidget.getLineNumberFromChildDomNode(mouseEvent.target);\n                if (lineNumber === null) {\n                    // not hovering a sticky scroll line\n                    return;\n                }\n                position = new Position(lineNumber, 1);\n            }\n            this._revealPosition(position);\n        }));\n        this._register(dom.addStandardDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_MOVE, (mouseEvent) => {\n            if (mouseEvent.shiftKey) {\n                const currentEndForLineIndex = this._stickyScrollWidget.getStickyLineIndexFromChildDomNode(mouseEvent.target);\n                if (currentEndForLineIndex === null || this._showEndForLine !== null && this._showEndForLine === currentEndForLineIndex) {\n                    return;\n                }\n                this._showEndForLine = currentEndForLineIndex;\n                this._renderStickyScroll();\n                return;\n            }\n            if (this._showEndForLine !== null) {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }\n        }));\n        this._register(dom.addDisposableListener(stickyScrollWidgetDomNode, dom.EventType.MOUSE_LEAVE, (e) => {\n            if (this._showEndForLine !== null) {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }\n        }));\n        this._register(gesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, _keyboardEvent]) => {\n            const mouseTarget = getMouseEventTarget(mouseEvent);\n            if (!mouseTarget || !mouseEvent.hasTriggerModifier || !this._editor.hasModel()) {\n                sessionStore.clear();\n                return;\n            }\n            const { range, textElement } = mouseTarget;\n            if (!range.equalsRange(this._stickyRangeProjectedOnEditor)) {\n                this._stickyRangeProjectedOnEditor = range;\n                sessionStore.clear();\n            }\n            else if (textElement.style.textDecoration === 'underline') {\n                return;\n            }\n            const cancellationToken = new CancellationTokenSource();\n            sessionStore.add(toDisposable(() => cancellationToken.dispose(true)));\n            let currentHTMLChild;\n            getDefinitionsAtPosition(this._languageFeaturesService.definitionProvider, this._editor.getModel(), new Position(range.startLineNumber, range.startColumn + 1), cancellationToken.token).then((candidateDefinitions => {\n                if (cancellationToken.token.isCancellationRequested) {\n                    return;\n                }\n                if (candidateDefinitions.length !== 0) {\n                    this._candidateDefinitionsLength = candidateDefinitions.length;\n                    const childHTML = textElement;\n                    if (currentHTMLChild !== childHTML) {\n                        sessionStore.clear();\n                        currentHTMLChild = childHTML;\n                        currentHTMLChild.style.textDecoration = 'underline';\n                        sessionStore.add(toDisposable(() => {\n                            currentHTMLChild.style.textDecoration = 'none';\n                        }));\n                    }\n                    else if (!currentHTMLChild) {\n                        currentHTMLChild = childHTML;\n                        currentHTMLChild.style.textDecoration = 'underline';\n                        sessionStore.add(toDisposable(() => {\n                            currentHTMLChild.style.textDecoration = 'none';\n                        }));\n                    }\n                }\n                else {\n                    sessionStore.clear();\n                }\n            }));\n        }));\n        this._register(gesture.onCancel(() => {\n            sessionStore.clear();\n        }));\n        this._register(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */ || e.target.detail !== this._stickyScrollWidget.getId()) {\n                // not hovering over our widget\n                return;\n            }\n            const position = this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);\n            if (!position) {\n                // not hovering a sticky scroll line\n                return;\n            }\n            if (this._candidateDefinitionsLength > 1) {\n                if (this._focused) {\n                    this._disposeFocusStickyScrollStore();\n                }\n                this._revealPosition({ lineNumber: position.lineNumber, column: 1 });\n            }\n            this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, { uri: this._editor.getModel().uri, range: this._stickyRangeProjectedOnEditor });\n        })));\n    }\n    _onContextMenu(e) {\n        const event = new StandardMouseEvent(e);\n        this._contextMenuService.showContextMenu({\n            menuId: MenuId.StickyScrollContext,\n            getAnchor: () => event,\n        });\n    }\n    _readConfiguration() {\n        const options = this._editor.getOption(113 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._editor.removeOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.clear();\n            this._enabled = false;\n            return;\n        }\n        else if (options.enabled && !this._enabled) {\n            // When sticky scroll was just enabled, add the listeners on the sticky scroll\n            this._editor.addOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidScrollChange((e) => {\n                if (e.scrollTopChanged) {\n                    this._showEndForLine = null;\n                    this._renderStickyScroll();\n                }\n            }));\n            this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }));\n            this._enabled = true;\n        }\n        const lineNumberOption = this._editor.getOption(66 /* EditorOption.lineNumbers */);\n        if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => {\n                this._showEndForLine = null;\n                this._renderStickyScroll();\n            }));\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._renderStickyScroll();\n        }\n    }\n    _onDidResize() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        // Make sure sticky scroll doesn't take up more than 25% of the editor\n        const theoreticalLines = layoutInfo.height / this._editor.getOption(65 /* EditorOption.lineHeight */);\n        this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n    _renderStickyScroll() {\n        const model = this._editor.getModel();\n        if (!model || model.isTooLargeForTokenization()) {\n            this._stickyScrollWidget.setState(undefined);\n            return;\n        }\n        const stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\n        if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\n            this._widgetState = this.findScrollWidgetState();\n            this._stickyScrollVisibleContextKey.set(!(this._widgetState.startLineNumbers.length === 0));\n            if (!this._focused) {\n                this._stickyScrollWidget.setState(this._widgetState);\n            }\n            else {\n                // Suppose that previously the sticky scroll widget had height 0, then if there are visible lines, set the last line as focused\n                if (this._focusedStickyElementIndex === -1) {\n                    this._stickyScrollWidget.setState(this._widgetState);\n                    this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\n                    if (this._focusedStickyElementIndex !== -1) {\n                        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n                    }\n                }\n                else {\n                    const focusedStickyElementLineNumber = this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];\n                    this._stickyScrollWidget.setState(this._widgetState);\n                    // Suppose that after setting the state, there are no sticky lines, set the focused index to -1\n                    if (this._stickyScrollWidget.lineNumberCount === 0) {\n                        this._focusedStickyElementIndex = -1;\n                    }\n                    else {\n                        const previousFocusedLineNumberExists = this._stickyScrollWidget.lineNumbers.includes(focusedStickyElementLineNumber);\n                        // If the line number is still there, do not change anything\n                        // If the line number is not there, set the new focused line to be the last line\n                        if (!previousFocusedLineNumberExists) {\n                            this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumberCount - 1;\n                        }\n                        this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);\n                    }\n                }\n            }\n        }\n    }\n    findScrollWidgetState() {\n        const lineHeight = this._editor.getOption(65 /* EditorOption.lineHeight */);\n        const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(113 /* EditorOption.stickyScroll */).maxLineCount);\n        const scrollTop = this._editor.getScrollTop();\n        let lastLineRelativePosition = 0;\n        const startLineNumbers = [];\n        const endLineNumbers = [];\n        const arrayVisibleRanges = this._editor.getVisibleRanges();\n        if (arrayVisibleRanges.length !== 0) {\n            const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n            const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n            for (const range of candidateRanges) {\n                const start = range.startLineNumber;\n                const end = range.endLineNumber;\n                const depth = range.nestingDepth;\n                if (end - start > 0) {\n                    const topOfElementAtDepth = (depth - 1) * lineHeight;\n                    const bottomOfElementAtDepth = depth * lineHeight;\n                    const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                    const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                    const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                    if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n                        startLineNumbers.push(start);\n                        endLineNumbers.push(end + 1);\n                        lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n                        startLineNumbers.push(start);\n                        endLineNumbers.push(end + 1);\n                    }\n                    if (startLineNumbers.length === maxNumberStickyLines) {\n                        break;\n                    }\n                }\n            }\n        }\n        this._endLineNumbers = endLineNumbers;\n        return new StickyScrollWidgetState(startLineNumbers, endLineNumbers, lastLineRelativePosition, this._showEndForLine);\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = StickyScrollController_1 = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IInstantiationService),\n    __param(4, ILanguageConfigurationService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, IContextKeyService)\n], StickyScrollController);\nexport { StickyScrollController };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './stickyScroll.css';\nimport { getColumnOfNodeOffset } from '../../../browser/viewParts/lines/viewLine.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Position } from '../../../common/core/position.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { FoldingController } from '../../folding/browser/folding.js';\nimport { foldingCollapsedIcon, foldingExpandedIcon } from '../../folding/browser/foldingDecorations.js';\nimport { toggleCollapseState } from '../../folding/browser/foldingModel.js';\nexport class StickyScrollWidgetState {\n    constructor(startLineNumbers, endLineNumbers, lastLineRelativePosition, showEndForLine = null) {\n        this.startLineNumbers = startLineNumbers;\n        this.endLineNumbers = endLineNumbers;\n        this.lastLineRelativePosition = lastLineRelativePosition;\n        this.showEndForLine = showEndForLine;\n    }\n}\nconst _ttPolicy = createTrustedTypesPolicy('stickyScrollViewLayer', { createHTML: value => value });\nconst STICKY_LINE_INDEX_ATTR = 'data-sticky-line-index';\nexport class StickyScrollWidget extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._foldingIconStore = new DisposableStore();\n        this._rootDomNode = document.createElement('div');\n        this._lineNumbersDomNode = document.createElement('div');\n        this._linesDomNodeScrollable = document.createElement('div');\n        this._linesDomNode = document.createElement('div');\n        this._lineHeight = this._editor.getOption(65 /* EditorOption.lineHeight */);\n        this._stickyLines = [];\n        this._lineNumbers = [];\n        this._lastLineRelativePosition = 0;\n        this._minContentWidthInPx = 0;\n        this._isOnGlyphMargin = false;\n        this._lineNumbersDomNode.className = 'sticky-widget-line-numbers';\n        this._lineNumbersDomNode.setAttribute('role', 'none');\n        this._linesDomNode.className = 'sticky-widget-lines';\n        this._linesDomNode.setAttribute('role', 'list');\n        this._linesDomNodeScrollable.className = 'sticky-widget-lines-scrollable';\n        this._linesDomNodeScrollable.appendChild(this._linesDomNode);\n        this._rootDomNode.className = 'sticky-widget';\n        this._rootDomNode.classList.toggle('peek', _editor instanceof EmbeddedCodeEditorWidget);\n        this._rootDomNode.appendChild(this._lineNumbersDomNode);\n        this._rootDomNode.appendChild(this._linesDomNodeScrollable);\n        const updateScrollLeftPosition = () => {\n            this._linesDomNode.style.left = this._editor.getOption(113 /* EditorOption.stickyScroll */).scrollWithEditor ? `-${this._editor.getScrollLeft()}px` : '0px';\n        };\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(113 /* EditorOption.stickyScroll */)) {\n                updateScrollLeftPosition();\n            }\n            if (e.hasChanged(65 /* EditorOption.lineHeight */)) {\n                this._lineHeight = this._editor.getOption(65 /* EditorOption.lineHeight */);\n            }\n        }));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollLeftChanged) {\n                updateScrollLeftPosition();\n            }\n            if (e.scrollWidthChanged) {\n                this._updateWidgetWidth();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            updateScrollLeftPosition();\n            this._updateWidgetWidth();\n        }));\n        this._register(this._foldingIconStore);\n        updateScrollLeftPosition();\n        this._register(this._editor.onDidLayoutChange((e) => {\n            this._updateWidgetWidth();\n        }));\n        this._updateWidgetWidth();\n    }\n    get lineNumbers() {\n        return this._lineNumbers;\n    }\n    get lineNumberCount() {\n        return this._lineNumbers.length;\n    }\n    getCurrentLines() {\n        return this._lineNumbers;\n    }\n    setState(state) {\n        this._clearStickyWidget();\n        if (!state || !this._editor._getViewModel()) {\n            return;\n        }\n        const futureWidgetHeight = state.startLineNumbers.length * this._lineHeight + state.lastLineRelativePosition;\n        if (futureWidgetHeight > 0) {\n            this._lastLineRelativePosition = state.lastLineRelativePosition;\n            const lineNumbers = [...state.startLineNumbers];\n            if (state.showEndForLine !== null) {\n                lineNumbers[state.showEndForLine] = state.endLineNumbers[state.showEndForLine];\n            }\n            this._lineNumbers = lineNumbers;\n        }\n        else {\n            this._lastLineRelativePosition = 0;\n            this._lineNumbers = [];\n        }\n        this._renderRootNode();\n    }\n    _updateWidgetWidth() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        const minimapSide = this._editor.getOption(71 /* EditorOption.minimap */).side;\n        const lineNumbersWidth = minimapSide === 'left' ? layoutInfo.contentLeft - layoutInfo.minimap.minimapCanvasOuterWidth : layoutInfo.contentLeft;\n        this._lineNumbersDomNode.style.width = `${lineNumbersWidth}px`;\n        this._linesDomNodeScrollable.style.setProperty('--vscode-editorStickyScroll-scrollableWidth', `${this._editor.getScrollWidth() - layoutInfo.verticalScrollbarWidth}px`);\n        this._rootDomNode.style.width = `${layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth}px`;\n    }\n    _clearStickyWidget() {\n        this._stickyLines = [];\n        this._foldingIconStore.clear();\n        dom.clearNode(this._lineNumbersDomNode);\n        dom.clearNode(this._linesDomNode);\n        this._rootDomNode.style.display = 'none';\n    }\n    _useFoldingOpacityTransition(requireTransitions) {\n        this._lineNumbersDomNode.style.setProperty('--vscode-editorStickyScroll-foldingOpacityTransition', `opacity ${requireTransitions ? 0.5 : 0}s`);\n    }\n    _setFoldingIconsVisibility(allVisible) {\n        for (const line of this._stickyLines) {\n            const foldingIcon = line.foldingIcon;\n            if (!foldingIcon) {\n                continue;\n            }\n            foldingIcon.setVisible(allVisible ? true : foldingIcon.isCollapsed);\n        }\n    }\n    _renderRootNode() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const foldingModel = yield ((_a = FoldingController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.getFoldingModel());\n            const layoutInfo = this._editor.getLayoutInfo();\n            for (const [index, line] of this._lineNumbers.entries()) {\n                const renderedStickyLine = this._renderChildNode(index, line, layoutInfo, foldingModel);\n                this._linesDomNode.appendChild(renderedStickyLine.lineDomNode);\n                this._lineNumbersDomNode.appendChild(renderedStickyLine.lineNumberDomNode);\n                this._stickyLines.push(renderedStickyLine);\n            }\n            if (foldingModel) {\n                this._setFoldingHoverListeners();\n                this._useFoldingOpacityTransition(!this._isOnGlyphMargin);\n            }\n            const widgetHeight = this._lineNumbers.length * this._lineHeight + this._lastLineRelativePosition;\n            if (widgetHeight === 0) {\n                this._clearStickyWidget();\n                return;\n            }\n            this._rootDomNode.style.display = 'block';\n            this._lineNumbersDomNode.style.height = `${widgetHeight}px`;\n            this._linesDomNodeScrollable.style.height = `${widgetHeight}px`;\n            this._rootDomNode.style.height = `${widgetHeight}px`;\n            const minimapSide = this._editor.getOption(71 /* EditorOption.minimap */).side;\n            if (minimapSide === 'left') {\n                this._rootDomNode.style.marginLeft = layoutInfo.minimap.minimapCanvasOuterWidth + 'px';\n            }\n            else {\n                this._rootDomNode.style.marginLeft = '0px';\n            }\n            this._updateMinContentWidth();\n            this._editor.layoutOverlayWidget(this);\n        });\n    }\n    _setFoldingHoverListeners() {\n        const showFoldingControls = this._editor.getOption(108 /* EditorOption.showFoldingControls */);\n        if (showFoldingControls !== 'mouseover') {\n            return;\n        }\n        this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_ENTER, (e) => {\n            this._isOnGlyphMargin = true;\n            this._setFoldingIconsVisibility(true);\n        }));\n        this._foldingIconStore.add(dom.addDisposableListener(this._lineNumbersDomNode, dom.EventType.MOUSE_LEAVE, () => {\n            this._isOnGlyphMargin = false;\n            this._useFoldingOpacityTransition(true);\n            this._setFoldingIconsVisibility(false);\n        }));\n    }\n    _renderChildNode(index, line, layoutInfo, foldingModel) {\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(line, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        const minimapSide = this._editor.getOption(71 /* EditorOption.minimap */).side;\n        const lineNumberOption = this._editor.getOption(66 /* EditorOption.lineNumbers */);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 500, 'none', true, true, null);\n        const sb = new StringBuilder(2000);\n        const renderOutput = renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.className = 'sticky-line-content';\n        lineHTMLNode.classList.add(`stickyLine${line}`);\n        lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.className = 'sticky-line-number';\n        lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        const lineNumbersWidth = minimapSide === 'left' ? layoutInfo.contentLeft - layoutInfo.minimap.minimapCanvasOuterWidth : layoutInfo.contentLeft;\n        lineNumberHTMLNode.style.width = `${lineNumbersWidth}px`;\n        const innerLineNumberHTML = document.createElement('span');\n        if (lineNumberOption.renderType === 1 /* RenderLineNumbersType.On */ || lineNumberOption.renderType === 3 /* RenderLineNumbersType.Interval */ && line % 10 === 0) {\n            innerLineNumberHTML.innerText = line.toString();\n        }\n        else if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            innerLineNumberHTML.innerText = Math.abs(line - this._editor.getPosition().lineNumber).toString();\n        }\n        innerLineNumberHTML.className = 'sticky-line-number-inner';\n        innerLineNumberHTML.style.lineHeight = `${this._lineHeight}px`;\n        innerLineNumberHTML.style.width = `${layoutInfo.lineNumbersWidth}px`;\n        innerLineNumberHTML.style.float = 'left';\n        if (minimapSide === 'left') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft - layoutInfo.minimap.minimapCanvasOuterWidth}px`;\n        }\n        else if (minimapSide === 'right') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft}px`;\n        }\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        const foldingIcon = this._renderFoldingIconForLine(lineNumberHTMLNode, foldingModel, index, line);\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        lineHTMLNode.setAttribute('role', 'listitem');\n        lineHTMLNode.setAttribute(STICKY_LINE_INDEX_ATTR, String(index));\n        lineHTMLNode.tabIndex = 0;\n        lineNumberHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        lineHTMLNode.style.lineHeight = `${this._lineHeight}px`;\n        lineNumberHTMLNode.style.height = `${this._lineHeight}px`;\n        lineHTMLNode.style.height = `${this._lineHeight}px`;\n        // Special case for the last line of sticky scroll\n        const isLastLine = index === this._lineNumbers.length - 1;\n        const lastLineZIndex = '0';\n        const intermediateLineZIndex = '1';\n        lineHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\n        lineNumberHTMLNode.style.zIndex = isLastLine ? lastLineZIndex : intermediateLineZIndex;\n        const lastLineTop = `${index * this._lineHeight + this._lastLineRelativePosition + ((foldingIcon === null || foldingIcon === void 0 ? void 0 : foldingIcon.isCollapsed) ? 1 : 0)}px`;\n        const intermediateLineTop = `${index * this._lineHeight}px`;\n        lineHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\n        lineNumberHTMLNode.style.top = isLastLine ? lastLineTop : intermediateLineTop;\n        return new RenderedStickyLine(line, lineHTMLNode, lineNumberHTMLNode, foldingIcon, renderOutput.characterMapping);\n    }\n    _renderFoldingIconForLine(container, foldingModel, index, line) {\n        const showFoldingControls = this._editor.getOption(108 /* EditorOption.showFoldingControls */);\n        if (!foldingModel || showFoldingControls === 'never') {\n            return;\n        }\n        const foldingRegions = foldingModel.regions;\n        const indexOfFoldingRegion = foldingRegions.findRange(line);\n        const startLineNumber = foldingRegions.getStartLineNumber(indexOfFoldingRegion);\n        const isFoldingScope = line === startLineNumber;\n        if (!isFoldingScope) {\n            return;\n        }\n        const isCollapsed = foldingRegions.isCollapsed(indexOfFoldingRegion);\n        const foldingIcon = new StickyFoldingIcon(isCollapsed, this._lineHeight);\n        container.append(foldingIcon.domNode);\n        foldingIcon.setVisible(this._isOnGlyphMargin ? true : (isCollapsed || showFoldingControls === 'always'));\n        this._foldingIconStore.add(dom.addDisposableListener(foldingIcon.domNode, dom.EventType.CLICK, () => {\n            toggleCollapseState(foldingModel, Number.MAX_VALUE, [line]);\n            foldingIcon.isCollapsed = !isCollapsed;\n            const scrollTop = (isCollapsed ?\n                this._editor.getTopForLineNumber(startLineNumber)\n                : this._editor.getTopForLineNumber(foldingRegions.getEndLineNumber(indexOfFoldingRegion)))\n                - this._lineHeight * index + 1;\n            this._editor.setScrollTop(scrollTop);\n        }));\n        return foldingIcon;\n    }\n    _updateMinContentWidth() {\n        this._minContentWidthInPx = 0;\n        for (const stickyLine of this._stickyLines) {\n            if (stickyLine.lineDomNode.scrollWidth > this._minContentWidthInPx) {\n                this._minContentWidthInPx = stickyLine.lineDomNode.scrollWidth;\n            }\n        }\n        this._minContentWidthInPx += this._editor.getLayoutInfo().verticalScrollbarWidth;\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        return this._rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n    getMinContentWidthInPx() {\n        return this._minContentWidthInPx;\n    }\n    focusLineWithIndex(index) {\n        if (0 <= index && index < this._stickyLines.length) {\n            this._stickyLines[index].lineDomNode.focus();\n        }\n    }\n    /**\n     * Given a leaf dom node, tries to find the editor position.\n     */\n    getEditorPositionFromNode(spanDomNode) {\n        if (!spanDomNode || spanDomNode.children.length > 0) {\n            // This is not a leaf node\n            return null;\n        }\n        const renderedStickyLine = this._getRenderedStickyLineFromChildDomNode(spanDomNode);\n        if (!renderedStickyLine) {\n            return null;\n        }\n        const column = getColumnOfNodeOffset(renderedStickyLine.characterMapping, spanDomNode, 0);\n        return new Position(renderedStickyLine.lineNumber, column);\n    }\n    getLineNumberFromChildDomNode(domNode) {\n        var _a, _b;\n        return (_b = (_a = this._getRenderedStickyLineFromChildDomNode(domNode)) === null || _a === void 0 ? void 0 : _a.lineNumber) !== null && _b !== void 0 ? _b : null;\n    }\n    _getRenderedStickyLineFromChildDomNode(domNode) {\n        const index = this.getStickyLineIndexFromChildDomNode(domNode);\n        if (index === null || index < 0 || index >= this._stickyLines.length) {\n            return null;\n        }\n        return this._stickyLines[index];\n    }\n    /**\n     * Given a child dom node, tries to find the line number attribute\n     * that was stored in the node. Returns null if none is found.\n     */\n    getStickyLineIndexFromChildDomNode(domNode) {\n        while (domNode && domNode !== this._rootDomNode) {\n            const line = domNode.getAttribute(STICKY_LINE_INDEX_ATTR);\n            if (line) {\n                return parseInt(line, 10);\n            }\n            domNode = domNode.parentElement;\n        }\n        return null;\n    }\n}\nclass RenderedStickyLine {\n    constructor(lineNumber, lineDomNode, lineNumberDomNode, foldingIcon, characterMapping) {\n        this.lineNumber = lineNumber;\n        this.lineDomNode = lineDomNode;\n        this.lineNumberDomNode = lineNumberDomNode;\n        this.foldingIcon = foldingIcon;\n        this.characterMapping = characterMapping;\n    }\n}\nclass StickyFoldingIcon {\n    constructor(isCollapsed, dimension) {\n        this.isCollapsed = isCollapsed;\n        this.dimension = dimension;\n        this.domNode = document.createElement('div');\n        this.domNode.style.width = `${dimension}px`;\n        this.domNode.style.height = `${dimension}px`;\n        this.domNode.className = ThemeIcon.asClassName(isCollapsed ? foldingCollapsedIcon : foldingExpandedIcon);\n    }\n    setVisible(visible) {\n        this.domNode.style.cursor = visible ? 'pointer' : 'default';\n        this.domNode.style.opacity = visible ? '1' : '0';\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CancellationTokenSource, } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { StickyModelProvider } from './stickyScrollModelProvider.js';\nexport class StickyLineCandidate {\n    constructor(startLineNumber, endLineNumber, nestingDepth) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n        this.nestingDepth = nestingDepth;\n    }\n}\nlet StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\n    constructor(editor, _languageFeaturesService, _languageConfigurationService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._onDidChangeStickyScroll = this._register(new Emitter());\n        this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\n        this._options = null;\n        this._model = null;\n        this._cts = null;\n        this._stickyModelProvider = null;\n        this._editor = editor;\n        this._sessionStore = this._register(new DisposableStore());\n        this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(113 /* EditorOption.stickyScroll */)) {\n                this.readConfiguration();\n            }\n        }));\n        this.readConfiguration();\n    }\n    readConfiguration() {\n        this._stickyModelProvider = null;\n        this._sessionStore.clear();\n        this._options = this._editor.getOption(113 /* EditorOption.stickyScroll */);\n        if (!this._options.enabled) {\n            return;\n        }\n        this._stickyModelProvider = this._sessionStore.add(new StickyModelProvider(this._editor, this._languageConfigurationService, this._languageFeaturesService, this._options.defaultModel));\n        this._sessionStore.add(this._editor.onDidChangeModel(() => {\n            // We should not show an old model for a different file, it will always be wrong.\n            // So we clear the model here immediately and then trigger an update.\n            this._model = null;\n            this._onDidChangeStickyScroll.fire();\n            this.update();\n        }));\n        this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\n        this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n        this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this.update()));\n        this.update();\n    }\n    getVersionId() {\n        var _a;\n        return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\n    }\n    update() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n            this._cts = new CancellationTokenSource();\n            yield this.updateStickyModel(this._cts.token);\n            this._onDidChangeStickyScroll.fire();\n        });\n    }\n    updateStickyModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._stickyModelProvider) {\n                this._model = null;\n                return;\n            }\n            const textModel = this._editor.getModel();\n            const modelVersionId = textModel.getVersionId();\n            const model = yield this._stickyModelProvider.update(textModel, modelVersionId, token);\n            if (token.isCancellationRequested) {\n                // the computation was canceled, so do not overwrite the model\n                return;\n            }\n            this._model = model;\n        });\n    }\n    updateIndex(index) {\n        if (index === -1) {\n            index = 0;\n        }\n        else if (index < 0) {\n            index = -index - 2;\n        }\n        return index;\n    }\n    getCandidateStickyLinesIntersectingFromStickyModel(range, outlineModel, result, depth, lastStartLineNumber) {\n        if (outlineModel.children.length === 0) {\n            return;\n        }\n        let lastLine = lastStartLineNumber;\n        const childrenStartLines = [];\n        for (let i = 0; i < outlineModel.children.length; i++) {\n            const child = outlineModel.children[i];\n            if (child.range) {\n                childrenStartLines.push(child.range.startLineNumber);\n            }\n        }\n        const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => { return a - b; }));\n        const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => { return a - b; }));\n        for (let i = lowerBound; i <= upperBound; i++) {\n            const child = outlineModel.children[i];\n            if (!child) {\n                return;\n            }\n            if (child.range) {\n                const childStartLine = child.range.startLineNumber;\n                const childEndLine = child.range.endLineNumber;\n                if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n                    lastLine = childStartLine;\n                    result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n                    this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth + 1, childStartLine);\n                }\n            }\n            else {\n                this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth, lastStartLineNumber);\n            }\n        }\n    }\n    getCandidateStickyLinesIntersecting(range) {\n        var _a, _b;\n        if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\n            return [];\n        }\n        let stickyLineCandidates = [];\n        this.getCandidateStickyLinesIntersectingFromStickyModel(range, this._model.element, stickyLineCandidates, 0, -1);\n        const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n        if (hiddenRanges) {\n            for (const hiddenRange of hiddenRanges) {\n                stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\n            }\n        }\n        return stickyLineCandidates;\n    }\n};\nStickyLineCandidateProvider.ID = 'store.contrib.stickyScrollController';\nStickyLineCandidateProvider = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageConfigurationService)\n], StickyLineCandidateProvider);\nexport { StickyLineCandidateProvider };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineElement, OutlineGroup, OutlineModel } from '../../documentSymbols/browser/outlineModel.js';\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { FoldingController, RangesLimitReporter } from '../../folding/browser/folding.js';\nimport { SyntaxRangeProvider } from '../../folding/browser/syntaxRangeProvider.js';\nimport { IndentRangeProvider } from '../../folding/browser/indentRangeProvider.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { StickyElement, StickyModel, StickyRange } from './stickyScrollElement.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nvar ModelProvider;\n(function (ModelProvider) {\n    ModelProvider[\"OUTLINE_MODEL\"] = \"outlineModel\";\n    ModelProvider[\"FOLDING_PROVIDER_MODEL\"] = \"foldingProviderModel\";\n    ModelProvider[\"INDENTATION_MODEL\"] = \"indentationModel\";\n})(ModelProvider || (ModelProvider = {}));\nvar Status;\n(function (Status) {\n    Status[Status[\"VALID\"] = 0] = \"VALID\";\n    Status[Status[\"INVALID\"] = 1] = \"INVALID\";\n    Status[Status[\"CANCELED\"] = 2] = \"CANCELED\";\n})(Status || (Status = {}));\nlet StickyModelProvider = class StickyModelProvider extends Disposable {\n    constructor(_editor, _languageConfigurationService, _languageFeaturesService, defaultModel) {\n        super();\n        this._editor = _editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._modelProviders = [];\n        this._modelPromise = null;\n        this._updateScheduler = this._register(new Delayer(300));\n        this._updateOperation = this._register(new DisposableStore());\n        const stickyModelFromCandidateOutlineProvider = new StickyModelFromCandidateOutlineProvider(_languageFeaturesService);\n        const stickyModelFromSyntaxFoldingProvider = new StickyModelFromCandidateSyntaxFoldingProvider(this._editor, _languageFeaturesService);\n        const stickyModelFromIndentationFoldingProvider = new StickyModelFromCandidateIndentationFoldingProvider(this._editor, _languageConfigurationService);\n        switch (defaultModel) {\n            case ModelProvider.OUTLINE_MODEL:\n                this._modelProviders.push(stickyModelFromCandidateOutlineProvider);\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.FOLDING_PROVIDER_MODEL:\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.INDENTATION_MODEL:\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n        }\n    }\n    _cancelModelPromise() {\n        if (this._modelPromise) {\n            this._modelPromise.cancel();\n            this._modelPromise = null;\n        }\n    }\n    update(textModel, textModelVersionId, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._updateOperation.clear();\n            this._updateOperation.add({\n                dispose: () => {\n                    this._cancelModelPromise();\n                    this._updateScheduler.cancel();\n                }\n            });\n            this._cancelModelPromise();\n            return yield this._updateScheduler.trigger(() => __awaiter(this, void 0, void 0, function* () {\n                for (const modelProvider of this._modelProviders) {\n                    const { statusPromise, modelPromise } = modelProvider.computeStickyModel(textModel, textModelVersionId, token);\n                    this._modelPromise = modelPromise;\n                    const status = yield statusPromise;\n                    if (this._modelPromise !== modelPromise) {\n                        return null;\n                    }\n                    switch (status) {\n                        case Status.CANCELED:\n                            this._updateOperation.clear();\n                            return null;\n                        case Status.VALID:\n                            return modelProvider.stickyModel;\n                    }\n                }\n                return null;\n            })).catch((error) => {\n                onUnexpectedError(error);\n                return null;\n            });\n        });\n    }\n};\nStickyModelProvider = __decorate([\n    __param(1, ILanguageConfigurationService),\n    __param(2, ILanguageFeaturesService)\n], StickyModelProvider);\nexport { StickyModelProvider };\nclass StickyModelCandidateProvider {\n    constructor() {\n        this._stickyModel = null;\n    }\n    get stickyModel() {\n        return this._stickyModel;\n    }\n    _invalid() {\n        this._stickyModel = null;\n        return Status.INVALID;\n    }\n    computeStickyModel(textModel, modelVersionId, token) {\n        if (token.isCancellationRequested || !this.isProviderValid(textModel)) {\n            return { statusPromise: this._invalid(), modelPromise: null };\n        }\n        const providerModelPromise = createCancelablePromise(token => this.createModelFromProvider(textModel, modelVersionId, token));\n        return {\n            statusPromise: providerModelPromise.then(providerModel => {\n                if (!this.isModelValid(providerModel)) {\n                    return this._invalid();\n                }\n                if (token.isCancellationRequested) {\n                    return Status.CANCELED;\n                }\n                this._stickyModel = this.createStickyModel(textModel, modelVersionId, token, providerModel);\n                return Status.VALID;\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return Status.CANCELED;\n            }),\n            modelPromise: providerModelPromise\n        };\n    }\n    /**\n     * Method which checks whether the model returned by the provider is valid and can be used to compute a sticky model.\n     * This method by default returns true.\n     * @param model model returned by the provider\n     * @returns boolean indicating whether the model is valid\n     */\n    isModelValid(model) {\n        return true;\n    }\n    /**\n     * Method which checks whether the provider is valid before applying it to find the provider model.\n     * This method by default returns true.\n     * @param textModel text-model of the editor\n     * @returns boolean indicating whether the provider is valid\n     */\n    isProviderValid(textModel) {\n        return true;\n    }\n}\nlet StickyModelFromCandidateOutlineProvider = class StickyModelFromCandidateOutlineProvider extends StickyModelCandidateProvider {\n    constructor(_languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    get provider() {\n        return this._languageFeaturesService.documentSymbolProvider;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, textModel, token);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        var _a;\n        const { stickyOutlineElement, providerID } = this._stickyModelFromOutlineModel(model, (_a = this._stickyModel) === null || _a === void 0 ? void 0 : _a.outlineProviderId);\n        return new StickyModel(textModel.uri, modelVersionId, stickyOutlineElement, providerID);\n    }\n    isModelValid(model) {\n        return model && model.children.size > 0;\n    }\n    _stickyModelFromOutlineModel(outlineModel, preferredProvider) {\n        let outlineElements;\n        // When several possible outline providers\n        if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n            const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\n            if (provider) {\n                outlineElements = provider.children;\n            }\n            else {\n                let tempID = '';\n                let maxTotalSumOfRanges = -1;\n                let optimalOutlineGroup = undefined;\n                for (const [_key, outlineGroup] of outlineModel.children.entries()) {\n                    const totalSumRanges = this._findSumOfRangesOfGroup(outlineGroup);\n                    if (totalSumRanges > maxTotalSumOfRanges) {\n                        optimalOutlineGroup = outlineGroup;\n                        maxTotalSumOfRanges = totalSumRanges;\n                        tempID = outlineGroup.id;\n                    }\n                }\n                preferredProvider = tempID;\n                outlineElements = optimalOutlineGroup.children;\n            }\n        }\n        else {\n            outlineElements = outlineModel.children;\n        }\n        const stickyChildren = [];\n        const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\n            const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n            const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n            return this._comparator(range1, range2);\n        });\n        for (const outlineElement of outlineElementsArray) {\n            stickyChildren.push(this._stickyModelFromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n        }\n        const stickyOutlineElement = new StickyElement(undefined, stickyChildren, undefined);\n        return {\n            stickyOutlineElement: stickyOutlineElement,\n            providerID: preferredProvider\n        };\n    }\n    _stickyModelFromOutlineElement(outlineElement, previousStartLine) {\n        const children = [];\n        for (const child of outlineElement.children.values()) {\n            if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n                if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n                    children.push(this._stickyModelFromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n                }\n                else {\n                    for (const subchild of child.children.values()) {\n                        children.push(this._stickyModelFromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n                    }\n                }\n            }\n        }\n        children.sort((child1, child2) => this._comparator(child1.range, child2.range));\n        const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n        return new StickyElement(range, children, undefined);\n    }\n    _comparator(range1, range2) {\n        if (range1.startLineNumber !== range2.startLineNumber) {\n            return range1.startLineNumber - range2.startLineNumber;\n        }\n        else {\n            return range2.endLineNumber - range1.endLineNumber;\n        }\n    }\n    _findSumOfRangesOfGroup(outline) {\n        let res = 0;\n        for (const child of outline.children.values()) {\n            res += this._findSumOfRangesOfGroup(child);\n        }\n        if (outline instanceof OutlineElement) {\n            return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n        }\n        else {\n            return res;\n        }\n    }\n};\nStickyModelFromCandidateOutlineProvider = __decorate([\n    __param(0, ILanguageFeaturesService)\n], StickyModelFromCandidateOutlineProvider);\nclass StickyModelFromCandidateFoldingProvider extends StickyModelCandidateProvider {\n    constructor(editor) {\n        super();\n        this._foldingLimitReporter = new RangesLimitReporter(editor);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        const foldingElement = this._fromFoldingRegions(model);\n        return new StickyModel(textModel.uri, modelVersionId, foldingElement, undefined);\n    }\n    isModelValid(model) {\n        return model !== null;\n    }\n    _fromFoldingRegions(foldingRegions) {\n        const length = foldingRegions.length;\n        const orderedStickyElements = [];\n        // The root sticky outline element\n        const stickyOutlineElement = new StickyElement(undefined, [], undefined);\n        for (let i = 0; i < length; i++) {\n            // Finding the parent index of the current range\n            const parentIndex = foldingRegions.getParentIndex(i);\n            let parentNode;\n            if (parentIndex !== -1) {\n                // Access the reference of the parent node\n                parentNode = orderedStickyElements[parentIndex];\n            }\n            else {\n                // In that case the parent node is the root node\n                parentNode = stickyOutlineElement;\n            }\n            const child = new StickyElement(new StickyRange(foldingRegions.getStartLineNumber(i), foldingRegions.getEndLineNumber(i) + 1), [], parentNode);\n            parentNode.children.push(child);\n            orderedStickyElements.push(child);\n        }\n        return stickyOutlineElement;\n    }\n}\nlet StickyModelFromCandidateIndentationFoldingProvider = class StickyModelFromCandidateIndentationFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageConfigurationService) {\n        super(editor);\n        this._languageConfigurationService = _languageConfigurationService;\n    }\n    get provider() {\n        return null;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const provider = new IndentRangeProvider(textModel, this._languageConfigurationService, this._foldingLimitReporter);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateIndentationFoldingProvider = __decorate([\n    __param(1, ILanguageConfigurationService)\n], StickyModelFromCandidateIndentationFoldingProvider);\nlet StickyModelFromCandidateSyntaxFoldingProvider = class StickyModelFromCandidateSyntaxFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageFeaturesService) {\n        super(editor);\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    get provider() {\n        return this._languageFeaturesService.foldingRangeProvider;\n    }\n    isProviderValid(textModel) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        return selectedProviders.length > 0;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        const provider = new SyntaxRangeProvider(textModel, selectedProviders, () => this.createModelFromProvider(textModel, modelVersionId, token), this._foldingLimitReporter, undefined);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateSyntaxFoldingProvider = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyModelFromCandidateSyntaxFoldingProvider);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StickyRange {\n    constructor(startLineNumber, endLineNumber) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n    }\n}\nexport class StickyElement {\n    constructor(\n    /**\n     * Range of line numbers spanned by the current scope\n     */\n    range, \n    /**\n     * Must be sorted by start line number\n    */\n    children, \n    /**\n     * Parent sticky outline element\n     */\n    parent) {\n        this.range = range;\n        this.children = children;\n        this.parent = parent;\n    }\n}\nexport class StickyModel {\n    constructor(uri, version, element, outlineProviderId) {\n        this.uri = uri;\n        this.version = version;\n        this.element = element;\n        this.outlineProviderId = outlineProviderId;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar EditorContribution_1;\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.getIncompleteProvider().size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(87 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(116 /* EditorOption.suggest */, model), this._getEditorOption(110 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = EditorContribution_1 = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution_1._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution_1._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution_1._counter === 0) {\n            (_a = EditorContribution_1._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution_1._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = EditorContribution_1 = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because the contribution is used as a way to ONCE access a service to which a provider is registered\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.forceRetokenize',\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n            alias: 'Developer: Force Retokenize',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        model.tokenization.resetTokenization();\n        const sw = new StopWatch();\n        model.tokenization.forceTokenization(model.getLineCount());\n        sw.stop();\n        console.log(`tokenization took ${sw.elapsed()}`);\n    }\n}\nregisterEditorAction(ForceRetokenizeAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nexport class ToggleTabFocusModeAction extends Action2 {\n    constructor() {\n        super({\n            id: ToggleTabFocusModeAction.ID,\n            title: { value: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, 'Toggle Tab Key Moves Focus'), original: 'Toggle Tab Key Moves Focus' },\n            precondition: undefined,\n            keybinding: {\n                primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true\n        });\n    }\n    run(accessor) {\n        const context = accessor.get(IContextKeyService).getContextKeyValue('focusedView') === 'terminal' ? \"terminalFocus\" /* TabFocusContext.Terminal */ : \"editorFocus\" /* TabFocusContext.Editor */;\n        const oldValue = TabFocus.getTabFocusMode(context);\n        const newValue = !oldValue;\n        TabFocus.setTabFocusMode(newValue, context);\n        if (newValue) {\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n        }\n        else {\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n        }\n    }\n}\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\nregisterAction2(ToggleTabFocusModeAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters, isBasicASCII } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n        super();\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._workspaceTrustService = _workspaceTrustService;\n        this._highlighter = null;\n        this._bannerClosed = false;\n        this._updateState = (state) => {\n            if (state && state.hasMore) {\n                if (this._bannerClosed) {\n                    return;\n                }\n                // This document contains many non-basic ASCII characters.\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n                let data;\n                if (state.nonBasicAsciiCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\n                    };\n                }\n                else if (state.ambiguousCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\n                    };\n                }\n                else if (state.invisibleCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\n                    };\n                }\n                else {\n                    throw new Error('Unreachable');\n                }\n                this._bannerController.show({\n                    id: 'unicodeHighlightBanner',\n                    message: data.message,\n                    icon: warningIcon,\n                    actions: [\n                        {\n                            label: data.command.shortLabel,\n                            href: `command:${data.command.id}`\n                        }\n                    ],\n                    onClose: () => {\n                        this._bannerClosed = true;\n                    },\n                });\n            }\n            else {\n                this._bannerController.hide();\n            }\n        };\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._bannerClosed = false;\n            this._updateHighlighter();\n        }));\n        this._options = _editor.getOption(123 /* EditorOption.unicodeHighlighting */);\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\n            this._updateHighlighter();\n        }));\n        this._register(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(123 /* EditorOption.unicodeHighlighting */)) {\n                this._options = _editor.getOption(123 /* EditorOption.unicodeHighlighting */);\n                this._updateHighlighter();\n            }\n        }));\n        this._updateHighlighter();\n    }\n    dispose() {\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        super.dispose();\n    }\n    _updateHighlighter() {\n        this._updateState(null);\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n        if ([\n            options.nonBasicASCII,\n            options.ambiguousCharacters,\n            options.invisibleCharacters,\n        ].every((option) => option === false)) {\n            // Don't do anything if the feature is fully disabled\n            return;\n        }\n        const highlightOptions = {\n            nonBasicASCII: options.nonBasicASCII,\n            ambiguousCharacters: options.ambiguousCharacters,\n            invisibleCharacters: options.invisibleCharacters,\n            includeComments: options.includeComments,\n            includeStrings: options.includeStrings,\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n                if (locale === '_os') {\n                    const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n                    return osLocale;\n                }\n                else if (locale === '_vscode') {\n                    return platform.language;\n                }\n                return locale;\n            }),\n        };\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n        }\n        else {\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n        }\n    }\n    getDecorationInfo(decoration) {\n        if (this._highlighter) {\n            return this._highlighter.getDecorationInfo(decoration);\n        }\n        return null;\n    }\n};\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\nUnicodeHighlighter = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IWorkspaceTrustManagementService),\n    __param(3, IInstantiationService)\n], UnicodeHighlighter);\nexport { UnicodeHighlighter };\nfunction resolveOptions(trusted, options) {\n    return {\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n        ambiguousCharacters: options.ambiguousCharacters,\n        invisibleCharacters: options.invisibleCharacters,\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n        allowedCharacters: options.allowedCharacters,\n        allowedLocales: options.allowedLocales,\n    };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._editorWorkerService = _editorWorkerService;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const modelVersionId = this._model.getVersionId();\n        this._editorWorkerService\n            .computedUnicodeHighlights(this._model.uri, this._options)\n            .then((info) => {\n            if (this._model.isDisposed()) {\n                return;\n            }\n            if (this._model.getVersionId() !== modelVersionId) {\n                // model changed in the meantime\n                return;\n            }\n            this._updateState(info);\n            const decorations = [];\n            if (!info.hasMore) {\n                // Don't show decoration if there are too many.\n                // In this case, a banner is shown.\n                for (const range of info.ranges) {\n                    decorations.push({\n                        range: range,\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\n                    });\n                }\n            }\n            this._decorations.set(decorations);\n        });\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        const text = model.getValueInRange(decoration.range);\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n};\nDocumentUnicodeHighlighter = __decorate([\n    __param(3, IEditorWorkerService)\n], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidLayoutChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidScrollChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const ranges = this._editor.getVisibleRanges();\n        const decorations = [];\n        const totalResult = {\n            ranges: [],\n            ambiguousCharacterCount: 0,\n            invisibleCharacterCount: 0,\n            nonBasicAsciiCharacterCount: 0,\n            hasMore: false,\n        };\n        for (const range of ranges) {\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n            for (const r of result.ranges) {\n                totalResult.ranges.push(r);\n            }\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\n        }\n        if (!totalResult.hasMore) {\n            // Don't show decorations if there are too many.\n            // A banner will be shown instead.\n            for (const range of totalResult.ranges) {\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\n            }\n        }\n        this._updateState(totalResult);\n        this._decorations.set(decorations);\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const text = model.getValueInRange(decoration.range);\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n}\nexport class UnicodeHighlighterHover {\n    constructor(owner, range, decoration) {\n        this.owner = owner;\n        this.range = range;\n        this.decoration = decoration;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n    constructor(_editor, _languageService, _openerService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.hoverOrdinal = 5;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n        if (!unicodeHighlighter) {\n            return [];\n        }\n        const result = [];\n        const existedReason = new Set();\n        let index = 300;\n        for (const d of lineDecorations) {\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\n            if (!highlightInfo) {\n                continue;\n            }\n            const char = model.getValueInRange(d.range);\n            // text refers to a single character.\n            const codePoint = char.codePointAt(0);\n            const codePointStr = formatCodePointMarkdown(codePoint);\n            let reason;\n            switch (highlightInfo.reason.kind) {\n                case 0 /* UnicodeHighlighterReasonKind.Ambiguous */: {\n                    if (isBasicASCII(highlightInfo.reason.confusableWith)) {\n                        reason = nls.localize('unicodeHighlight.characterIsAmbiguousASCII', 'The character {0} could be confused with the ASCII character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    }\n                    else {\n                        reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    }\n                    break;\n                }\n                case 1 /* UnicodeHighlighterReasonKind.Invisible */:\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n                    break;\n                case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n                    break;\n            }\n            if (existedReason.has(reason)) {\n                continue;\n            }\n            existedReason.add(reason);\n            const adjustSettingsArgs = {\n                codePoint: codePoint,\n                reason: highlightInfo.reason,\n                inComment: highlightInfo.inComment,\n                inString: highlightInfo.inString,\n            };\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n            const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\n            const markdown = new MarkdownString('', true)\n                .appendMarkdown(reason)\n                .appendText(' ')\n                .appendLink(uri, adjustSettings);\n            result.push(new MarkdownHover(this, d.range, [markdown], false, index++));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nUnicodeHighlighterHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], UnicodeHighlighterHoverParticipant);\nexport { UnicodeHighlighterHoverParticipant };\nfunction codePointToHex(codePoint) {\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n    let value = `\\`${codePointToHex(codePoint)}\\``;\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n    }\n    return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n    if (codePoint === 96 /* CharCode.BackTick */) {\n        return '`` ` ``';\n    }\n    return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n    constructor() {\n        this.map = new Map();\n    }\n    getDecorationFromOptions(options) {\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\n    }\n    getDecoration(hideInComments, hideInStrings) {\n        const key = `${hideInComments}${hideInStrings}`;\n        let options = this.map.get(key);\n        if (!options) {\n            options = ModelDecorationOptions.createDynamic({\n                description: 'unicode-highlight',\n                stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                className: 'unicode-highlight',\n                showIfCollapsed: true,\n                overviewRuler: null,\n                minimap: null,\n                hideInCommentTokens: hideInComments,\n                hideInStringTokens: hideInStrings,\n            });\n            this.map.set(key, options);\n        }\n        return options;\n    }\n}\nDecorations.instance = new Decorations();\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n            alias: 'Disable highlighting of characters in comments',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingInCommentsAction.ID = 'editor.action.unicodeHighlight.disableHighlightingInComments';\nexport class DisableHighlightingInStringsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n            alias: 'Disable highlighting of characters in strings',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingInStringsAction.ID = 'editor.action.unicodeHighlight.disableHighlightingInStrings';\nexport class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n            alias: 'Disable highlighting of ambiguous characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\nexport class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n            alias: 'Disable highlighting of invisible characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\nexport class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n            alias: 'Disable highlighting of non basic ASCII characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\nexport class ShowExcludeOptions extends EditorAction {\n    constructor() {\n        super({\n            id: ShowExcludeOptions.ID,\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n            alias: 'Show Exclude Options',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { codePoint, reason, inString, inComment } = args;\n            const char = String.fromCodePoint(codePoint);\n            const quickPickService = accessor.get(IQuickInputService);\n            const configurationService = accessor.get(IConfigurationService);\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n                }\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n            }\n            const options = [];\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                for (const locale of reason.notAmbiguousInLocales) {\n                    options.push({\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n                        run: () => __awaiter(this, void 0, void 0, function* () {\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n                        }),\n                    });\n                }\n            }\n            options.push({\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n            });\n            if (inComment) {\n                const action = new DisableHighlightingInCommentsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (inString) {\n                const action = new DisableHighlightingInStringsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else {\n                expectNever(reason);\n            }\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\n            if (result) {\n                yield result.run();\n            }\n        });\n    }\n}\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            value = existingValue;\n        }\n        else {\n            value = {};\n        }\n        for (const charCode of charCodes) {\n            value[String.fromCodePoint(charCode)] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            // Copy value, as the existing value is read only\n            value = Object.assign({}, existingValue);\n        }\n        else {\n            value = {};\n        }\n        for (const locale of locales) {\n            value[locale] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction expectNever(value) {\n    throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nlet BannerController = class BannerController extends Disposable {\n    constructor(_editor, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.instantiationService = instantiationService;\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\n    }\n    hide() {\n        this._editor.setBanner(null, 0);\n        this.banner.clear();\n    }\n    show(item) {\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\n                var _a;\n                this.hide();\n                (_a = item.onClose) === null || _a === void 0 ? void 0 : _a.call(item);\n            } }));\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n    }\n};\nBannerController = __decorate([\n    __param(1, IInstantiationService)\n], BannerController);\nexport { BannerController };\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        this.element = $('div.editor-banner');\n        this.element.tabIndex = 0;\n    }\n    getAriaLabel(item) {\n        if (item.ariaLabel) {\n            return item.ariaLabel;\n        }\n        if (typeof item.message === 'string') {\n            return item.message;\n        }\n        return undefined;\n    }\n    getBannerMessage(message) {\n        if (typeof message === 'string') {\n            const element = $('span');\n            element.innerText = message;\n            return element;\n        }\n        return this.markdownRenderer.render(message).element;\n    }\n    clear() {\n        clearNode(this.element);\n    }\n    show(item) {\n        // Clear previous item\n        clearNode(this.element);\n        // Banner aria label\n        const ariaLabel = this.getAriaLabel(item);\n        if (ariaLabel) {\n            this.element.setAttribute('aria-label', ariaLabel);\n        }\n        // Icon\n        const iconContainer = append(this.element, $('div.icon-container'));\n        iconContainer.setAttribute('aria-hidden', 'true');\n        if (item.icon) {\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n        }\n        // Message\n        const messageContainer = append(this.element, $('div.message-container'));\n        messageContainer.setAttribute('aria-hidden', 'true');\n        messageContainer.appendChild(this.getBannerMessage(item.message));\n        // Message Actions\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n        if (item.actions) {\n            for (const action of item.actions) {\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\n            }\n        }\n        // Action\n        const actionBarContainer = append(this.element, $('div.action-container'));\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n            if (typeof item.onClose === 'function') {\n                item.onClose();\n            }\n        })), { icon: true, label: false });\n        this.actionBar.setFocusable(false);\n    }\n};\nBanner = __decorate([\n    __param(0, IInstantiationService)\n], Banner);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n    constructor(_editor, _dialogService, _codeEditorService) {\n        super();\n        this._editor = _editor;\n        this._dialogService = _dialogService;\n        this._codeEditorService = _codeEditorService;\n        this._isPresentingDialog = false;\n        this._config = this._editor.getOption(124 /* EditorOption.unusualLineTerminators */);\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(124 /* EditorOption.unusualLineTerminators */)) {\n                this._config = this._editor.getOption(124 /* EditorOption.unusualLineTerminators */);\n                this._checkForUnusualLineTerminators();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._checkForUnusualLineTerminators();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            if (e.isUndoing) {\n                // skip checking in case of undoing\n                return;\n            }\n            this._checkForUnusualLineTerminators();\n        }));\n        this._checkForUnusualLineTerminators();\n    }\n    _checkForUnusualLineTerminators() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._config === 'off') {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!model.mightContainUnusualLineTerminators()) {\n                return;\n            }\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\n            if (ignoreState === true) {\n                // this model should be ignored\n                return;\n            }\n            if (this._editor.getOption(89 /* EditorOption.readOnly */)) {\n                // read only editor => sorry!\n                return;\n            }\n            if (this._config === 'auto') {\n                // just do it!\n                model.removeUnusualLineTerminators(this._editor.getSelections());\n                return;\n            }\n            if (this._isPresentingDialog) {\n                // we're currently showing the dialog, which is async.\n                // avoid spamming the user\n                return;\n            }\n            let result;\n            try {\n                this._isPresentingDialog = true;\n                result = yield this._dialogService.confirm({\n                    title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n                    message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n                    detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n                    primaryButton: nls.localize({ key: 'unusualLineTerminators.fix', comment: ['&& denotes a mnemonic'] }, \"&&Remove Unusual Line Terminators\"),\n                    cancelButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n                });\n            }\n            finally {\n                this._isPresentingDialog = false;\n            }\n            if (!result.confirmed) {\n                // this model should be ignored\n                writeIgnoreState(this._codeEditorService, model, true);\n                return;\n            }\n            model.removeUnusualLineTerminators(this._editor.getSelections());\n        });\n    }\n};\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\nUnusualLineTerminatorsDetector = __decorate([\n    __param(1, IDialogService),\n    __param(2, ICodeEditorService)\n], UnusualLineTerminatorsDetector);\nexport { UnusualLineTerminatorsDetector };\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar WordHighlighterContribution_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, first, timeout } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getHighlightDecorationOptions } from './highlightDecorations.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nconst ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(registry, model, position, token) {\n    const orderedByScore = registry.ordered(model);\n    // in order of score ask the occurrences provider\n    // until someone response with a good result\n    // (good = none empty array)\n    return first(orderedByScore.map(provider => () => {\n        return Promise.resolve(provider.provideDocumentHighlights(model, position, token))\n            .then(undefined, onUnexpectedExternalError);\n    }), arrays.isNonEmptyArray);\n}\nclass OccurenceAtPositionRequest {\n    constructor(_model, _selection, _wordSeparators) {\n        this._model = _model;\n        this._selection = _selection;\n        this._wordSeparators = _wordSeparators;\n        this._wordRange = this._getCurrentWordRange(_model, _selection);\n        this._result = null;\n    }\n    get result() {\n        if (!this._result) {\n            this._result = createCancelablePromise(token => this._compute(this._model, this._selection, this._wordSeparators, token));\n        }\n        return this._result;\n    }\n    _getCurrentWordRange(model, selection) {\n        const word = model.getWordAtPosition(selection.getPosition());\n        if (word) {\n            return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n        }\n        return null;\n    }\n    isValid(model, selection, decorations) {\n        const lineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endColumn = selection.endColumn;\n        const currentWordRange = this._getCurrentWordRange(model, selection);\n        let requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n        // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n        // (Same symbol)\n        for (let i = 0, len = decorations.length; !requestIsValid && i < len; i++) {\n            const range = decorations.getRange(i);\n            if (range && range.startLineNumber === lineNumber) {\n                if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n                    requestIsValid = true;\n                }\n            }\n        }\n        return requestIsValid;\n    }\n    cancel() {\n        this.result.cancel();\n    }\n}\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators, providers) {\n        super(model, selection, wordSeparators);\n        this._providers = providers;\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return getOccurrencesAtPosition(this._providers, model, selection.getPosition(), token).then(value => value || []);\n    }\n}\nclass TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators) {\n        super(model, selection, wordSeparators);\n        this._selectionIsEmpty = selection.isEmpty();\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return timeout(250, token).then(() => {\n            if (!selection.isEmpty()) {\n                return [];\n            }\n            const word = model.getWordAtPosition(selection.getPosition());\n            if (!word || word.word.length > 1000) {\n                return [];\n            }\n            const matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n            return matches.map(m => {\n                return {\n                    range: m.range,\n                    kind: DocumentHighlightKind.Text\n                };\n            });\n        });\n    }\n    isValid(model, selection, decorations) {\n        const currentSelectionIsEmpty = selection.isEmpty();\n        if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n            return false;\n        }\n        return super.isValid(model, selection, decorations);\n    }\n}\nfunction computeOccurencesAtPosition(registry, model, selection, wordSeparators) {\n    if (registry.has(model)) {\n        return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators, registry);\n    }\n    return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\nregisterModelAndPositionCommand('_executeDocumentHighlights', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getOccurrencesAtPosition(languageFeaturesService.documentHighlightProvider, model, position, CancellationToken.None);\n});\nclass WordHighlighter {\n    constructor(editor, providers, linkedHighlighters, contextKeyService) {\n        this.toUnhook = new DisposableStore();\n        this.workerRequestTokenId = 0;\n        this.workerRequestCompleted = false;\n        this.workerRequestValue = [];\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n        this.editor = editor;\n        this.providers = providers;\n        this.linkedHighlighters = linkedHighlighters;\n        this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n        this._ignorePositionChangeEvent = false;\n        this.occurrencesHighlight = this.editor.getOption(79 /* EditorOption.occurrencesHighlight */);\n        this.model = this.editor.getModel();\n        this.toUnhook.add(editor.onDidChangeCursorPosition((e) => {\n            if (this._ignorePositionChangeEvent) {\n                // We are changing the position => ignore this event\n                return;\n            }\n            if (!this.occurrencesHighlight) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._onPositionChanged(e);\n        }));\n        this.toUnhook.add(editor.onDidChangeModelContent((e) => {\n            this._stopAll();\n        }));\n        this.toUnhook.add(editor.onDidChangeConfiguration((e) => {\n            const newValue = this.editor.getOption(79 /* EditorOption.occurrencesHighlight */);\n            if (this.occurrencesHighlight !== newValue) {\n                this.occurrencesHighlight = newValue;\n                this._stopAll();\n            }\n        }));\n        this.decorations = this.editor.createDecorationsCollection();\n        this.workerRequestTokenId = 0;\n        this.workerRequest = null;\n        this.workerRequestCompleted = false;\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n    }\n    hasDecorations() {\n        return (this.decorations.length > 0);\n    }\n    restore() {\n        if (!this.occurrencesHighlight) {\n            return;\n        }\n        this._run();\n    }\n    stop() {\n        if (!this.occurrencesHighlight) {\n            return;\n        }\n        this._stopAll();\n    }\n    _getSortedHighlights() {\n        return (this.decorations.getRanges()\n            .sort(Range.compareRangesUsingStarts));\n    }\n    moveNext() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index + 1) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    moveBack() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index - 1 + highlights.length) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    _removeDecorations() {\n        if (this.decorations.length > 0) {\n            // remove decorations\n            this.decorations.clear();\n            this._hasWordHighlights.set(false);\n        }\n    }\n    _stopAll() {\n        // Remove any existing decorations\n        this._removeDecorations();\n        // Cancel any renderDecorationsTimer\n        if (this.renderDecorationsTimer !== -1) {\n            clearTimeout(this.renderDecorationsTimer);\n            this.renderDecorationsTimer = -1;\n        }\n        // Cancel any worker request\n        if (this.workerRequest !== null) {\n            this.workerRequest.cancel();\n            this.workerRequest = null;\n        }\n        // Invalidate any worker request callback\n        if (!this.workerRequestCompleted) {\n            this.workerRequestTokenId++;\n            this.workerRequestCompleted = true;\n        }\n    }\n    _onPositionChanged(e) {\n        // disabled\n        if (!this.occurrencesHighlight) {\n            this._stopAll();\n            return;\n        }\n        // ignore typing & other\n        if (e.reason !== 3 /* CursorChangeReason.Explicit */) {\n            this._stopAll();\n            return;\n        }\n        this._run();\n    }\n    _getWord() {\n        const editorSelection = this.editor.getSelection();\n        const lineNumber = editorSelection.startLineNumber;\n        const startColumn = editorSelection.startColumn;\n        return this.model.getWordAtPosition({\n            lineNumber: lineNumber,\n            column: startColumn\n        });\n    }\n    _run() {\n        const editorSelection = this.editor.getSelection();\n        // ignore multiline selection\n        if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n            this._stopAll();\n            return;\n        }\n        const startColumn = editorSelection.startColumn;\n        const endColumn = editorSelection.endColumn;\n        const word = this._getWord();\n        // The selection must be inside a word or surround one word at most\n        if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n            this._stopAll();\n            return;\n        }\n        // All the effort below is trying to achieve this:\n        // - when cursor is moved to a word, trigger immediately a findOccurrences request\n        // - 250ms later after the last cursor move event, render the occurrences\n        // - no flickering!\n        const workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this.decorations));\n        // There are 4 cases:\n        // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n        // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n        // c) old workerRequest is valid, but not completed\n        // d) old workerRequest is not valid\n        // For a) no action is needed\n        // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n        this.lastCursorPositionChangeTime = (new Date()).getTime();\n        if (workerRequestIsValid) {\n            if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n                // case b)\n                // Delay the firing of renderDecorationsTimer by an extra 250 ms\n                clearTimeout(this.renderDecorationsTimer);\n                this.renderDecorationsTimer = -1;\n                this._beginRenderDecorations();\n            }\n        }\n        else {\n            // case d)\n            // Stop all previous actions and start fresh\n            this._stopAll();\n            const myRequestId = ++this.workerRequestTokenId;\n            this.workerRequestCompleted = false;\n            this.workerRequest = computeOccurencesAtPosition(this.providers, this.model, this.editor.getSelection(), this.editor.getOption(128 /* EditorOption.wordSeparators */));\n            this.workerRequest.result.then(data => {\n                if (myRequestId === this.workerRequestTokenId) {\n                    this.workerRequestCompleted = true;\n                    this.workerRequestValue = data || [];\n                    this._beginRenderDecorations();\n                }\n            }, onUnexpectedError);\n        }\n    }\n    _beginRenderDecorations() {\n        const currentTime = (new Date()).getTime();\n        const minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n        if (currentTime >= minimumRenderTime) {\n            // Synchronous\n            this.renderDecorationsTimer = -1;\n            this.renderDecorations();\n        }\n        else {\n            // Asynchronous\n            this.renderDecorationsTimer = setTimeout(() => {\n                this.renderDecorations();\n            }, (minimumRenderTime - currentTime));\n        }\n    }\n    renderDecorations() {\n        this.renderDecorationsTimer = -1;\n        const decorations = [];\n        for (const info of this.workerRequestValue) {\n            if (info.range) {\n                decorations.push({\n                    range: info.range,\n                    options: getHighlightDecorationOptions(info.kind)\n                });\n            }\n        }\n        this.decorations.set(decorations);\n        this._hasWordHighlights.set(this.hasDecorations());\n        // update decorators of friends\n        for (const other of this.linkedHighlighters()) {\n            if ((other === null || other === void 0 ? void 0 : other.editor.getModel()) === this.editor.getModel()) {\n                other._stopAll();\n                other.decorations.set(decorations);\n                other._hasWordHighlights.set(other.hasDecorations());\n            }\n        }\n    }\n    dispose() {\n        this._stopAll();\n        this.toUnhook.dispose();\n    }\n}\nlet WordHighlighterContribution = WordHighlighterContribution_1 = class WordHighlighterContribution extends Disposable {\n    static get(editor) {\n        return editor.getContribution(WordHighlighterContribution_1.ID);\n    }\n    constructor(editor, contextKeyService, languageFeaturesService) {\n        super();\n        this.wordHighlighter = null;\n        this.linkedContributions = new Set();\n        const createWordHighlighterIfPossible = () => {\n            if (editor.hasModel()) {\n                this.wordHighlighter = new WordHighlighter(editor, languageFeaturesService.documentHighlightProvider, () => Iterable.map(this.linkedContributions, c => c.wordHighlighter), contextKeyService);\n            }\n        };\n        this._register(editor.onDidChangeModel((e) => {\n            if (this.wordHighlighter) {\n                this.wordHighlighter.dispose();\n                this.wordHighlighter = null;\n            }\n            createWordHighlighterIfPossible();\n        }));\n        createWordHighlighterIfPossible();\n    }\n    saveViewState() {\n        if (this.wordHighlighter && this.wordHighlighter.hasDecorations()) {\n            return true;\n        }\n        return false;\n    }\n    moveNext() {\n        var _a;\n        (_a = this.wordHighlighter) === null || _a === void 0 ? void 0 : _a.moveNext();\n    }\n    moveBack() {\n        var _a;\n        (_a = this.wordHighlighter) === null || _a === void 0 ? void 0 : _a.moveBack();\n    }\n    restoreViewState(state) {\n        if (this.wordHighlighter && state) {\n            this.wordHighlighter.restore();\n        }\n    }\n    stopHighlighting() {\n        var _a;\n        (_a = this.wordHighlighter) === null || _a === void 0 ? void 0 : _a.stop();\n    }\n    linkWordHighlighters(editor) {\n        const other = WordHighlighterContribution_1.get(editor);\n        if (!other) {\n            return Disposable.None;\n        }\n        this.linkedContributions.add(other);\n        other.linkedContributions.add(this);\n        return toDisposable(() => {\n            this.linkedContributions.delete(other);\n            other.linkedContributions.delete(this);\n        });\n    }\n    dispose() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.dispose();\n            this.wordHighlighter = null;\n        }\n        super.dispose();\n    }\n};\nWordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\nWordHighlighterContribution = WordHighlighterContribution_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService)\n], WordHighlighterContribution);\nexport { WordHighlighterContribution };\nclass WordHighlightNavigationAction extends EditorAction {\n    constructor(next, opts) {\n        super(opts);\n        this._isNext = next;\n    }\n    run(accessor, editor) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        if (this._isNext) {\n            controller.moveNext();\n        }\n        else {\n            controller.moveBack();\n        }\n    }\n}\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.wordHighlight.next',\n            label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n            alias: 'Go to Next Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.wordHighlight.prev',\n            label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n            alias: 'Go to Previous Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass TriggerWordHighlightAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.wordHighlight.trigger',\n            label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n            alias: 'Trigger Symbol Highlight',\n            precondition: ctxHasWordHighlights.toNegated(),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.restoreViewState(true);\n    }\n}\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { CursorState } from '../../../common/cursorCommon.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { getMapForWordSeparators } from '../../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\nexport class MoveWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._inSelectionMode = opts.inSelectionMode;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(128 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const result = selections.map((sel) => {\n            const inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\n            const outPosition = this._move(wordSeparators, model, inPosition, this._wordNavigationType);\n            return this._moveTo(sel, outPosition, this._inSelectionMode);\n        });\n        model.pushStackElement();\n        editor._getViewModel().setCursorStates('moveWordCommand', 3 /* CursorChangeReason.Explicit */, result.map(r => CursorState.fromModelSelection(r)));\n        if (result.length === 1) {\n            const pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\n            editor.revealPosition(pos, 0 /* ScrollType.Smooth */);\n        }\n    }\n    _moveTo(from, to, inSelectionMode) {\n        if (inSelectionMode) {\n            // move just position\n            return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\n        }\n        else {\n            // move everything\n            return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\n        }\n    }\n}\nexport class WordLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class WordRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeft extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordStartLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeftSelect extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects\nexport class CursorWordAccessibilityLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeft',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeftSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRight extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordStartRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRightSelect extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordAccessibilityRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRight',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRightSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class DeleteWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._whitespaceHeuristics = opts.whitespaceHeuristics;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(128 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const autoClosingBrackets = editor.getOption(6 /* EditorOption.autoClosingBrackets */);\n        const autoClosingQuotes = editor.getOption(10 /* EditorOption.autoClosingQuotes */);\n        const autoClosingPairs = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getAutoClosingPairs();\n        const viewModel = editor._getViewModel();\n        const commands = selections.map((sel) => {\n            const deleteRange = this._delete({\n                wordSeparators,\n                model,\n                selection: sel,\n                whitespaceHeuristics: this._whitespaceHeuristics,\n                autoClosingDelete: editor.getOption(8 /* EditorOption.autoClosingDelete */),\n                autoClosingBrackets,\n                autoClosingQuotes,\n                autoClosingPairs,\n                autoClosedCharacters: viewModel.getCursorAutoClosedCharacters()\n            }, this._wordNavigationType);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteWordLeftCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordLeft(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordRightCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordRight(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class DeleteWordStartLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteWordStartRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteInsideWord extends EditorAction {\n    constructor() {\n        super({\n            id: 'deleteInsideWord',\n            precondition: EditorContextKeys.writable,\n            label: nls.localize('deleteInsideWord', \"Delete Word\"),\n            alias: 'Delete Word'\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(128 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const commands = selections.map((sel) => {\n            const deleteRange = WordOperations.deleteInsideWord(wordSeparators, model, sel);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorCommand(new CursorWordStartLeft());\nregisterEditorCommand(new CursorWordEndLeft());\nregisterEditorCommand(new CursorWordLeft());\nregisterEditorCommand(new CursorWordStartLeftSelect());\nregisterEditorCommand(new CursorWordEndLeftSelect());\nregisterEditorCommand(new CursorWordLeftSelect());\nregisterEditorCommand(new CursorWordStartRight());\nregisterEditorCommand(new CursorWordEndRight());\nregisterEditorCommand(new CursorWordRight());\nregisterEditorCommand(new CursorWordStartRightSelect());\nregisterEditorCommand(new CursorWordEndRightSelect());\nregisterEditorCommand(new CursorWordRightSelect());\nregisterEditorCommand(new CursorWordAccessibilityLeft());\nregisterEditorCommand(new CursorWordAccessibilityLeftSelect());\nregisterEditorCommand(new CursorWordAccessibilityRight());\nregisterEditorCommand(new CursorWordAccessibilityRightSelect());\nregisterEditorCommand(new DeleteWordStartLeft());\nregisterEditorCommand(new DeleteWordEndLeft());\nregisterEditorCommand(new DeleteWordLeft());\nregisterEditorCommand(new DeleteWordStartRight());\nregisterEditorCommand(new DeleteWordEndRight());\nregisterEditorCommand(new DeleteWordRight());\nregisterEditorAction(DeleteInsideWord);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { WordPartOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DeleteWordCommand, MoveWordCommand } from '../../wordOperations/browser/wordOperations.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nexport class DeleteWordPartLeft extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordPartLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartLeft(ctx);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordPartRight extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordPartRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartRight(ctx);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class WordPartLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartLeft(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartLeft extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\nexport class CursorWordPartLeftSelect extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\nexport class WordPartRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartRight extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordPartRightSelect extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nregisterEditorCommand(new DeleteWordPartLeft());\nregisterEditorCommand(new DeleteWordPartRight());\nregisterEditorCommand(new CursorWordPartLeft());\nregisterEditorCommand(new CursorWordPartLeftSelect());\nregisterEditorCommand(new CursorWordPartRight());\nregisterEditorCommand(new CursorWordPartRightSelect());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nexport class ReadOnlyMessageController extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n        const messageController = MessageController.get(this.editor);\n        if (messageController && this.editor.hasModel()) {\n            let message = this.editor.getOptions().get(90 /* EditorOption.readOnlyMessage */);\n            if (!message) {\n                if (this.editor.isSimpleWidget) {\n                    message = new MarkdownString(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"));\n                }\n                else {\n                    message = new MarkdownString(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"));\n                }\n            }\n            messageController.showMessage(message, this.editor.getPosition());\n        }\n    }\n}\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport class IPadShowKeyboard extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this.widget = null;\n        if (isIOS) {\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\n            this.update();\n        }\n    }\n    update() {\n        const shouldHaveWidget = (!this.editor.getOption(89 /* EditorOption.readOnly */));\n        if (!this.widget && shouldHaveWidget) {\n            this.widget = new ShowKeyboardWidget(this.editor);\n        }\n        else if (this.widget && !shouldHaveWidget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n}\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\nclass ShowKeyboardWidget extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._domNode = document.createElement('textarea');\n        this._domNode.className = 'iPadShowKeyboard';\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\n            this.editor.focus();\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\n            this.editor.focus();\n        }));\n        this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this.editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\n        };\n    }\n}\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard, 3 /* EditorContributionInstantiation.Eventually */);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorOptions } from './common/config/editorOptions.js';\nimport { createMonacoBaseAPI } from './common/services/editorBaseApi.js';\nimport { createMonacoEditorAPI } from './standalone/browser/standaloneEditor.js';\nimport { createMonacoLanguagesAPI } from './standalone/browser/standaloneLanguages.js';\nimport { FormattingConflicts } from './contrib/format/browser/format.js';\n// Set defaults for standalone editor\nEditorOptions.wrappingIndent.defaultValue = 0 /* WrappingIndent.None */;\nEditorOptions.glyphMargin.defaultValue = false;\nEditorOptions.autoIndent.defaultValue = 3 /* EditorAutoIndentStrategy.Advanced */;\nEditorOptions.overviewRulerLanes.defaultValue = 2;\n// We need to register a formatter selector which simply picks the first available formatter.\n// See https://github.com/microsoft/monaco-editor/issues/2327\nFormattingConflicts.setFormatterSelector((formatter, document, mode) => Promise.resolve(formatter[0]));\nconst api = createMonacoBaseAPI();\napi.editor = createMonacoEditorAPI();\napi.languages = createMonacoLanguagesAPI();\nexport const CancellationTokenSource = api.CancellationTokenSource;\nexport const Emitter = api.Emitter;\nexport const KeyCode = api.KeyCode;\nexport const KeyMod = api.KeyMod;\nexport const Position = api.Position;\nexport const Range = api.Range;\nexport const Selection = api.Selection;\nexport const SelectionDirection = api.SelectionDirection;\nexport const MarkerSeverity = api.MarkerSeverity;\nexport const MarkerTag = api.MarkerTag;\nexport const Uri = api.Uri;\nexport const Token = api.Token;\nexport const editor = api.editor;\nexport const languages = api.languages;\nconst monacoEnvironment = globalThis.MonacoEnvironment;\nif ((monacoEnvironment === null || monacoEnvironment === void 0 ? void 0 : monacoEnvironment.globalAPI) || (typeof define === 'function' && define.amd)) {\n    globalThis.monaco = api;\n}\nif (typeof globalThis.require !== 'undefined' && typeof globalThis.require.config === 'function') {\n    globalThis.require.config({\n        ignoreDuplicateModules: [\n            'vscode-languageserver-types',\n            'vscode-languageserver-types/main',\n            'vscode-languageserver-textdocument',\n            'vscode-languageserver-textdocument/main',\n            'vscode-nls',\n            'vscode-nls/vscode-nls',\n            'jsonc-parser',\n            'jsonc-parser/main',\n            'vscode-uri',\n            'vscode-uri/index',\n            'vs/basic-languages/typescript/typescript'\n        ]\n    });\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport './standalone-tokens.css';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { splitLines } from '../../../base/common/strings.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { FontMeasurements } from '../../browser/config/fontMeasurements.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { DiffNavigator } from '../../browser/widget/diffNavigator.js';\nimport { ApplyUpdateResult, ConfigurationChangedEvent, EditorOptions } from '../../common/config/editorOptions.js';\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\nimport { EditorType } from '../../common/editorCommon.js';\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { NullState, nullTokenize } from '../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { createWebWorker as actualCreateWebWorker } from '../../browser/services/webWorker.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { Colorizer } from './colorizer.js';\nimport { createTextModel, StandaloneDiffEditor, StandaloneDiffEditor2, StandaloneEditor } from './standaloneCodeEditor.js';\nimport { StandaloneKeybindingService, StandaloneServices } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { EditorCommand } from '../../browser/editorExtensions.js';\nimport { MenuRegistry, MenuId } from '../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { LineRangeMapping, MovedText, RangeMapping, SimpleLineRangeMapping } from '../../common/diff/linesDiffComputer.js';\nimport { LineRange } from '../../common/core/lineRange.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\n/**\n * Create a new editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function create(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneEditor, domElement, options);\n}\n/**\n * Emitted when an editor is created.\n * Creating a diff editor might cause this listener to be invoked with the two editors.\n * @event\n */\nexport function onDidCreateEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onCodeEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Emitted when an diff editor is created.\n * @event\n */\nexport function onDidCreateDiffEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onDiffEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Get all the created editors.\n */\nexport function getEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listCodeEditors();\n}\n/**\n * Get all the created diff editors.\n */\nexport function getDiffEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listDiffEditors();\n}\n/**\n * Create a new diff editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function createDiffEditor(domElement, options, override) {\n    var _a;\n    const instantiationService = StandaloneServices.initialize(override || {});\n    if ((_a = options === null || options === void 0 ? void 0 : options.experimental) === null || _a === void 0 ? void 0 : _a.useVersion2) {\n        return instantiationService.createInstance(StandaloneDiffEditor2, domElement, options);\n    }\n    return instantiationService.createInstance(StandaloneDiffEditor, domElement, options);\n}\nexport function createDiffNavigator(diffEditor, opts) {\n    const instantiationService = StandaloneServices.initialize({});\n    return instantiationService.createInstance(DiffNavigator, diffEditor, opts);\n}\n/**\n * Add a command.\n */\nexport function addCommand(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid command descriptor, `id` and `run` are required properties!');\n    }\n    return CommandsRegistry.registerCommand(descriptor.id, descriptor.run);\n}\n/**\n * Add an action to all editors.\n */\nexport function addEditorAction(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.label !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n    }\n    const precondition = ContextKeyExpr.deserialize(descriptor.precondition);\n    const run = (accessor, ...args) => {\n        return EditorCommand.runEditorCommand(accessor, args, precondition, (accessor, editor, args) => Promise.resolve(descriptor.run(editor, ...args)));\n    };\n    const toDispose = new DisposableStore();\n    // Register the command\n    toDispose.add(CommandsRegistry.registerCommand(descriptor.id, run));\n    // Register the context menu item\n    if (descriptor.contextMenuGroupId) {\n        const menuItem = {\n            command: {\n                id: descriptor.id,\n                title: descriptor.label\n            },\n            when: precondition,\n            group: descriptor.contextMenuGroupId,\n            order: descriptor.contextMenuOrder || 0\n        };\n        toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n    }\n    // Register the keybindings\n    if (Array.isArray(descriptor.keybindings)) {\n        const keybindingService = StandaloneServices.get(IKeybindingService);\n        if (!(keybindingService instanceof StandaloneKeybindingService)) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        }\n        else {\n            const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(descriptor.keybindingContext));\n            toDispose.add(keybindingService.addDynamicKeybindings(descriptor.keybindings.map((keybinding) => {\n                return {\n                    keybinding,\n                    command: descriptor.id,\n                    when: keybindingsWhen\n                };\n            })));\n        }\n    }\n    return toDispose;\n}\n/**\n * Add a keybinding rule.\n */\nexport function addKeybindingRule(rule) {\n    return addKeybindingRules([rule]);\n}\n/**\n * Add keybinding rules.\n */\nexport function addKeybindingRules(rules) {\n    const keybindingService = StandaloneServices.get(IKeybindingService);\n    if (!(keybindingService instanceof StandaloneKeybindingService)) {\n        console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        return Disposable.None;\n    }\n    return keybindingService.addDynamicKeybindings(rules.map((rule) => {\n        return {\n            keybinding: rule.keybinding,\n            command: rule.command,\n            commandArgs: rule.commandArgs,\n            when: ContextKeyExpr.deserialize(rule.when),\n        };\n    }));\n}\n/**\n * Create a new editor model.\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\n */\nexport function createModel(value, language, uri) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(language) || language;\n    return createTextModel(StandaloneServices.get(IModelService), languageService, value, languageId, uri);\n}\n/**\n * Change the language for a model.\n */\nexport function setModelLanguage(model, mimeTypeOrLanguageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(mimeTypeOrLanguageId) || mimeTypeOrLanguageId || PLAINTEXT_LANGUAGE_ID;\n    model.setLanguage(languageService.createById(languageId));\n}\n/**\n * Set the markers for a model.\n */\nexport function setModelMarkers(model, owner, markers) {\n    if (model) {\n        const markerService = StandaloneServices.get(IMarkerService);\n        markerService.changeOne(owner, model.uri, markers);\n    }\n}\n/**\n * Remove all markers of an owner.\n */\nexport function removeAllMarkers(owner) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    markerService.changeAll(owner, []);\n}\n/**\n * Get markers for owner and/or resource\n *\n * @returns list of markers\n */\nexport function getModelMarkers(filter) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.read(filter);\n}\n/**\n * Emitted when markers change for a model.\n * @event\n */\nexport function onDidChangeMarkers(listener) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.onMarkerChanged(listener);\n}\n/**\n * Get the model that has `uri` if it exists.\n */\nexport function getModel(uri) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModel(uri);\n}\n/**\n * Get all the created models.\n */\nexport function getModels() {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModels();\n}\n/**\n * Emitted when a model is created.\n * @event\n */\nexport function onDidCreateModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelAdded(listener);\n}\n/**\n * Emitted right before a model is disposed.\n * @event\n */\nexport function onWillDisposeModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelRemoved(listener);\n}\n/**\n * Emitted when a different language is set to a model.\n * @event\n */\nexport function onDidChangeModelLanguage(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelLanguageChanged((e) => {\n        listener({\n            model: e.model,\n            oldLanguage: e.oldLanguageId\n        });\n    });\n}\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(opts) {\n    return actualCreateWebWorker(StandaloneServices.get(IModelService), StandaloneServices.get(ILanguageConfigurationService), opts);\n}\n/**\n * Colorize the contents of `domNode` using attribute `data-lang`.\n */\nexport function colorizeElement(domNode, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    return Colorizer.colorizeElement(themeService, languageService, domNode, options).then(() => {\n        themeService.registerEditorContainer(domNode);\n    });\n}\n/**\n * Colorize `text` using language `languageId`.\n */\nexport function colorize(text, languageId, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorize(languageService, text, languageId, options);\n}\n/**\n * Colorize a line in a model.\n */\nexport function colorizeModelLine(model, lineNumber, tabSize = 4) {\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\n}\n/**\n * @internal\n */\nfunction getSafeTokenizationSupport(language) {\n    const tokenizationSupport = languages.TokenizationRegistry.get(language);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(language, state)\n    };\n}\n/**\n * Tokenize `text` using language `languageId`\n */\nexport function tokenize(text, languageId) {\n    // Needed in order to get the mode registered for subsequent look-ups\n    languages.TokenizationRegistry.getOrCreate(languageId);\n    const tokenizationSupport = getSafeTokenizationSupport(languageId);\n    const lines = splitLines(text);\n    const result = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const line = lines[i];\n        const tokenizationResult = tokenizationSupport.tokenize(line, true, state);\n        result[i] = tokenizationResult.tokens;\n        state = tokenizationResult.endState;\n    }\n    return result;\n}\n/**\n * Define a new theme or update an existing theme.\n */\nexport function defineTheme(themeName, themeData) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.defineTheme(themeName, themeData);\n}\n/**\n * Switches to a theme.\n */\nexport function setTheme(themeName) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.setTheme(themeName);\n}\n/**\n * Clears all cached font measurements and triggers re-measurement.\n */\nexport function remeasureFonts() {\n    FontMeasurements.clearAllFontInfos();\n}\n/**\n * Register a command.\n */\nexport function registerCommand(id, handler) {\n    return CommandsRegistry.registerCommand({ id, handler });\n}\n/**\n * Registers a handler that is called when a link is opened in any editor. The handler callback should return `true` if the link was handled and `false` otherwise.\n * The handler that was registered last will be called first when a link is opened.\n *\n * Returns a disposable that can unregister the opener again.\n */\nexport function registerLinkOpener(opener) {\n    const openerService = StandaloneServices.get(IOpenerService);\n    return openerService.registerOpener({\n        open(resource) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (typeof resource === 'string') {\n                    resource = URI.parse(resource);\n                }\n                return opener.open(resource);\n            });\n        }\n    });\n}\n/**\n * Registers a handler that is called when a resource other than the current model should be opened in the editor (e.g. \"go to definition\").\n * The handler callback should return `true` if the request was handled and `false` otherwise.\n *\n * Returns a disposable that can unregister the opener again.\n *\n * If no handler is registered the default behavior is to do nothing for models other than the currently attached one.\n */\nexport function registerEditorOpener(opener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.registerCodeEditorOpenHandler((input, source, sideBySide) => __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        if (!source) {\n            return null;\n        }\n        const selection = (_a = input.options) === null || _a === void 0 ? void 0 : _a.selection;\n        let selectionOrPosition;\n        if (selection && typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n            selectionOrPosition = selection;\n        }\n        else if (selection) {\n            selectionOrPosition = { lineNumber: selection.startLineNumber, column: selection.startColumn };\n        }\n        if (yield opener.openCodeEditor(source, input.resource, selectionOrPosition)) {\n            return source; // return source editor to indicate that this handler has successfully handled the opening\n        }\n        return null; // fallback to other registered handlers\n    }));\n}\n/**\n * @internal\n */\nexport function createMonacoEditorAPI() {\n    return {\n        // methods\n        create: create,\n        getEditors: getEditors,\n        getDiffEditors: getDiffEditors,\n        onDidCreateEditor: onDidCreateEditor,\n        onDidCreateDiffEditor: onDidCreateDiffEditor,\n        createDiffEditor: createDiffEditor,\n        createDiffNavigator: createDiffNavigator,\n        addCommand: addCommand,\n        addEditorAction: addEditorAction,\n        addKeybindingRule: addKeybindingRule,\n        addKeybindingRules: addKeybindingRules,\n        createModel: createModel,\n        setModelLanguage: setModelLanguage,\n        setModelMarkers: setModelMarkers,\n        getModelMarkers: getModelMarkers,\n        removeAllMarkers: removeAllMarkers,\n        onDidChangeMarkers: onDidChangeMarkers,\n        getModels: getModels,\n        getModel: getModel,\n        onDidCreateModel: onDidCreateModel,\n        onWillDisposeModel: onWillDisposeModel,\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\n        createWebWorker: createWebWorker,\n        colorizeElement: colorizeElement,\n        colorize: colorize,\n        colorizeModelLine: colorizeModelLine,\n        tokenize: tokenize,\n        defineTheme: defineTheme,\n        setTheme: setTheme,\n        remeasureFonts: remeasureFonts,\n        registerCommand: registerCommand,\n        registerLinkOpener: registerLinkOpener,\n        registerEditorOpener: registerEditorOpener,\n        // enums\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\n        EditorOption: standaloneEnums.EditorOption,\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\n        MinimapPosition: standaloneEnums.MinimapPosition,\n        MouseTargetType: standaloneEnums.MouseTargetType,\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\n        GlyphMarginLane: standaloneEnums.GlyphMarginLane,\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\n        RenderMinimap: standaloneEnums.RenderMinimap,\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\n        ScrollType: standaloneEnums.ScrollType,\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\n        WrappingIndent: standaloneEnums.WrappingIndent,\n        InjectedTextCursorStops: standaloneEnums.InjectedTextCursorStops,\n        PositionAffinity: standaloneEnums.PositionAffinity,\n        // classes\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\n        BareFontInfo: BareFontInfo,\n        FontInfo: FontInfo,\n        TextModelResolvedOptions: TextModelResolvedOptions,\n        FindMatch: FindMatch,\n        ApplyUpdateResult: ApplyUpdateResult,\n        LineRange: LineRange,\n        LineRangeMapping: LineRangeMapping,\n        RangeMapping: RangeMapping,\n        EditorZoom: EditorZoom,\n        MovedText: MovedText,\n        SimpleLineRangeMapping: SimpleLineRangeMapping,\n        // vars\n        EditorType: EditorType,\n        EditorOptions: EditorOptions\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { LineTokens } from '../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../common/viewModel.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nconst ttPolicy = createTrustedTypesPolicy('standaloneColorizer', { createHTML: value => value });\nexport class Colorizer {\n    static colorizeElement(themeService, languageService, domNode, options) {\n        options = options || {};\n        const theme = options.theme || 'vs';\n        const mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');\n        if (!mimeType) {\n            console.error('Mode not detected');\n            return Promise.resolve();\n        }\n        const languageId = languageService.getLanguageIdByMimeType(mimeType) || mimeType;\n        themeService.setTheme(theme);\n        const text = domNode.firstChild ? domNode.firstChild.nodeValue : '';\n        domNode.className += ' ' + theme;\n        const render = (str) => {\n            var _a;\n            const trustedhtml = (_a = ttPolicy === null || ttPolicy === void 0 ? void 0 : ttPolicy.createHTML(str)) !== null && _a !== void 0 ? _a : str;\n            domNode.innerHTML = trustedhtml;\n        };\n        return this.colorize(languageService, text || '', languageId, options).then(render, (err) => console.error(err));\n    }\n    static colorize(languageService, text, languageId, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const languageIdCodec = languageService.languageIdCodec;\n            let tabSize = 4;\n            if (options && typeof options.tabSize === 'number') {\n                tabSize = options.tabSize;\n            }\n            if (strings.startsWithUTF8BOM(text)) {\n                text = text.substr(1);\n            }\n            const lines = strings.splitLines(text);\n            if (!languageService.isRegisteredLanguageId(languageId)) {\n                return _fakeColorize(lines, tabSize, languageIdCodec);\n            }\n            const tokenizationSupport = yield TokenizationRegistry.getOrCreate(languageId);\n            if (tokenizationSupport) {\n                return _colorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n            }\n            return _fakeColorize(lines, tabSize, languageIdCodec);\n        });\n    }\n    static colorizeLine(line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize = 4) {\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, mightContainNonBasicASCII);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, mightContainRTL);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        return renderResult.html;\n    }\n    static colorizeModelLine(model, lineNumber, tabSize = 4) {\n        const content = model.getLineContent(lineNumber);\n        model.tokenization.forceTokenization(lineNumber);\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        const inflatedTokens = tokens.inflate();\n        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);\n    }\n}\nfunction _colorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    return new Promise((c, e) => {\n        const execute = () => {\n            const result = _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n            if (tokenizationSupport instanceof MonarchTokenizer) {\n                const status = tokenizationSupport.getLoadStatus();\n                if (status.loaded === false) {\n                    status.promise.then(execute, e);\n                    return;\n                }\n            }\n            c(result);\n        };\n        execute();\n    });\n}\nfunction _fakeColorize(lines, tabSize, languageIdCodec) {\n    let html = [];\n    const defaultMetadata = ((0 /* FontStyle.None */ << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\n        | (1 /* ColorId.DefaultForeground */ << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\n        | (2 /* ColorId.DefaultBackground */ << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\n    const tokens = new Uint32Array(2);\n    tokens[0] = 0;\n    tokens[1] = defaultMetadata;\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        tokens[0] = line.length;\n        const lineTokens = new LineTokens(tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n    }\n    return html.join('');\n}\nfunction _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    let html = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        const tokenizeResult = tokenizationSupport.tokenizeEncoded(line, true, state);\n        LineTokens.convertToEndOffset(tokenizeResult.tokens, line.length);\n        const lineTokens = new LineTokens(tokenizeResult.tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n        state = tokenizeResult.endState;\n    }\n    return html.join('');\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MonarchTokenizer_1;\nimport * as languages from '../../../common/languages.js';\nimport { NullState, nullTokenizeEncoded, nullTokenize } from '../../../common/languages/nullTokenize.js';\nimport * as monarchCommon from './monarchCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst CACHE_STACK_DEPTH = 5;\n/**\n * Reuse the same stack elements up to a certain depth.\n */\nclass MonarchStackElementFactory {\n    static create(parent, state) {\n        return this._INSTANCE.create(parent, state);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(parent, state) {\n        if (parent !== null && parent.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchStackElement(parent, state);\n        }\n        let stackElementId = MonarchStackElement.getStackElementId(parent);\n        if (stackElementId.length > 0) {\n            stackElementId += '|';\n        }\n        stackElementId += state;\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchStackElement(parent, state);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchStackElementFactory._INSTANCE = new MonarchStackElementFactory(CACHE_STACK_DEPTH);\nclass MonarchStackElement {\n    constructor(parent, state) {\n        this.parent = parent;\n        this.state = state;\n        this.depth = (this.parent ? this.parent.depth : 0) + 1;\n    }\n    static getStackElementId(element) {\n        let result = '';\n        while (element !== null) {\n            if (result.length > 0) {\n                result += '|';\n            }\n            result += element.state;\n            element = element.parent;\n        }\n        return result;\n    }\n    static _equals(a, b) {\n        while (a !== null && b !== null) {\n            if (a === b) {\n                return true;\n            }\n            if (a.state !== b.state) {\n                return false;\n            }\n            a = a.parent;\n            b = b.parent;\n        }\n        if (a === null && b === null) {\n            return true;\n        }\n        return false;\n    }\n    equals(other) {\n        return MonarchStackElement._equals(this, other);\n    }\n    push(state) {\n        return MonarchStackElementFactory.create(this, state);\n    }\n    pop() {\n        return this.parent;\n    }\n    popall() {\n        let result = this;\n        while (result.parent) {\n            result = result.parent;\n        }\n        return result;\n    }\n    switchTo(state) {\n        return MonarchStackElementFactory.create(this.parent, state);\n    }\n}\nclass EmbeddedLanguageData {\n    constructor(languageId, state) {\n        this.languageId = languageId;\n        this.state = state;\n    }\n    equals(other) {\n        return (this.languageId === other.languageId\n            && this.state.equals(other.state));\n    }\n    clone() {\n        const stateClone = this.state.clone();\n        // save an object\n        if (stateClone === this.state) {\n            return this;\n        }\n        return new EmbeddedLanguageData(this.languageId, this.state);\n    }\n}\n/**\n * Reuse the same line states up to a certain depth.\n */\nclass MonarchLineStateFactory {\n    static create(stack, embeddedLanguageData) {\n        return this._INSTANCE.create(stack, embeddedLanguageData);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(stack, embeddedLanguageData) {\n        if (embeddedLanguageData !== null) {\n            // no caching when embedding\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        if (stack !== null && stack.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        const stackElementId = MonarchStackElement.getStackElementId(stack);\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchLineState(stack, null);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchLineStateFactory._INSTANCE = new MonarchLineStateFactory(CACHE_STACK_DEPTH);\nclass MonarchLineState {\n    constructor(stack, embeddedLanguageData) {\n        this.stack = stack;\n        this.embeddedLanguageData = embeddedLanguageData;\n    }\n    clone() {\n        const embeddedlanguageDataClone = this.embeddedLanguageData ? this.embeddedLanguageData.clone() : null;\n        // save an object\n        if (embeddedlanguageDataClone === this.embeddedLanguageData) {\n            return this;\n        }\n        return MonarchLineStateFactory.create(this.stack, this.embeddedLanguageData);\n    }\n    equals(other) {\n        if (!(other instanceof MonarchLineState)) {\n            return false;\n        }\n        if (!this.stack.equals(other.stack)) {\n            return false;\n        }\n        if (this.embeddedLanguageData === null && other.embeddedLanguageData === null) {\n            return true;\n        }\n        if (this.embeddedLanguageData === null || other.embeddedLanguageData === null) {\n            return false;\n        }\n        return this.embeddedLanguageData.equals(other.embeddedLanguageData);\n    }\n}\nclass MonarchClassicTokensCollector {\n    constructor() {\n        this._tokens = [];\n        this._languageId = null;\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n    }\n    enterLanguage(languageId) {\n        this._languageId = languageId;\n    }\n    emit(startOffset, type) {\n        if (this._lastTokenType === type && this._lastTokenLanguage === this._languageId) {\n            return;\n        }\n        this._lastTokenType = type;\n        this._lastTokenLanguage = this._languageId;\n        this._tokens.push(new languages.Token(startOffset, type, this._languageId));\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenize(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (const token of nestedResult.tokens) {\n                this._tokens.push(new languages.Token(token.offset + offsetDelta, token.type, token.language));\n            }\n        }\n        else {\n            this._tokens = this._tokens.concat(nestedResult.tokens);\n        }\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n        this._languageId = null;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.TokenizationResult(this._tokens, endState);\n    }\n}\nclass MonarchModernTokensCollector {\n    constructor(languageService, theme) {\n        this._languageService = languageService;\n        this._theme = theme;\n        this._prependTokens = null;\n        this._tokens = [];\n        this._currentLanguageId = 0 /* LanguageId.Null */;\n        this._lastTokenMetadata = 0;\n    }\n    enterLanguage(languageId) {\n        this._currentLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\n    }\n    emit(startOffset, type) {\n        const metadata = this._theme.match(this._currentLanguageId, type) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n        if (this._lastTokenMetadata === metadata) {\n            return;\n        }\n        this._lastTokenMetadata = metadata;\n        this._tokens.push(startOffset);\n        this._tokens.push(metadata);\n    }\n    static _merge(a, b, c) {\n        const aLen = (a !== null ? a.length : 0);\n        const bLen = b.length;\n        const cLen = (c !== null ? c.length : 0);\n        if (aLen === 0 && bLen === 0 && cLen === 0) {\n            return new Uint32Array(0);\n        }\n        if (aLen === 0 && bLen === 0) {\n            return c;\n        }\n        if (bLen === 0 && cLen === 0) {\n            return a;\n        }\n        const result = new Uint32Array(aLen + bLen + cLen);\n        if (a !== null) {\n            result.set(a);\n        }\n        for (let i = 0; i < bLen; i++) {\n            result[aLen + i] = b[i];\n        }\n        if (c !== null) {\n            result.set(c, aLen + bLen);\n        }\n        return result;\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenizeEncoded(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (let i = 0, len = nestedResult.tokens.length; i < len; i += 2) {\n                nestedResult.tokens[i] += offsetDelta;\n            }\n        }\n        this._prependTokens = MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, nestedResult.tokens);\n        this._tokens = [];\n        this._currentLanguageId = 0;\n        this._lastTokenMetadata = 0;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.EncodedTokenizationResult(MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, null), endState);\n    }\n}\nlet MonarchTokenizer = MonarchTokenizer_1 = class MonarchTokenizer {\n    constructor(languageService, standaloneThemeService, languageId, lexer, _configurationService) {\n        this._configurationService = _configurationService;\n        this._languageService = languageService;\n        this._standaloneThemeService = standaloneThemeService;\n        this._languageId = languageId;\n        this._lexer = lexer;\n        this._embeddedLanguages = Object.create(null);\n        this.embeddedLoaded = Promise.resolve(undefined);\n        // Set up listening for embedded modes\n        let emitting = false;\n        this._tokenizationRegistryListener = languages.TokenizationRegistry.onDidChange((e) => {\n            if (emitting) {\n                return;\n            }\n            let isOneOfMyEmbeddedModes = false;\n            for (let i = 0, len = e.changedLanguages.length; i < len; i++) {\n                const language = e.changedLanguages[i];\n                if (this._embeddedLanguages[language]) {\n                    isOneOfMyEmbeddedModes = true;\n                    break;\n                }\n            }\n            if (isOneOfMyEmbeddedModes) {\n                emitting = true;\n                languages.TokenizationRegistry.handleChange([this._languageId]);\n                emitting = false;\n            }\n        });\n        this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: this._languageId\n        });\n        this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.maxTokenizationLineLength')) {\n                this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n                    overrideIdentifier: this._languageId\n                });\n            }\n        });\n    }\n    dispose() {\n        this._tokenizationRegistryListener.dispose();\n    }\n    getLoadStatus() {\n        const promises = [];\n        for (const nestedLanguageId in this._embeddedLanguages) {\n            const tokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n            if (tokenizationSupport) {\n                // The nested language is already loaded\n                if (tokenizationSupport instanceof MonarchTokenizer_1) {\n                    const nestedModeStatus = tokenizationSupport.getLoadStatus();\n                    if (nestedModeStatus.loaded === false) {\n                        promises.push(nestedModeStatus.promise);\n                    }\n                }\n                continue;\n            }\n            if (!languages.TokenizationRegistry.isResolved(nestedLanguageId)) {\n                // The nested language is in the process of being loaded\n                promises.push(languages.TokenizationRegistry.getOrCreate(nestedLanguageId));\n            }\n        }\n        if (promises.length === 0) {\n            return {\n                loaded: true\n            };\n        }\n        return {\n            loaded: false,\n            promise: Promise.all(promises).then(_ => undefined)\n        };\n    }\n    getInitialState() {\n        const rootState = MonarchStackElementFactory.create(null, this._lexer.start);\n        return MonarchLineStateFactory.create(rootState, null);\n    }\n    tokenize(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenize(this._languageId, lineState);\n        }\n        const tokensCollector = new MonarchClassicTokensCollector();\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    tokenizeEncoded(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenizeEncoded(this._languageService.languageIdCodec.encodeLanguageId(this._languageId), lineState);\n        }\n        const tokensCollector = new MonarchModernTokensCollector(this._languageService, this._standaloneThemeService.getColorTheme().tokenTheme);\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    _tokenize(line, hasEOL, lineState, collector) {\n        if (lineState.embeddedLanguageData) {\n            return this._nestedTokenize(line, hasEOL, lineState, 0, collector);\n        }\n        else {\n            return this._myTokenize(line, hasEOL, lineState, 0, collector);\n        }\n    }\n    _findLeavingNestedLanguageOffset(line, state) {\n        let rules = this._lexer.tokenizer[state.stack.state];\n        if (!rules) {\n            rules = monarchCommon.findRules(this._lexer, state.stack.state); // do parent matching\n            if (!rules) {\n                throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state.stack.state);\n            }\n        }\n        let popOffset = -1;\n        let hasEmbeddedPopRule = false;\n        for (const rule of rules) {\n            if (!monarchCommon.isIAction(rule.action) || rule.action.nextEmbedded !== '@pop') {\n                continue;\n            }\n            hasEmbeddedPopRule = true;\n            let regex = rule.regex;\n            const regexSource = rule.regex.source;\n            if (regexSource.substr(0, 4) === '^(?:' && regexSource.substr(regexSource.length - 1, 1) === ')') {\n                const flags = (regex.ignoreCase ? 'i' : '') + (regex.unicode ? 'u' : '');\n                regex = new RegExp(regexSource.substr(4, regexSource.length - 5), flags);\n            }\n            const result = line.search(regex);\n            if (result === -1 || (result !== 0 && rule.matchOnlyAtLineStart)) {\n                continue;\n            }\n            if (popOffset === -1 || result < popOffset) {\n                popOffset = result;\n            }\n        }\n        if (!hasEmbeddedPopRule) {\n            throw monarchCommon.createError(this._lexer, 'no rule containing nextEmbedded: \"@pop\" in tokenizer embedded state: ' + state.stack.state);\n        }\n        return popOffset;\n    }\n    _nestedTokenize(line, hasEOL, lineState, offsetDelta, tokensCollector) {\n        const popOffset = this._findLeavingNestedLanguageOffset(line, lineState);\n        if (popOffset === -1) {\n            // tokenization will not leave nested language\n            const nestedEndState = tokensCollector.nestedLanguageTokenize(line, hasEOL, lineState.embeddedLanguageData, offsetDelta);\n            return MonarchLineStateFactory.create(lineState.stack, new EmbeddedLanguageData(lineState.embeddedLanguageData.languageId, nestedEndState));\n        }\n        const nestedLanguageLine = line.substring(0, popOffset);\n        if (nestedLanguageLine.length > 0) {\n            // tokenize with the nested language\n            tokensCollector.nestedLanguageTokenize(nestedLanguageLine, false, lineState.embeddedLanguageData, offsetDelta);\n        }\n        const restOfTheLine = line.substring(popOffset);\n        return this._myTokenize(restOfTheLine, hasEOL, lineState, offsetDelta + popOffset, tokensCollector);\n    }\n    _safeRuleName(rule) {\n        if (rule) {\n            return rule.name;\n        }\n        return '(unknown)';\n    }\n    _myTokenize(lineWithoutLF, hasEOL, lineState, offsetDelta, tokensCollector) {\n        tokensCollector.enterLanguage(this._languageId);\n        const lineWithoutLFLength = lineWithoutLF.length;\n        const line = (hasEOL && this._lexer.includeLF ? lineWithoutLF + '\\n' : lineWithoutLF);\n        const lineLength = line.length;\n        let embeddedLanguageData = lineState.embeddedLanguageData;\n        let stack = lineState.stack;\n        let pos = 0;\n        let groupMatching = null;\n        // See https://github.com/microsoft/monaco-editor/issues/1235\n        // Evaluate rules at least once for an empty line\n        let forceEvaluation = true;\n        while (forceEvaluation || pos < lineLength) {\n            const pos0 = pos;\n            const stackLen0 = stack.depth;\n            const groupLen0 = groupMatching ? groupMatching.groups.length : 0;\n            const state = stack.state;\n            let matches = null;\n            let matched = null;\n            let action = null;\n            let rule = null;\n            let enteringEmbeddedLanguage = null;\n            // check if we need to process group matches first\n            if (groupMatching) {\n                matches = groupMatching.matches;\n                const groupEntry = groupMatching.groups.shift();\n                matched = groupEntry.matched;\n                action = groupEntry.action;\n                rule = groupMatching.rule;\n                // cleanup if necessary\n                if (groupMatching.groups.length === 0) {\n                    groupMatching = null;\n                }\n            }\n            else {\n                // otherwise we match on the token stream\n                if (!forceEvaluation && pos >= lineLength) {\n                    // nothing to do\n                    break;\n                }\n                forceEvaluation = false;\n                // get the rules for this state\n                let rules = this._lexer.tokenizer[state];\n                if (!rules) {\n                    rules = monarchCommon.findRules(this._lexer, state); // do parent matching\n                    if (!rules) {\n                        throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state);\n                    }\n                }\n                // try each rule until we match\n                const restOfLine = line.substr(pos);\n                for (const rule of rules) {\n                    if (pos === 0 || !rule.matchOnlyAtLineStart) {\n                        matches = restOfLine.match(rule.regex);\n                        if (matches) {\n                            matched = matches[0];\n                            action = rule.action;\n                            break;\n                        }\n                    }\n                }\n            }\n            // We matched 'rule' with 'matches' and 'action'\n            if (!matches) {\n                matches = [''];\n                matched = '';\n            }\n            if (!action) {\n                // bad: we didn't match anything, and there is no action to take\n                // we need to advance the stream or we get progress trouble\n                if (pos < lineLength) {\n                    matches = [line.charAt(pos)];\n                    matched = matches[0];\n                }\n                action = this._lexer.defaultToken;\n            }\n            if (matched === null) {\n                // should never happen, needed for strict null checking\n                break;\n            }\n            // advance stream\n            pos += matched.length;\n            // maybe call action function (used for 'cases')\n            while (monarchCommon.isFuzzyAction(action) && monarchCommon.isIAction(action) && action.test) {\n                action = action.test(matched, matches, state, pos === lineLength);\n            }\n            let result = null;\n            // set the result: either a string or an array of actions\n            if (typeof action === 'string' || Array.isArray(action)) {\n                result = action;\n            }\n            else if (action.group) {\n                result = action.group;\n            }\n            else if (action.token !== null && action.token !== undefined) {\n                // do $n replacements?\n                if (action.tokenSubst) {\n                    result = monarchCommon.substituteMatches(this._lexer, action.token, matched, matches, state);\n                }\n                else {\n                    result = action.token;\n                }\n                // enter embedded language?\n                if (action.nextEmbedded) {\n                    if (action.nextEmbedded === '@pop') {\n                        if (!embeddedLanguageData) {\n                            throw monarchCommon.createError(this._lexer, 'cannot pop embedded language if not inside one');\n                        }\n                        embeddedLanguageData = null;\n                    }\n                    else if (embeddedLanguageData) {\n                        throw monarchCommon.createError(this._lexer, 'cannot enter embedded language from within an embedded language');\n                    }\n                    else {\n                        enteringEmbeddedLanguage = monarchCommon.substituteMatches(this._lexer, action.nextEmbedded, matched, matches, state);\n                    }\n                }\n                // state transformations\n                if (action.goBack) { // back up the stream..\n                    pos = Math.max(0, pos - action.goBack);\n                }\n                if (action.switchTo && typeof action.switchTo === 'string') {\n                    let nextState = monarchCommon.substituteMatches(this._lexer, action.switchTo, matched, matches, state); // switch state without a push...\n                    if (nextState[0] === '@') {\n                        nextState = nextState.substr(1); // peel off starting '@'\n                    }\n                    if (!monarchCommon.findRules(this._lexer, nextState)) {\n                        throw monarchCommon.createError(this._lexer, 'trying to switch to a state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                    }\n                    else {\n                        stack = stack.switchTo(nextState);\n                    }\n                }\n                else if (action.transform && typeof action.transform === 'function') {\n                    throw monarchCommon.createError(this._lexer, 'action.transform not supported');\n                }\n                else if (action.next) {\n                    if (action.next === '@push') {\n                        if (stack.depth >= this._lexer.maxStack) {\n                            throw monarchCommon.createError(this._lexer, 'maximum tokenizer stack size reached: [' +\n                                stack.state + ',' + stack.parent.state + ',...]');\n                        }\n                        else {\n                            stack = stack.push(state);\n                        }\n                    }\n                    else if (action.next === '@pop') {\n                        if (stack.depth <= 1) {\n                            throw monarchCommon.createError(this._lexer, 'trying to pop an empty stack in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.pop();\n                        }\n                    }\n                    else if (action.next === '@popall') {\n                        stack = stack.popall();\n                    }\n                    else {\n                        let nextState = monarchCommon.substituteMatches(this._lexer, action.next, matched, matches, state);\n                        if (nextState[0] === '@') {\n                            nextState = nextState.substr(1); // peel off starting '@'\n                        }\n                        if (!monarchCommon.findRules(this._lexer, nextState)) {\n                            throw monarchCommon.createError(this._lexer, 'trying to set a next state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.push(nextState);\n                        }\n                    }\n                }\n                if (action.log && typeof (action.log) === 'string') {\n                    monarchCommon.log(this._lexer, this._lexer.languageId + ': ' + monarchCommon.substituteMatches(this._lexer, action.log, matched, matches, state));\n                }\n            }\n            // check result\n            if (result === null) {\n                throw monarchCommon.createError(this._lexer, 'lexer rule has no well-defined action in rule: ' + this._safeRuleName(rule));\n            }\n            const computeNewStateForEmbeddedLanguage = (enteringEmbeddedLanguage) => {\n                // support language names, mime types, and language ids\n                const languageId = (this._languageService.getLanguageIdByLanguageName(enteringEmbeddedLanguage)\n                    || this._languageService.getLanguageIdByMimeType(enteringEmbeddedLanguage)\n                    || enteringEmbeddedLanguage);\n                const embeddedLanguageData = this._getNestedEmbeddedLanguageData(languageId);\n                if (pos < lineLength) {\n                    // there is content from the embedded language on this line\n                    const restOfLine = lineWithoutLF.substr(pos);\n                    return this._nestedTokenize(restOfLine, hasEOL, MonarchLineStateFactory.create(stack, embeddedLanguageData), offsetDelta + pos, tokensCollector);\n                }\n                else {\n                    return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n                }\n            };\n            // is the result a group match?\n            if (Array.isArray(result)) {\n                if (groupMatching && groupMatching.groups.length > 0) {\n                    throw monarchCommon.createError(this._lexer, 'groups cannot be nested: ' + this._safeRuleName(rule));\n                }\n                if (matches.length !== result.length + 1) {\n                    throw monarchCommon.createError(this._lexer, 'matched number of groups does not match the number of actions in rule: ' + this._safeRuleName(rule));\n                }\n                let totalLen = 0;\n                for (let i = 1; i < matches.length; i++) {\n                    totalLen += matches[i].length;\n                }\n                if (totalLen !== matched.length) {\n                    throw monarchCommon.createError(this._lexer, 'with groups, all characters should be matched in consecutive groups in rule: ' + this._safeRuleName(rule));\n                }\n                groupMatching = {\n                    rule: rule,\n                    matches: matches,\n                    groups: []\n                };\n                for (let i = 0; i < result.length; i++) {\n                    groupMatching.groups[i] = {\n                        action: result[i],\n                        matched: matches[i + 1]\n                    };\n                }\n                pos -= matched.length;\n                // call recursively to initiate first result match\n                continue;\n            }\n            else {\n                // regular result\n                // check for '@rematch'\n                if (result === '@rematch') {\n                    pos -= matched.length;\n                    matched = ''; // better set the next state too..\n                    matches = null;\n                    result = '';\n                    // Even though `@rematch` was specified, if `nextEmbedded` also specified,\n                    // a state transition should occur.\n                    if (enteringEmbeddedLanguage !== null) {\n                        return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n                    }\n                }\n                // check progress\n                if (matched.length === 0) {\n                    if (lineLength === 0 || stackLen0 !== stack.depth || state !== stack.state || (!groupMatching ? 0 : groupMatching.groups.length) !== groupLen0) {\n                        continue;\n                    }\n                    else {\n                        throw monarchCommon.createError(this._lexer, 'no progress in tokenizer in rule: ' + this._safeRuleName(rule));\n                    }\n                }\n                // return the result (and check for brace matching)\n                // todo: for efficiency we could pre-sanitize tokenPostfix and substitutions\n                let tokenType = null;\n                if (monarchCommon.isString(result) && result.indexOf('@brackets') === 0) {\n                    const rest = result.substr('@brackets'.length);\n                    const bracket = findBracket(this._lexer, matched);\n                    if (!bracket) {\n                        throw monarchCommon.createError(this._lexer, '@brackets token returned but no bracket defined as: ' + matched);\n                    }\n                    tokenType = monarchCommon.sanitize(bracket.token + rest);\n                }\n                else {\n                    const token = (result === '' ? '' : result + this._lexer.tokenPostfix);\n                    tokenType = monarchCommon.sanitize(token);\n                }\n                if (pos0 < lineWithoutLFLength) {\n                    tokensCollector.emit(pos0 + offsetDelta, tokenType);\n                }\n            }\n            if (enteringEmbeddedLanguage !== null) {\n                return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n            }\n        }\n        return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n    }\n    _getNestedEmbeddedLanguageData(languageId) {\n        if (!this._languageService.isRegisteredLanguageId(languageId)) {\n            return new EmbeddedLanguageData(languageId, NullState);\n        }\n        if (languageId !== this._languageId) {\n            // Fire language loading event\n            this._languageService.requestBasicLanguageFeatures(languageId);\n            languages.TokenizationRegistry.getOrCreate(languageId);\n            this._embeddedLanguages[languageId] = true;\n        }\n        const tokenizationSupport = languages.TokenizationRegistry.get(languageId);\n        if (tokenizationSupport) {\n            return new EmbeddedLanguageData(languageId, tokenizationSupport.getInitialState());\n        }\n        return new EmbeddedLanguageData(languageId, NullState);\n    }\n};\nMonarchTokenizer = MonarchTokenizer_1 = __decorate([\n    __param(4, IConfigurationService)\n], MonarchTokenizer);\nexport { MonarchTokenizer };\n/**\n * Searches for a bracket in the 'brackets' attribute that matches the input.\n */\nfunction findBracket(lexer, matched) {\n    if (!matched) {\n        return null;\n    }\n    matched = monarchCommon.fixCase(lexer, matched);\n    const brackets = lexer.brackets;\n    for (const bracket of brackets) {\n        if (bracket.open === matched) {\n            return { token: bracket.token, bracketType: 1 /* monarchCommon.MonarchBracket.Open */ };\n        }\n        else if (bracket.close === matched) {\n            return { token: bracket.token, bracketType: -1 /* monarchCommon.MonarchBracket.Close */ };\n        }\n    }\n    return null;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function isFuzzyActionArr(what) {\n    return (Array.isArray(what));\n}\nexport function isFuzzyAction(what) {\n    return !isFuzzyActionArr(what);\n}\nexport function isString(what) {\n    return (typeof what === 'string');\n}\nexport function isIAction(what) {\n    return !isString(what);\n}\n// Small helper functions\n/**\n * Is a string null, undefined, or empty?\n */\nexport function empty(s) {\n    return (s ? false : true);\n}\n/**\n * Puts a string to lower case if 'ignoreCase' is set.\n */\nexport function fixCase(lexer, str) {\n    return (lexer.ignoreCase && str ? str.toLowerCase() : str);\n}\n/**\n * Ensures there are no bad characters in a CSS token class.\n */\nexport function sanitize(s) {\n    return s.replace(/[&<>'\"_]/g, '-'); // used on all output token CSS classes\n}\n// Logging\n/**\n * Logs a message.\n */\nexport function log(lexer, msg) {\n    console.log(`${lexer.languageId}: ${msg}`);\n}\n// Throwing errors\nexport function createError(lexer, msg) {\n    return new Error(`${lexer.languageId}: ${msg}`);\n}\n// Helper functions for rule finding and substitution\n/**\n * substituteMatches is used on lexer strings and can substitutes predefined patterns:\n * \t\t$$  => $\n * \t\t$#  => id\n * \t\t$n  => matched entry n\n * \t\t@attr => contents of lexer[attr]\n *\n * See documentation for more info\n */\nexport function substituteMatches(lexer, str, id, matches, state) {\n    const re = /\\$((\\$)|(#)|(\\d\\d?)|[sS](\\d\\d?)|@(\\w+))/g;\n    let stateMatches = null;\n    return str.replace(re, function (full, sub, dollar, hash, n, s, attr, ofs, total) {\n        if (!empty(dollar)) {\n            return '$'; // $$\n        }\n        if (!empty(hash)) {\n            return fixCase(lexer, id); // default $#\n        }\n        if (!empty(n) && n < matches.length) {\n            return fixCase(lexer, matches[n]); // $n\n        }\n        if (!empty(attr) && lexer && typeof (lexer[attr]) === 'string') {\n            return lexer[attr]; //@attribute\n        }\n        if (stateMatches === null) { // split state on demand\n            stateMatches = state.split('.');\n            stateMatches.unshift(state);\n        }\n        if (!empty(s) && s < stateMatches.length) {\n            return fixCase(lexer, stateMatches[s]); //$Sn\n        }\n        return '';\n    });\n}\n/**\n * Find the tokenizer rules for a specific state (i.e. next action)\n */\nexport function findRules(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const rules = lexer.tokenizer[state];\n        if (rules) {\n            return rules;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return null;\n}\n/**\n * Is a certain state defined? In contrast to 'findRules' this works on a ILexerMin.\n * This is used during compilation where we may know the defined states\n * but not yet whether the corresponding rules are correct.\n */\nexport function stateExists(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const exist = lexer.stateNames[state];\n        if (exist) {\n            return true;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return false;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Color } from '../../../base/common/color.js';\nimport { Range } from '../../common/core/range.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ModesRegistry } from '../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { StandaloneServices } from './standaloneServices.js';\nimport { compile } from '../common/monarch/monarchCompile.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\n/**\n * Register information about a new language.\n */\nexport function register(language) {\n    // Intentionally using the `ModesRegistry` here to avoid\n    // instantiating services too quickly in the standalone editor.\n    ModesRegistry.registerLanguage(language);\n}\n/**\n * Get the information of all the registered languages.\n */\nexport function getLanguages() {\n    let result = [];\n    result = result.concat(ModesRegistry.getLanguages());\n    return result;\n}\nexport function getEncodedLanguageId(languageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    return languageService.languageIdCodec.encodeLanguageId(languageId);\n}\n/**\n * An event emitted when a language is associated for the first time with a text model.\n * @event\n */\nexport function onLanguage(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestRichLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * An event emitted when a language is associated for the first time with a text model or\n * when a language is encountered during the tokenization of another language.\n * @event\n */\nexport function onLanguageEncountered(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestBasicLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * Set the editing configuration for a language.\n */\nexport function setLanguageConfiguration(languageId, configuration) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set configuration for unknown language ${languageId}`);\n    }\n    const languageConfigurationService = StandaloneServices.get(ILanguageConfigurationService);\n    return languageConfigurationService.register(languageId, configuration, 100);\n}\n/**\n * @internal\n */\nexport class EncodedTokenizationSupportAdapter {\n    constructor(languageId, actual) {\n        this._languageId = languageId;\n        this._actual = actual;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    tokenize(line, hasEOL, state) {\n        if (typeof this._actual.tokenize === 'function') {\n            return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n        }\n        throw new Error('Not supported!');\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const result = this._actual.tokenizeEncoded(line, state);\n        return new languages.EncodedTokenizationResult(result.tokens, result.endState);\n    }\n}\n/**\n * @internal\n */\nexport class TokenizationSupportAdapter {\n    constructor(_languageId, _actual, _languageService, _standaloneThemeService) {\n        this._languageId = _languageId;\n        this._actual = _actual;\n        this._languageService = _languageService;\n        this._standaloneThemeService = _standaloneThemeService;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    static _toClassicTokens(tokens, language) {\n        const result = [];\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[i] = new languages.Token(startIndex, t.scopes, language);\n            previousStartIndex = startIndex;\n        }\n        return result;\n    }\n    static adaptTokenize(language, actual, line, state) {\n        const actualResult = actual.tokenize(line, state);\n        const tokens = TokenizationSupportAdapter._toClassicTokens(actualResult.tokens, language);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.TokenizationResult(tokens, endState);\n    }\n    tokenize(line, hasEOL, state) {\n        return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n    }\n    _toBinaryTokens(languageIdCodec, tokens) {\n        const languageId = languageIdCodec.encodeLanguageId(this._languageId);\n        const tokenTheme = this._standaloneThemeService.getColorTheme().tokenTheme;\n        const result = [];\n        let resultLen = 0;\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            const metadata = tokenTheme.match(languageId, t.scopes) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\n                // same metadata\n                continue;\n            }\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[resultLen++] = startIndex;\n            result[resultLen++] = metadata;\n            previousStartIndex = startIndex;\n        }\n        const actualResult = new Uint32Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            actualResult[i] = result[i];\n        }\n        return actualResult;\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const actualResult = this._actual.tokenize(line, state);\n        const tokens = this._toBinaryTokens(this._languageService.languageIdCodec, actualResult.tokens);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.EncodedTokenizationResult(tokens, endState);\n    }\n}\nfunction isATokensProvider(provider) {\n    return (typeof provider.getInitialState === 'function');\n}\nfunction isEncodedTokensProvider(provider) {\n    return 'tokenizeEncoded' in provider;\n}\nfunction isThenable(obj) {\n    return obj && typeof obj.then === 'function';\n}\n/**\n * Change the color map that is used for token colors.\n * Supported formats (hex): #RRGGBB, $RRGGBBAA, #RGB, #RGBA\n */\nexport function setColorMap(colorMap) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    if (colorMap) {\n        const result = [null];\n        for (let i = 1, len = colorMap.length; i < len; i++) {\n            result[i] = Color.fromHex(colorMap[i]);\n        }\n        standaloneThemeService.setColorMapOverride(result);\n    }\n    else {\n        standaloneThemeService.setColorMapOverride(null);\n    }\n}\n/**\n * @internal\n */\nfunction createTokenizationSupportAdapter(languageId, provider) {\n    if (isEncodedTokensProvider(provider)) {\n        return new EncodedTokenizationSupportAdapter(languageId, provider);\n    }\n    else {\n        return new TokenizationSupportAdapter(languageId, provider, StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService));\n    }\n}\n/**\n * Register a tokens provider factory for a language. This tokenizer will be exclusive with a tokenizer\n * set using `setTokensProvider` or one created using `setMonarchTokensProvider`, but will work together\n * with a tokens provider set using `registerDocumentSemanticTokensProvider` or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function registerTokensProviderFactory(languageId, factory) {\n    const adaptedFactory = new languages.LazyTokenizationSupport(() => __awaiter(this, void 0, void 0, function* () {\n        const result = yield Promise.resolve(factory.create());\n        if (!result) {\n            return null;\n        }\n        if (isATokensProvider(result)) {\n            return createTokenizationSupportAdapter(languageId, result);\n        }\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, result), StandaloneServices.get(IConfigurationService));\n    }));\n    return languages.TokenizationRegistry.registerFactory(languageId, adaptedFactory);\n}\n/**\n * Set the tokens provider for a language (manual implementation). This tokenizer will be exclusive\n * with a tokenizer created using `setMonarchTokensProvider`, or with `registerTokensProviderFactory`,\n * but will work together with a tokens provider set using `registerDocumentSemanticTokensProvider`\n * or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setTokensProvider(languageId, provider) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set tokens provider for unknown language ${languageId}`);\n    }\n    if (isThenable(provider)) {\n        return registerTokensProviderFactory(languageId, { create: () => provider });\n    }\n    return languages.TokenizationRegistry.register(languageId, createTokenizationSupportAdapter(languageId, provider));\n}\n/**\n * Set the tokens provider for a language (monarch implementation). This tokenizer will be exclusive\n * with a tokenizer set using `setTokensProvider`, or with `registerTokensProviderFactory`, but will\n * work together with a tokens provider set using `registerDocumentSemanticTokensProvider` or\n * `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setMonarchTokensProvider(languageId, languageDef) {\n    const create = (languageDef) => {\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, languageDef), StandaloneServices.get(IConfigurationService));\n    };\n    if (isThenable(languageDef)) {\n        return registerTokensProviderFactory(languageId, { create: () => languageDef });\n    }\n    return languages.TokenizationRegistry.register(languageId, create(languageDef));\n}\n/**\n * Register a reference provider (used by e.g. reference search).\n */\nexport function registerReferenceProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.referenceProvider.register(languageSelector, provider);\n}\n/**\n * Register a rename provider (used by e.g. rename symbol).\n */\nexport function registerRenameProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.renameProvider.register(languageSelector, provider);\n}\n/**\n * Register a signature help provider (used by e.g. parameter hints).\n */\nexport function registerSignatureHelpProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.signatureHelpProvider.register(languageSelector, provider);\n}\n/**\n * Register a hover provider (used by e.g. editor hover).\n */\nexport function registerHoverProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.hoverProvider.register(languageSelector, {\n        provideHover: (model, position, token) => {\n            const word = model.getWordAtPosition(position);\n            return Promise.resolve(provider.provideHover(model, position, token)).then((value) => {\n                if (!value) {\n                    return undefined;\n                }\n                if (!value.range && word) {\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                }\n                if (!value.range) {\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                }\n                return value;\n            });\n        }\n    });\n}\n/**\n * Register a document symbol provider (used by e.g. outline).\n */\nexport function registerDocumentSymbolProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSymbolProvider.register(languageSelector, provider);\n}\n/**\n * Register a document highlight provider (used by e.g. highlight occurrences).\n */\nexport function registerDocumentHighlightProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentHighlightProvider.register(languageSelector, provider);\n}\n/**\n * Register an linked editing range provider.\n */\nexport function registerLinkedEditingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkedEditingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a definition provider (used by e.g. go to definition).\n */\nexport function registerDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.definitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a implementation provider (used by e.g. go to implementation).\n */\nexport function registerImplementationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.implementationProvider.register(languageSelector, provider);\n}\n/**\n * Register a type definition provider (used by e.g. go to type definition).\n */\nexport function registerTypeDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.typeDefinitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a code lens provider (used by e.g. inline code lenses).\n */\nexport function registerCodeLensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeLensProvider.register(languageSelector, provider);\n}\n/**\n * Register a code action provider (used by e.g. quick fix).\n */\nexport function registerCodeActionProvider(languageSelector, provider, metadata) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeActionProvider.register(languageSelector, {\n        providedCodeActionKinds: metadata === null || metadata === void 0 ? void 0 : metadata.providedCodeActionKinds,\n        documentation: metadata === null || metadata === void 0 ? void 0 : metadata.documentation,\n        provideCodeActions: (model, range, context, token) => {\n            const markerService = StandaloneServices.get(IMarkerService);\n            const markers = markerService.read({ resource: model.uri }).filter(m => {\n                return Range.areIntersectingOrTouching(m, range);\n            });\n            return provider.provideCodeActions(model, range, { markers, only: context.only, trigger: context.trigger }, token);\n        },\n        resolveCodeAction: provider.resolveCodeAction\n    });\n}\n/**\n * Register a formatter that can handle only entire models.\n */\nexport function registerDocumentFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter that can handle a range inside a model.\n */\nexport function registerDocumentRangeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter than can do formatting as the user types.\n */\nexport function registerOnTypeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.onTypeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a link provider that can find links in text.\n */\nexport function registerLinkProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkProvider.register(languageSelector, provider);\n}\n/**\n * Register a completion item provider (use by e.g. suggestions).\n */\nexport function registerCompletionItemProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.completionProvider.register(languageSelector, provider);\n}\n/**\n * Register a document color provider (used by Color Picker, Color Decorator).\n */\nexport function registerColorProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.colorProvider.register(languageSelector, provider);\n}\n/**\n * Register a folding range provider\n */\nexport function registerFoldingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.foldingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a declaration provider\n */\nexport function registerDeclarationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.declarationProvider.register(languageSelector, provider);\n}\n/**\n * Register a selection range provider\n */\nexport function registerSelectionRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.selectionRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a document semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register a document range semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentRangeSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register an inline completions provider.\n */\nexport function registerInlineCompletionsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlineCompletionsProvider.register(languageSelector, provider);\n}\n/**\n * Register an inlay hints provider.\n */\nexport function registerInlayHintsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlayHintsProvider.register(languageSelector, provider);\n}\n/**\n * @internal\n */\nexport function createMonacoLanguagesAPI() {\n    return {\n        register: register,\n        getLanguages: getLanguages,\n        onLanguage: onLanguage,\n        onLanguageEncountered: onLanguageEncountered,\n        getEncodedLanguageId: getEncodedLanguageId,\n        // provider methods\n        setLanguageConfiguration: setLanguageConfiguration,\n        setColorMap: setColorMap,\n        registerTokensProviderFactory: registerTokensProviderFactory,\n        setTokensProvider: setTokensProvider,\n        setMonarchTokensProvider: setMonarchTokensProvider,\n        registerReferenceProvider: registerReferenceProvider,\n        registerRenameProvider: registerRenameProvider,\n        registerCompletionItemProvider: registerCompletionItemProvider,\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\n        registerHoverProvider: registerHoverProvider,\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\n        registerLinkedEditingRangeProvider: registerLinkedEditingRangeProvider,\n        registerDefinitionProvider: registerDefinitionProvider,\n        registerImplementationProvider: registerImplementationProvider,\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\n        registerCodeLensProvider: registerCodeLensProvider,\n        registerCodeActionProvider: registerCodeActionProvider,\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\n        registerLinkProvider: registerLinkProvider,\n        registerColorProvider: registerColorProvider,\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\n        registerDeclarationProvider: registerDeclarationProvider,\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\n        registerInlineCompletionsProvider: registerInlineCompletionsProvider,\n        registerInlayHintsProvider: registerInlayHintsProvider,\n        // enums\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\n        SymbolKind: standaloneEnums.SymbolKind,\n        SymbolTag: standaloneEnums.SymbolTag,\n        IndentAction: standaloneEnums.IndentAction,\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\n        InlayHintKind: standaloneEnums.InlayHintKind,\n        InlineCompletionTriggerKind: standaloneEnums.InlineCompletionTriggerKind,\n        CodeActionTriggerType: standaloneEnums.CodeActionTriggerType,\n        // classes\n        FoldingRangeKind: languages.FoldingRangeKind,\n        SelectedSuggestionInfo: languages.SelectedSuggestionInfo,\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/*\n * This module only exports 'compile' which compiles a JSON language definition\n * into a typed and checked ILexer definition.\n */\nimport * as monarchCommon from './monarchCommon.js';\n/*\n * Type helpers\n *\n * Note: this is just for sanity checks on the JSON description which is\n * helpful for the programmer. No checks are done anymore once the lexer is\n * already 'compiled and checked'.\n *\n */\nfunction isArrayOf(elemType, obj) {\n    if (!obj) {\n        return false;\n    }\n    if (!(Array.isArray(obj))) {\n        return false;\n    }\n    for (const el of obj) {\n        if (!(elemType(el))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction bool(prop, defValue) {\n    if (typeof prop === 'boolean') {\n        return prop;\n    }\n    return defValue;\n}\nfunction string(prop, defValue) {\n    if (typeof (prop) === 'string') {\n        return prop;\n    }\n    return defValue;\n}\nfunction arrayToHash(array) {\n    const result = {};\n    for (const e of array) {\n        result[e] = true;\n    }\n    return result;\n}\nfunction createKeywordMatcher(arr, caseInsensitive = false) {\n    if (caseInsensitive) {\n        arr = arr.map(function (x) { return x.toLowerCase(); });\n    }\n    const hash = arrayToHash(arr);\n    if (caseInsensitive) {\n        return function (word) {\n            return hash[word.toLowerCase()] !== undefined && hash.hasOwnProperty(word.toLowerCase());\n        };\n    }\n    else {\n        return function (word) {\n            return hash[word] !== undefined && hash.hasOwnProperty(word);\n        };\n    }\n}\n// Lexer helpers\n/**\n * Compiles a regular expression string, adding the 'i' flag if 'ignoreCase' is set, and the 'u' flag if 'unicode' is set.\n * Also replaces @\\w+ or sequences with the content of the specified attribute\n * @\\w+ replacement can be avoided by escaping `@` signs with another `@` sign.\n * @example /@attr/ will be replaced with the value of lexer[attr]\n * @example /@@text/ will not be replaced and will become /@text/.\n */\nfunction compileRegExp(lexer, str) {\n    // @@ must be interpreted as a literal @, so we replace all occurences of @@ with a placeholder character\n    str = str.replace(/@@/g, `\\x01`);\n    let n = 0;\n    let hadExpansion;\n    do {\n        hadExpansion = false;\n        str = str.replace(/@(\\w+)/g, function (s, attr) {\n            hadExpansion = true;\n            let sub = '';\n            if (typeof (lexer[attr]) === 'string') {\n                sub = lexer[attr];\n            }\n            else if (lexer[attr] && lexer[attr] instanceof RegExp) {\n                sub = lexer[attr].source;\n            }\n            else {\n                if (lexer[attr] === undefined) {\n                    throw monarchCommon.createError(lexer, 'language definition does not contain attribute \\'' + attr + '\\', used at: ' + str);\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'attribute reference \\'' + attr + '\\' must be a string, used at: ' + str);\n                }\n            }\n            return (monarchCommon.empty(sub) ? '' : '(?:' + sub + ')');\n        });\n        n++;\n    } while (hadExpansion && n < 5);\n    // handle escaped @@\n    str = str.replace(/\\x01/g, '@');\n    const flags = (lexer.ignoreCase ? 'i' : '') + (lexer.unicode ? 'u' : '');\n    return new RegExp(str, flags);\n}\n/**\n * Compiles guard functions for case matches.\n * This compiles 'cases' attributes into efficient match functions.\n *\n */\nfunction selectScrutinee(id, matches, state, num) {\n    if (num < 0) {\n        return id;\n    }\n    if (num < matches.length) {\n        return matches[num];\n    }\n    if (num >= 100) {\n        num = num - 100;\n        const parts = state.split('.');\n        parts.unshift(state);\n        if (num < parts.length) {\n            return parts[num];\n        }\n    }\n    return null;\n}\nfunction createGuard(lexer, ruleName, tkey, val) {\n    // get the scrutinee and pattern\n    let scrut = -1; // -1: $!, 0-99: $n, 100+n: $Sn\n    let oppat = tkey;\n    let matches = tkey.match(/^\\$(([sS]?)(\\d\\d?)|#)(.*)$/);\n    if (matches) {\n        if (matches[3]) { // if digits\n            scrut = parseInt(matches[3]);\n            if (matches[2]) {\n                scrut = scrut + 100; // if [sS] present\n            }\n        }\n        oppat = matches[4];\n    }\n    // get operator\n    let op = '~';\n    let pat = oppat;\n    if (!oppat || oppat.length === 0) {\n        op = '!=';\n        pat = '';\n    }\n    else if (/^\\w*$/.test(pat)) { // just a word\n        op = '==';\n    }\n    else {\n        matches = oppat.match(/^(@|!@|~|!~|==|!=)(.*)$/);\n        if (matches) {\n            op = matches[1];\n            pat = matches[2];\n        }\n    }\n    // set the tester function\n    let tester;\n    // special case a regexp that matches just words\n    if ((op === '~' || op === '!~') && /^(\\w|\\|)*$/.test(pat)) {\n        const inWords = createKeywordMatcher(pat.split('|'), lexer.ignoreCase);\n        tester = function (s) { return (op === '~' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '@' || op === '!@') {\n        const words = lexer[pat];\n        if (!words) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' is not defined, in rule: ' + ruleName);\n        }\n        if (!(isArrayOf(function (elem) { return (typeof (elem) === 'string'); }, words))) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' must be an array of strings, in rule: ' + ruleName);\n        }\n        const inWords = createKeywordMatcher(words, lexer.ignoreCase);\n        tester = function (s) { return (op === '@' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '~' || op === '!~') {\n        if (pat.indexOf('$') < 0) {\n            // precompile regular expression\n            const re = compileRegExp(lexer, '^' + pat + '$');\n            tester = function (s) { return (op === '~' ? re.test(s) : !re.test(s)); };\n        }\n        else {\n            tester = function (s, id, matches, state) {\n                const re = compileRegExp(lexer, '^' + monarchCommon.substituteMatches(lexer, pat, id, matches, state) + '$');\n                return re.test(s);\n            };\n        }\n    }\n    else { // if (op==='==' || op==='!=') {\n        if (pat.indexOf('$') < 0) {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s) { return (op === '==' ? s === patx : s !== patx); };\n        }\n        else {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s, id, matches, state, eos) {\n                const patexp = monarchCommon.substituteMatches(lexer, patx, id, matches, state);\n                return (op === '==' ? s === patexp : s !== patexp);\n            };\n        }\n    }\n    // return the branch object\n    if (scrut === -1) {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                return tester(id, id, matches, state, eos);\n            }\n        };\n    }\n    else {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                const scrutinee = selectScrutinee(id, matches, state, scrut);\n                return tester(!scrutinee ? '' : scrutinee, id, matches, state, eos);\n            }\n        };\n    }\n}\n/**\n * Compiles an action: i.e. optimize regular expressions and case matches\n * and do many sanity checks.\n *\n * This is called only during compilation but if the lexer definition\n * contains user functions as actions (which is usually not allowed), then this\n * may be called during lexing. It is important therefore to compile common cases efficiently\n */\nfunction compileAction(lexer, ruleName, action) {\n    if (!action) {\n        return { token: '' };\n    }\n    else if (typeof (action) === 'string') {\n        return action; // { token: action };\n    }\n    else if (action.token || action.token === '') {\n        if (typeof (action.token) !== 'string') {\n            throw monarchCommon.createError(lexer, 'a \\'token\\' attribute must be of type string, in rule: ' + ruleName);\n        }\n        else {\n            // only copy specific typed fields (only happens once during compile Lexer)\n            const newAction = { token: action.token };\n            if (action.token.indexOf('$') >= 0) {\n                newAction.tokenSubst = true;\n            }\n            if (typeof (action.bracket) === 'string') {\n                if (action.bracket === '@open') {\n                    newAction.bracket = 1 /* monarchCommon.MonarchBracket.Open */;\n                }\n                else if (action.bracket === '@close') {\n                    newAction.bracket = -1 /* monarchCommon.MonarchBracket.Close */;\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'a \\'bracket\\' attribute must be either \\'@open\\' or \\'@close\\', in rule: ' + ruleName);\n                }\n            }\n            if (action.next) {\n                if (typeof (action.next) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'the next state must be a string value in rule: ' + ruleName);\n                }\n                else {\n                    let next = action.next;\n                    if (!/^(@pop|@push|@popall)$/.test(next)) {\n                        if (next[0] === '@') {\n                            next = next.substr(1); // peel off starting @ sign\n                        }\n                        if (next.indexOf('$') < 0) { // no dollar substitution, we can check if the state exists\n                            if (!monarchCommon.stateExists(lexer, monarchCommon.substituteMatches(lexer, next, '', [], ''))) {\n                                throw monarchCommon.createError(lexer, 'the next state \\'' + action.next + '\\' is not defined in rule: ' + ruleName);\n                            }\n                        }\n                    }\n                    newAction.next = next;\n                }\n            }\n            if (typeof (action.goBack) === 'number') {\n                newAction.goBack = action.goBack;\n            }\n            if (typeof (action.switchTo) === 'string') {\n                newAction.switchTo = action.switchTo;\n            }\n            if (typeof (action.log) === 'string') {\n                newAction.log = action.log;\n            }\n            if (typeof (action.nextEmbedded) === 'string') {\n                newAction.nextEmbedded = action.nextEmbedded;\n                lexer.usesEmbedded = true;\n            }\n            return newAction;\n        }\n    }\n    else if (Array.isArray(action)) {\n        const results = [];\n        for (let i = 0, len = action.length; i < len; i++) {\n            results[i] = compileAction(lexer, ruleName, action[i]);\n        }\n        return { group: results };\n    }\n    else if (action.cases) {\n        // build an array of test cases\n        const cases = [];\n        // for each case, push a test function and result value\n        for (const tkey in action.cases) {\n            if (action.cases.hasOwnProperty(tkey)) {\n                const val = compileAction(lexer, ruleName, action.cases[tkey]);\n                // what kind of case\n                if (tkey === '@default' || tkey === '@' || tkey === '') {\n                    cases.push({ test: undefined, value: val, name: tkey });\n                }\n                else if (tkey === '@eos') {\n                    cases.push({ test: function (id, matches, state, eos) { return eos; }, value: val, name: tkey });\n                }\n                else {\n                    cases.push(createGuard(lexer, ruleName, tkey, val)); // call separate function to avoid local variable capture\n                }\n            }\n        }\n        // create a matching function\n        const def = lexer.defaultToken;\n        return {\n            test: function (id, matches, state, eos) {\n                for (const _case of cases) {\n                    const didmatch = (!_case.test || _case.test(id, matches, state, eos));\n                    if (didmatch) {\n                        return _case.value;\n                    }\n                }\n                return def;\n            }\n        };\n    }\n    else {\n        throw monarchCommon.createError(lexer, 'an action must be a string, an object with a \\'token\\' or \\'cases\\' attribute, or an array of actions; in rule: ' + ruleName);\n    }\n}\n/**\n * Helper class for creating matching rules\n */\nclass Rule {\n    constructor(name) {\n        this.regex = new RegExp('');\n        this.action = { token: '' };\n        this.matchOnlyAtLineStart = false;\n        this.name = '';\n        this.name = name;\n    }\n    setRegex(lexer, re) {\n        let sregex;\n        if (typeof (re) === 'string') {\n            sregex = re;\n        }\n        else if (re instanceof RegExp) {\n            sregex = re.source;\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'rules must start with a match string or regular expression: ' + this.name);\n        }\n        this.matchOnlyAtLineStart = (sregex.length > 0 && sregex[0] === '^');\n        this.name = this.name + ': ' + sregex;\n        this.regex = compileRegExp(lexer, '^(?:' + (this.matchOnlyAtLineStart ? sregex.substr(1) : sregex) + ')');\n    }\n    setAction(lexer, act) {\n        this.action = compileAction(lexer, this.name, act);\n    }\n}\n/**\n * Compiles a json description function into json where all regular expressions,\n * case matches etc, are compiled and all include rules are expanded.\n * We also compile the bracket definitions, supply defaults, and do many sanity checks.\n * If the 'jsonStrict' parameter is 'false', we allow at certain locations\n * regular expression objects and functions that get called during lexing.\n * (Currently we have no samples that need this so perhaps we should always have\n * jsonStrict to true).\n */\nexport function compile(languageId, json) {\n    if (!json || typeof (json) !== 'object') {\n        throw new Error('Monarch: expecting a language definition object');\n    }\n    // Create our lexer\n    const lexer = {};\n    lexer.languageId = languageId;\n    lexer.includeLF = bool(json.includeLF, false);\n    lexer.noThrow = false; // raise exceptions during compilation\n    lexer.maxStack = 100;\n    // Set standard fields: be defensive about types\n    lexer.start = (typeof json.start === 'string' ? json.start : null);\n    lexer.ignoreCase = bool(json.ignoreCase, false);\n    lexer.unicode = bool(json.unicode, false);\n    lexer.tokenPostfix = string(json.tokenPostfix, '.' + lexer.languageId);\n    lexer.defaultToken = string(json.defaultToken, 'source');\n    lexer.usesEmbedded = false; // becomes true if we find a nextEmbedded action\n    // For calling compileAction later on\n    const lexerMin = json;\n    lexerMin.languageId = languageId;\n    lexerMin.includeLF = lexer.includeLF;\n    lexerMin.ignoreCase = lexer.ignoreCase;\n    lexerMin.unicode = lexer.unicode;\n    lexerMin.noThrow = lexer.noThrow;\n    lexerMin.usesEmbedded = lexer.usesEmbedded;\n    lexerMin.stateNames = json.tokenizer;\n    lexerMin.defaultToken = lexer.defaultToken;\n    // Compile an array of rules into newrules where RegExp objects are created.\n    function addRules(state, newrules, rules) {\n        for (const rule of rules) {\n            let include = rule.include;\n            if (include) {\n                if (typeof (include) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'an \\'include\\' attribute must be a string at: ' + state);\n                }\n                if (include[0] === '@') {\n                    include = include.substr(1); // peel off starting @\n                }\n                if (!json.tokenizer[include]) {\n                    throw monarchCommon.createError(lexer, 'include target \\'' + include + '\\' is not defined at: ' + state);\n                }\n                addRules(state + '.' + include, newrules, json.tokenizer[include]);\n            }\n            else {\n                const newrule = new Rule(state);\n                // Set up new rule attributes\n                if (Array.isArray(rule) && rule.length >= 1 && rule.length <= 3) {\n                    newrule.setRegex(lexerMin, rule[0]);\n                    if (rule.length >= 3) {\n                        if (typeof (rule[1]) === 'string') {\n                            newrule.setAction(lexerMin, { token: rule[1], next: rule[2] });\n                        }\n                        else if (typeof (rule[1]) === 'object') {\n                            const rule1 = rule[1];\n                            rule1.next = rule[2];\n                            newrule.setAction(lexerMin, rule1);\n                        }\n                        else {\n                            throw monarchCommon.createError(lexer, 'a next state as the last element of a rule can only be given if the action is either an object or a string, at: ' + state);\n                        }\n                    }\n                    else {\n                        newrule.setAction(lexerMin, rule[1]);\n                    }\n                }\n                else {\n                    if (!rule.regex) {\n                        throw monarchCommon.createError(lexer, 'a rule must either be an array, or an object with a \\'regex\\' or \\'include\\' field at: ' + state);\n                    }\n                    if (rule.name) {\n                        if (typeof rule.name === 'string') {\n                            newrule.name = rule.name;\n                        }\n                    }\n                    if (rule.matchOnlyAtStart) {\n                        newrule.matchOnlyAtLineStart = bool(rule.matchOnlyAtLineStart, false);\n                    }\n                    newrule.setRegex(lexerMin, rule.regex);\n                    newrule.setAction(lexerMin, rule.action);\n                }\n                newrules.push(newrule);\n            }\n        }\n    }\n    // compile the tokenizer rules\n    if (!json.tokenizer || typeof (json.tokenizer) !== 'object') {\n        throw monarchCommon.createError(lexer, 'a language definition must define the \\'tokenizer\\' attribute as an object');\n    }\n    lexer.tokenizer = [];\n    for (const key in json.tokenizer) {\n        if (json.tokenizer.hasOwnProperty(key)) {\n            if (!lexer.start) {\n                lexer.start = key;\n            }\n            const rules = json.tokenizer[key];\n            lexer.tokenizer[key] = new Array();\n            addRules('tokenizer.' + key, lexer.tokenizer[key], rules);\n        }\n    }\n    lexer.usesEmbedded = lexerMin.usesEmbedded; // can be set during compileAction\n    // Set simple brackets\n    if (json.brackets) {\n        if (!(Array.isArray(json.brackets))) {\n            throw monarchCommon.createError(lexer, 'the \\'brackets\\' attribute must be defined as an array');\n        }\n    }\n    else {\n        json.brackets = [\n            { open: '{', close: '}', token: 'delimiter.curly' },\n            { open: '[', close: ']', token: 'delimiter.square' },\n            { open: '(', close: ')', token: 'delimiter.parenthesis' },\n            { open: '<', close: '>', token: 'delimiter.angle' }\n        ];\n    }\n    const brackets = [];\n    for (const el of json.brackets) {\n        let desc = el;\n        if (desc && Array.isArray(desc) && desc.length === 3) {\n            desc = { token: desc[2], open: desc[0], close: desc[1] };\n        }\n        if (desc.open === desc.close) {\n            throw monarchCommon.createError(lexer, 'open and close brackets in a \\'brackets\\' attribute must be different: ' + desc.open +\n                '\\n hint: use the \\'bracket\\' attribute if matching on equal brackets is required.');\n        }\n        if (typeof desc.open === 'string' && typeof desc.token === 'string' && typeof desc.close === 'string') {\n            brackets.push({\n                token: desc.token + lexer.tokenPostfix,\n                open: monarchCommon.fixCase(lexer, desc.open),\n                close: monarchCommon.fixCase(lexer, desc.close)\n            });\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'every element in the \\'brackets\\' array must be a \\'{open,close,token}\\' object or array');\n        }\n    }\n    lexer.brackets = brackets;\n    // Disable throw so the syntax highlighter goes, no matter what\n    lexer.noThrow = true;\n    return lexer;\n}\n"],
  "mappings": "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",
  "names": ["__decorate", "__param", "__awaiter", "editor", "__awaiter", "__decorate", "__param", "editor", "_a", "SelectionAnchorController", "editor", "init_actions", "editor", "editor", "editor", "init_actions", "__awaiter", "editor", "editor", "init_platform", "init_model", "__awaiter", "provider", "__decorate", "__param", "CodeLensCache", "item", "editor", "decoration", "__decorate", "__param", "__awaiter", "CodeLensContribution", "promises", "request", "i", "editor", "__awaiter", "init_model", "init_model", "__decorate", "__param", "__awaiter", "DefaultDocumentColorProviderFeature", "__awaiter", "__decorate", "__param", "__awaiter", "ColorDetector", "editor", "decoration", "$", "transparent", "__decorate", "__param", "__awaiter", "ColorHoverParticipant", "StandaloneColorPickerParticipant", "__awaiter", "colorInfo", "__decorate", "__param", "__awaiter", "editor", "color", "__decorate", "__param", "__awaiter", "GotoDefinitionAtPositionEditorContribution", "editor", "$", "__awaiter", "v", "HoverParticipantRegistry", "__decorate", "__param", "$", "ContentHoverController", "HoverResult", "editor", "HoverResult", "ContentHoverWidget", "editor", "__decorate", "__param", "EditorHoverStatusBar", "$", "__decorate", "__param", "editor", "$", "editor", "__awaiter", "__decorate", "__param", "$", "MarkdownHoverParticipant", "editor", "$", "__decorate", "__param", "MarkerList", "MarkerNavigationService", "__decorate", "__param", "init_actions", "init_actions", "SeverityIcon", "__decorate", "__param", "editor", "MarkerNavigationWidget", "__decorate", "__param", "__awaiter", "MarkerController", "editor", "editor", "__awaiter", "__decorate", "__param", "$", "MarkerHoverParticipant", "message", "messageElement", "__decorate", "__param", "ModesHoverController", "editor", "editor", "init_model", "__decorate", "__param", "__awaiter", "StandaloneColorPickerController", "editor", "StandaloneColorPickerWidget", "_a", "__awaiter", "__decorate", "__param", "init_actions", "editor", "firstNonWhitespaceIndex", "j", "lenJ", "init_actions", "editor", "CursorState", "editor", "editor", "__awaiter", "__decorate", "__param", "__awaiter", "editor", "InlineProgressManager", "__decorate", "__param", "__awaiter", "PostEditWidget", "editor", "PostEditWidgetManager", "model", "__decorate", "__param", "__awaiter", "CopyPasteController", "editor", "_a", "__decorate", "__param", "__awaiter", "RelativePathProvider", "DefaultDropProvidersFeature", "DefaultPasteProvidersFeature", "__decorate", "__param", "editor", "init_platform", "__decorate", "__param", "__awaiter", "DropIntoEditorController", "editor", "editor", "editor", "len", "editor", "editor", "_a", "__awaiter", "init_actions", "__decorate", "__param", "__awaiter", "editor", "CommonFindController", "FindController", "editor", "__awaiter", "__decorate", "__param", "editor", "__awaiter", "editor", "init_actions", "__awaiter", "editor", "__decorate", "__param", "InlineCompletionsHoverParticipant", "$", "init_actions", "init_model", "__decorate", "__param", "adjustedLineContent", "editor", "AutoIndentOnPaste", "__decorate", "__param", "__awaiter", "__asyncValues", "v", "InlayHintsHover", "editor", "import_inPlaceReplace", "editor", "__decorate", "__param", "MoveLinesCommand", "init_actions", "editor", "i", "__decorate", "__param", "__awaiter", "LinkedEditingContribution", "editor", "commonPrefixLength", "commonSuffixLength", "editor", "accessor", "__awaiter", "init_model", "__awaiter", "Link", "__decorate", "__param", "__awaiter", "LinkDetector", "editor", "relativePath", "decoration", "editor", "editor", "init_actions", "__decorate", "__param", "editor", "SelectionHighlighter", "findState", "editor", "__awaiter", "Context", "__awaiter", "ParameterHintState", "editor", "first", "__decorate", "__param", "$", "ParameterHintsWidget", "editor", "Context", "__decorate", "__param", "ParameterHintsController", "editor", "editor", "Context", "init_platform", "__decorate", "__param", "RenameInputField", "__decorate", "__param", "__awaiter", "RenameController", "editor", "accessor", "init_model", "init_model", "__awaiter", "__decorate", "__param", "DocumentSemanticTokensFeature", "register", "ModelSemanticColoring", "__decorate", "__param", "__decorate", "__param", "ViewportSemanticTokensContribution", "editor", "init_actions", "__decorate", "__param", "__awaiter", "SmartSelectController", "editor", "ranges", "_a", "editor", "__awaiter", "init_actions", "__awaiter", "__decorate", "__param", "__awaiter", "ModelProvider", "Status", "StickyModelProvider", "status", "token", "StickyModelFromCandidateOutlineProvider", "__decorate", "__param", "editor", "StickyModelFromCandidateIndentationFoldingProvider", "StickyModelFromCandidateSyntaxFoldingProvider", "__decorate", "__param", "__awaiter", "StickyLineCandidateProvider", "editor", "init_actions", "__decorate", "__param", "__awaiter", "StickyScrollController", "editor", "position", "__awaiter", "weight", "editor", "init_actions", "__decorate", "__param", "__awaiter", "InlineCompletionResults", "first", "SuggestInlineCompletions", "EditorContribution", "editor", "__decorate", "__param", "editor", "init_actions", "__decorate", "__param", "BannerController", "Banner", "__decorate", "__param", "__decorate", "__param", "__awaiter", "UnicodeHighlighter", "decoration", "DocumentUnicodeHighlighter", "decoration", "__decorate", "__param", "UnicodeHighlighterHoverParticipant", "__decorate", "__param", "editor", "__awaiter", "codePoint", "__decorate", "__param", "__awaiter", "UnusualLineTerminatorsDetector", "__decorate", "__param", "editor", "WordHighlighterContribution", "editor", "editor", "editor", "editor", "init_model", "__decorate", "__param", "MonarchTokenizer", "language", "rule", "enteringEmbeddedLanguage", "embeddedLanguageData", "__awaiter", "isBasicASCII", "status", "init_actions", "__awaiter", "editor", "accessor", "args", "language", "createWebWorker", "registerCommand", "MinimapPosition", "OverviewRulerLane", "matches", "__awaiter", "language", "create", "languageDef", "DocumentHighlightKind", "IndentAction", "SignatureHelpTriggerKind", "document", "CancellationTokenSource", "Emitter", "Position", "Range", "Selection", "MarkerSeverity", "Token"]
}
